(self.webpackChunkrasa_interface_react=self.webpackChunkrasa_interface_react||[]).push([[179],{"./src/components/BotStep/BotStep.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/BotStep/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"BotStep",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <BotStep {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/CheckPoint/CheckPoint.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/CheckPoint/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"CheckPoint",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <CheckPoint {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/CreateStory/CreateStory.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/CreateStory/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"CreateStory",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <CreateStory {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/Entities/Entities.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Entities/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"Entities",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <Entities {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/Home/Home.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Home/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"Home",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  \n  return <Home {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/Layout/Layout.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return Layout_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),esm=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ProtectedRoute=function ProtectedRoute(props){var children=props.children,_useStoryStore=(0,useStoryStore.Z)((function(state){return{user:state.user,isAppInitializedComplete:state.isAppInitializedComplete}}),shallow.Z),user=_useStoryStore.user;return _useStoryStore.isAppInitializedComplete?user?children:(0,jsx_runtime.jsx)(dist.Fg,{to:"/login?redirect_url=".concat(encodeURIComponent(window.location.pathname))}):(0,jsx_runtime.jsx)("div",{className:"my-spinner",children:"Loading"})};ProtectedRoute.__docgenInfo={description:"",methods:[],displayName:"ProtectedRoute"};var containers_ProtectedRoute=ProtectedRoute;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\containers\\ProtectedRoute\\index.jsx"]={name:"ProtectedRoute",docgenInfo:ProtectedRoute.__docgenInfo,path:"src\\containers\\ProtectedRoute\\index.jsx"});var Home=__webpack_require__("./src/components/Home/index.js"),Register=__webpack_require__("./src/components/Register/index.js"),Authenticate=__webpack_require__("./src/containers/Authenticate/index.jsx"),Stories=__webpack_require__("./src/components/Stories/index.js"),WebChatWidget=__webpack_require__("./src/components/WebChatWidget/index.js"),Layout_module_layout="Layout_layout__iVwLS",Layout_module_layoutBlock="Layout_layoutBlock__cYVeg",Login=__webpack_require__("./src/components/Login/index.js"),NavBar=__webpack_require__("./src/components/NavBar/index.js"),NAVITEMS=[{id:"1",name:"故事流程",link:"/stories"},{id:"2",name:"對話紀錄",link:"/conversion"}],Layout=function Layout(){return(0,jsx_runtime.jsxs)("div",{className:Layout_module_layout,children:[(0,jsx_runtime.jsx)(Authenticate.Z,{children:(0,jsx_runtime.jsx)(NavBar.Z,{navItems:NAVITEMS})}),(0,jsx_runtime.jsxs)(dist.Z5,{children:[(0,jsx_runtime.jsx)(dist.AW,{path:"/",element:(0,jsx_runtime.jsx)(containers_ProtectedRoute,{children:(0,jsx_runtime.jsx)("div",{className:Layout_module_layoutBlock,children:(0,jsx_runtime.jsx)(Home.Z,{})})})}),(0,jsx_runtime.jsx)(dist.AW,{path:"/stories",element:(0,jsx_runtime.jsx)(containers_ProtectedRoute,{children:(0,jsx_runtime.jsx)("div",{className:Layout_module_layoutBlock,children:(0,jsx_runtime.jsx)(Stories.Z,{})})})}),(0,jsx_runtime.jsx)(dist.AW,{path:"/login",element:(0,jsx_runtime.jsx)(Login.Z,{})}),(0,jsx_runtime.jsx)(dist.AW,{path:"/register",element:(0,jsx_runtime.jsx)(Register.Z,{})})]}),(0,jsx_runtime.jsx)(Authenticate.Z,{children:(0,jsx_runtime.jsx)(WebChatWidget.Z,{})})]})};Layout.__docgenInfo={description:"",methods:[],displayName:"Layout"};var Layout_Layout=react.memo(Layout);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Layout\\Layout.jsx"]={name:"Layout",docgenInfo:Layout.__docgenInfo,path:"src\\components\\Layout\\Layout.jsx"});var action=(0,esm.actions)(),Layout_stories={title:"Layout",component:Layout_Layout},Basic=function Template(args){return(0,jsx_runtime.jsx)(Layout_Layout,(0,objectSpread2.Z)((0,objectSpread2.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => {\n  return <Layout {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/Login/Login.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Login/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"Login",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <Login {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/Menu/Menu.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return Menu_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),esm=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),Menu_module_itemLi="Menu_itemLi__NmcIV",Menu_module_btnSet="Menu_btnSet__SceQ3",jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Menu=function Menu(){return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:Menu_module_itemLi,children:(0,jsx_runtime.jsxs)(dist.rU,{className:"nav-link",to:"/conversations",children:[(0,jsx_runtime.jsx)("span",{children:"對話紀錄:"}),(0,jsx_runtime.jsx)("span",{className:Menu_module_btnSet,children:"設定"})]})}),(0,jsx_runtime.jsx)("div",{className:Menu_module_itemLi,children:(0,jsx_runtime.jsxs)(dist.rU,{className:"nav-link",to:"/stories",children:[(0,jsx_runtime.jsx)("span",{children:"故事流程:"}),(0,jsx_runtime.jsx)("span",{className:Menu_module_btnSet,children:"設定"})]})})]})};Menu.__docgenInfo={description:"",methods:[],displayName:"Menu"};var Menu_Menu=react.memo(Menu);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Menu\\Menu.jsx"]={name:"Menu",docgenInfo:Menu.__docgenInfo,path:"src\\components\\Menu\\Menu.jsx"});var action=(0,esm.actions)(),Menu_stories={title:"Menu",component:Menu_Menu},Basic=function Template(args){return(0,jsx_runtime.jsx)(Menu_Menu,(0,objectSpread2.Z)((0,objectSpread2.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => {\n  return <Menu {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/MyButton/MyButton.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},Rounded:function(){return Rounded},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectDestructuringEmpty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js"),___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/MyButton/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"MyButton",component:___WEBPACK_IMPORTED_MODULE_0__.Z,argTypes:{onClick:{action:"button clicked"},rounded:{control:"boolean"},color:{control:"color"},variant:{options:["primary","secondary"],control:{type:"radio"}}}};var Template=function Template(_ref){var args=Object.assign({},((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectDestructuringEmpty_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_ref),_ref));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(___WEBPACK_IMPORTED_MODULE_0__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),{},{children:"Test Button"}))},Basic=Template.bind({}),Rounded=Template.bind({});Rounded.args={rounded:!0,color:"red"},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"({ ...args }) => {\n  \n  return <MyButton {...args}>Test Button</MyButton>;\n}"}},Basic.parameters),Rounded.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"({ ...args }) => {\n  \n  return <MyButton {...args}>Test Button</MyButton>;\n}"}},Rounded.parameters);var __namedExportsOrder=["Basic","Rounded"]},"./src/components/MyInput/Myinput.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/MyInput/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"Myinput",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <Myinput {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/NavBar/NavBar.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/NavBar/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"NavBar",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <NavBar {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/Register/Register.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Register/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"Register",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <Register {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/ShowStory/ShowStory.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ShowStory/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"ShowStory",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <ShowStory {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/Slider/Slider.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Slider/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"Slider",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <Slider {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/Stories/Stories.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Stories/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"Stories",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <Stories {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/UserStep/UserStep.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/UserStep/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"UserStep",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <UserStep {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./src/components/WebChatWidget/WebChatWidget.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},__namedExportsOrder:function(){return __namedExportsOrder}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/WebChatWidget/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),action=(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.actions)();__webpack_exports__.default={title:"WebChatWidget",component:___WEBPACK_IMPORTED_MODULE_1__.Z};var Basic=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.Z,(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args),action))}.bind({});Basic.args={},Basic.parameters=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => {\n  return <WebChatWidget {...args} {...action} />;\n}"}},Basic.parameters);var __namedExportsOrder=["Basic"]},"./.storybook/preview.js-generated-config-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{__namedExportsOrder:function(){return __namedExportsOrder},parameters:function(){return parameters}});var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}},__namedExportsOrder=["parameters"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./src/actions/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{AM:function(){return actionCreateStoryConnectStoryEditBotRes},BI:function(){return actionCreateNewStory},Cg:function(){return actionCreateStoryDeleteExample},E5:function(){return actionSetStory},G4:function(){return actionCreateStoryEditIntent},Hz:function(){return actionAddSlotValue},LZ:function(){return actionCreateStoryDeleteEntities},O6:function(){return actionEditEntity},Ot:function(){return actionCreateStoryCreateBotStep},Q:function(){return actionCreateStoryEditEntityValue},QE:function(){return actionCreateStoryEditEntity},QY:function(){return actionCreateRemoveResButton},R3:function(){return actionCreateSlot},R9:function(){return actionEditEntityValue},Wq:function(){return actionCreateStoryEditResButtons},Ww:function(){return actionCreateStoryEditUserSay},Yw:function(){return actionCreateStoryEditEntityShowValue},_5:function(){return actionRemoveSlot},_6:function(){return actionAddResButtons},au:function(){return actionCreateStoryCreateBranchStory},bG:function(){return actionEditIntent},bY:function(){return actionCreateStoryCreateExample},d$:function(){return actionCreateStoryEditBotRes},eY:function(){return actionRemoveResButton},el:function(){return actionCreateStoryCreateEntities},ex:function(){return actionEditEntityShowValue},in:function(){return actionCreateStoryRemoveBotStep},ki:function(){return actionSetAllData},lg:function(){return actionCreateStoryRemoveUserStep},oG:function(){return actionCheckPointConnectBranchStory},oM:function(){return actionEditUserSay},oQ:function(){return actionCreateStoryCreateUserStep},oT:function(){return actionSetDeleteStory},q4:function(){return actionCreateStoryBranchStoryEditBotRes},sG:function(){return actionCreateStoryAddResButtons},sI:function(){return actionCreateEntities},t3:function(){return actionRemoveSlotValue},t6:function(){return actionCheckPointDeleteConnectBranchStory},tf:function(){return actionSetRasaTrainState},uj:function(){return actionDeleteExample},vD:function(){return actionCreateStoryDeleteBranchStory},wD:function(){return actionEditResButtons},wF:function(){return actionDeleteEntities},x$:function(){return actionCreateExample},y:function(){return actionEditBotRes},yL:function(){return actionSetAllAction}});var actionSetAllData=function actionSetAllData(data){return{type:"SET_ALL_TRAIN_DATA",payload:data}},actionSetStory=function actionSetStory(storyName){return{type:"SET_STORY",payload:storyName}},actionEditUserSay=function actionEditUserSay(oriWord,newWord,storyName){return{type:"EDIT_USER_SAY",payload:{oriWord:oriWord,newWord:newWord,storyName:storyName}}},actionEditBotRes=function actionEditBotRes(oriWord,newWord,actionName,storyName){return{type:"EDIT_BOT_RESPONSE",payload:{oriWord:oriWord,newWord:newWord,actionName:actionName,storyName:storyName}}},actionCreateExample=function actionCreateExample(stepIntent,example,exampleEntities,storyName){return{type:"CREATE_EXAMPLE",payload:{stepIntent:stepIntent,example:example,exampleEntities:exampleEntities,storyName:storyName}}},actionSetDeleteStory=function actionSetDeleteStory(deleteStory){return{type:"SET_DELETE_STORY",payload:deleteStory}},actionSetAllAction=function actionSetAllAction(allAction){return{type:"SET_ALL_ACTION",payload:allAction}},actionEditResButtons=function actionEditResButtons(actionName,title,oriPayload,payload,reply,storyName,buttonActionName){return{type:"EDIT_RES_BUTTONS",payload:{actionName:actionName,title:title,oriPayload:oriPayload,payload:payload,reply:reply,storyName:storyName,buttonActionName:buttonActionName}}},actionRemoveResButton=function actionRemoveResButton(actionName,payload,storyName,buttonActionName,disabled){return{type:"REMOVE_RES_BUTTON",payload:{actionName:actionName,payload:payload,storyName:storyName,buttonActionName:buttonActionName,disabled:disabled}}},actionAddResButtons=function actionAddResButtons(actionName,title,payload,reply,storyName){return{type:"ADD_RES_BUTTONS",payload:{actionName:actionName,title:title,payload:payload,reply:reply,storyName:storyName}}},actionSetRasaTrainState=function actionSetRasaTrainState(state){return{type:"SET_RASA_TRAIN_STATE",payload:state}},actionEditIntent=function actionEditIntent(oriIntent,intent,storyName){return{type:"EDIT_INTENT",payload:{oriIntent:oriIntent,intent:intent,storyName:storyName}}},actionCreateEntities=function actionCreateEntities(entities,intent,storyName){return{type:"CREATE_ENTITIES",payload:{entities:entities,intent:intent,storyName:storyName}}},actionDeleteEntities=function actionDeleteEntities(entity,intent,storyName){return{type:"DELETE_ENTITIES",payload:{entity:entity,intent:intent,storyName:storyName}}},actionEditEntityShowValue=function actionEditEntityShowValue(stepIntent,currentEntityValue,newEntityShowValue,storyName){return{type:"EDIT_ENTITY_SHOW_VALUE",payload:{stepIntent:stepIntent,currentEntityValue:currentEntityValue,newEntityShowValue:newEntityShowValue,storyName:storyName}}},actionEditEntity=function actionEditEntity(stepIntent,oriEntity,newEntity,storyName){return{type:"EDIT_ENTITY",payload:{stepIntent:stepIntent,oriEntity:oriEntity,newEntity:newEntity,storyName:storyName}}},actionEditEntityValue=function actionEditEntityValue(stepIntent,oriEntityValue,newEntityValue,storyName){return{type:"EDIT_ENTITY_VALUE",payload:{stepIntent:stepIntent,oriEntityValue:oriEntityValue,newEntityValue:newEntityValue,storyName:storyName}}},actionDeleteExample=function actionDeleteExample(userSay,stepIntent,storyName){return{type:"DELETE_EXAMPLE",payload:{userSay:userSay,stepIntent:stepIntent,storyName:storyName}}},actionCreateSlot=function actionCreateSlot(formValue){return{type:"CREATE_SLOT",payload:formValue}},actionRemoveSlot=function actionRemoveSlot(slotKey){return{type:"REMOVE_SLOT",payload:slotKey}},actionAddSlotValue=function actionAddSlotValue(slotValues){return{type:"ADD_SLOT_VALUE",payload:{slotValues:slotValues}}},actionRemoveSlotValue=function actionRemoveSlotValue(slotValue){return{type:"REMOVE_SLOT_VALUE",payload:slotValue}},actionCreateNewStory=function actionCreateNewStory(storyName){return{type:"CREATE_NEW_STORY",payload:storyName}},actionCreateStoryCreateUserStep=function actionCreateStoryCreateUserStep(userSay){return{type:"CREATE_STORY_CREATE_USER_STEP",payload:userSay}},actionCreateStoryEditUserSay=function actionCreateStoryEditUserSay(oriUserSay,userSay,storyName,nlu){return{type:"CREATE_STORY_EDIT_USER_SAY",payload:{oriUserSay:oriUserSay,userSay:userSay,storyName:storyName,nlu:nlu}}},actionCreateStoryEditIntent=function actionCreateStoryEditIntent(oriIntent,intent,storyName,nlu){return{type:"CREATE_STORY_EDIT_INTENT",payload:{oriIntent:oriIntent,intent:intent,storyName:storyName,nlu:nlu}}},actionCreateStoryCreateExample=function actionCreateStoryCreateExample(intent,example,exampleEntities,storyName,nlu){return{type:"CREATE_STORY_CREATE_EXAMPLE",payload:{intent:intent,example:example,exampleEntities:exampleEntities,storyName:storyName,nlu:nlu}}},actionCreateStoryDeleteExample=function actionCreateStoryDeleteExample(userSay,intent){return{type:"CREATE_STORY_DELETE_EXAMPLE",payload:{userSay:userSay,intent:intent}}},actionCreateStoryCreateEntities=function actionCreateStoryCreateEntities(entities,intent){return{type:"CREATE_STORY_CREATE_ENTITIES",payload:{entities:entities,intent:intent}}},actionCreateStoryDeleteEntities=function actionCreateStoryDeleteEntities(entity,intent){return{type:"CREATE_STORY_DELETE_ENTITIES",payload:{entity:entity,intent:intent}}},actionCreateStoryEditEntityShowValue=function actionCreateStoryEditEntityShowValue(stepIntent,entityValue,newEntityShowValue){return{type:"CREATE_STORY_EDIT_ENTITY_SHOW_VALUE",payload:{stepIntent:stepIntent,entityValue:entityValue,newEntityShowValue:newEntityShowValue}}},actionCreateStoryEditEntity=function actionCreateStoryEditEntity(stepIntent,oriEntity,newEntity){return{type:"CREATE_STORY_EDIT_ENTITY",payload:{stepIntent:stepIntent,oriEntity:oriEntity,newEntity:newEntity}}},actionCreateStoryEditEntityValue=function actionCreateStoryEditEntityValue(stepIntent,oriEntityValue,newEntityValue){return{type:"CREATE_STORY_EDIT_ENTITY_VALUE",payload:{stepIntent:stepIntent,oriEntityValue:oriEntityValue,newEntityValue:newEntityValue}}},actionCreateStoryCreateBotStep=function actionCreateStoryCreateBotStep(actionName,botRes){return{type:"CREATE_STORY_CREATE_BOT_STEP",payload:{actionName:actionName,botRes:botRes}}},actionCreateStoryEditBotRes=function actionCreateStoryEditBotRes(oriBotRes,botRes,actionName){return{type:"CREATE_STORY_EDIT_BOT_RES",payload:{oriBotRes:oriBotRes,botRes:botRes,actionName:actionName}}},actionCreateStoryRemoveUserStep=function actionCreateStoryRemoveUserStep(intent,userSay){return{type:"CREATE_STORY_REMOVE_USER_STEP",payload:{intent:intent,userSay:userSay}}},actionCreateStoryRemoveBotStep=function actionCreateStoryRemoveBotStep(actionName){return{type:"CREATE_STORY_REMOVE_BOT_STEP",payload:actionName}},actionCreateStoryAddResButtons=function actionCreateStoryAddResButtons(actionName,title,payload,reply,storyName,stories){return{type:"CREATE_STORY_ADD_RES_BUTTONS",payload:{actionName:actionName,title:title,payload:payload,reply:reply,storyName:storyName,stories:stories}}},actionCreateStoryEditResButtons=function actionCreateStoryEditResButtons(actionName,title,oriPayload,payload,reply,storyName,buttonActionName,stories){return{type:"CREATE_STORY_EDIT_RES_BUTTONS",payload:{actionName:actionName,title:title,oriPayload:oriPayload,payload:payload,reply:reply,storyName:storyName,buttonActionName:buttonActionName,stories:stories}}},actionCreateRemoveResButton=function actionCreateRemoveResButton(actionName,payload){return{type:"CREATE_STORY_REMOVE_RES_BUTTON",payload:{actionName:actionName,payload:payload}}},actionCreateStoryCreateBranchStory=function actionCreateStoryCreateBranchStory(newBranchStory){return{type:"CREATE_STORY_CREATE_BRANCH_STORY",payload:newBranchStory}},actionCreateStoryDeleteBranchStory=function actionCreateStoryDeleteBranchStory(checkPointName,branchName){return{type:"CREATE_STORY_DELETE_BRANCH_STORY",payload:{checkPointName:checkPointName,branchName:branchName}}},actionCheckPointConnectBranchStory=function actionCheckPointConnectBranchStory(newStory,newBranchStory){return{type:"CHECK_POINT_CONNECT_BRANCH_STORY",payload:{newStory:newStory,newBranchStory:newBranchStory}}},actionCheckPointDeleteConnectBranchStory=function actionCheckPointDeleteConnectBranchStory(checkPointName,branchName){return{type:"CHECK_POINT_DELETE_CONNECT_BRANCH_STORY",payload:{checkPointName:checkPointName,branchName:branchName}}},actionCreateStoryBranchStoryEditBotRes=function actionCreateStoryBranchStoryEditBotRes(oriBotRes,botRes,actionName,storyName,checkPointName){return{type:"CREATE_STORY_BRANCH_STORY_EDIT_BOT_RES",payload:{oriBotRes:oriBotRes,botRes:botRes,actionName:actionName,storyName:storyName,checkPointName:checkPointName}}},actionCreateStoryConnectStoryEditBotRes=function actionCreateStoryConnectStoryEditBotRes(oriBotRes,botRes,actionName,storyName,checkPointName,connectStoryName){return{type:"CREATE_STORY_CONNECT_STORY_EDIT_BOT_RES",payload:{oriBotRes:oriBotRes,botRes:botRes,actionName:actionName,storyName:storyName,checkPointName:checkPointName,connectStoryName:connectStoryName}}}},"./src/components/BotStep/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return BotStep_BotStep}});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),BotStep_module_botStepContainer="BotStep_botStepContainer__T9rTy",BotStep_module_botTitle="BotStep_botTitle__5YlFU",BotStep_module_botResponse="BotStep_botResponse__F4UuL",swalInput=__webpack_require__("./src/utils/swalInput.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ButtonItems=function ButtonItems(props){var title=props.title,payload=props.payload,reply=props.reply,disabled=props.disabled,buttonAction=props.buttonAction,onEditResButtons=props.onEditResButtons,onRemoveResButton=props.onRemoveResButton,buttonTextareaRef=react.useRef();return react.useEffect((function(){buttonTextareaRef.current.style="height:0px",buttonTextareaRef.current.value=reply,buttonTextareaRef.current.style="height: ".concat(buttonTextareaRef.current.scrollHeight,"px")}),[reply]),(0,jsx_runtime.jsx)("div",{className:"card col-10 m-3",children:(0,jsx_runtime.jsxs)("div",{className:"card-body",children:[(0,jsx_runtime.jsxs)("h5",{className:"card-title d-flex justify-content-between",children:[(0,jsx_runtime.jsx)("span",{className:"badge rounded-pill bg-info d-flex align-items-center",children:title}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{className:"btn btn-primary mx-1",onClick:function onClick(){return onEditResButtons(title,reply,buttonAction)},children:"編輯"}),(0,jsx_runtime.jsx)("button",{className:"btn btn-danger",onClick:function onClick(){return onRemoveResButton(title,payload,buttonAction,disabled)},children:"刪除"})]})]}),(0,jsx_runtime.jsx)("textarea",{className:classnames_default()("card-text col-12",BotStep_module_botResponse),ref:buttonTextareaRef,rows:1,readOnly:!0})]})})};ButtonItems.__docgenInfo={description:"",methods:[],displayName:"ButtonItems"};var BotStep_ButtonItems=react.memo(ButtonItems);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\BotStep\\ButtonItems.jsx"]={name:"ButtonItems",docgenInfo:ButtonItems.__docgenInfo,path:"src\\components\\BotStep\\ButtonItems.jsx"});var BotStep=function BotStep(props){var _step$buttons,isCreate=props.isCreate,step=props.step,storyName=props.storyName,stories=props.stories,checkPointName=props.checkPointName,connectBranchStoryName=props.connectBranchStoryName,onEditBotRes=props.onEditBotRes,onRemoveBotStep=props.onRemoveBotStep,onAddResButtons=props.onAddResButtons,onEditResButtons=props.onEditResButtons,onRemoveResButton=props.onRemoveResButton,textAreaRef=react.useRef();react.useEffect((function(){textAreaRef.current.style="height:0px",textAreaRef.current.value=step.response,textAreaRef.current.style="height: ".concat(textAreaRef.current.scrollHeight,"px")}),[step.response]);var atEditBotResponse=react.useCallback((function(response,action,currentStoryName,currentCheckPointName,currentConnectBranchStoryName){return(0,swalInput.Rh)("編輯機器人回覆","textarea","請輸入機器人回覆",response,!0).then((function(data){data&&data.new&&response!==data.new&&onEditBotRes(data.ori,data.new,action,currentStoryName,currentCheckPointName,currentConnectBranchStoryName)}))}),[onEditBotRes]),atAddResButtons=react.useCallback((function(action,currentStoryName){return(0,swalInput.eq)("新增機器人回覆選項","","",!0).then((function(data){if(data&&data.title){var payload="/".concat(data.title);onAddResButtons(action,data.title,payload,data.reply,currentStoryName,stories)}}))}),[onAddResButtons,stories]),atEditResButtons=react.useCallback((function(title,reply,buttonActionName){return(0,swalInput.eq)("編輯『".concat(title,"』選項"),title,reply,!0).then((function(data){if(data&&data.title&&data.reply){var payload="/".concat(data.title);onEditResButtons(step.action,data.title,data.oriPayload,payload,data.reply,storyName,buttonActionName,stories)}}))}),[onEditResButtons,step.action,storyName,stories]),atRemoveResButton=react.useCallback((function(title,payload,buttonActionName,disabled){return(0,swalInput.Ox)(title,"delete").then((function(result){result.isConfirmed&&onRemoveResButton(step.action,payload,storyName,buttonActionName,disabled)}))}),[onRemoveResButton,step.action,storyName]);return(0,jsx_runtime.jsx)("div",{className:"row justify-content-end pt-2",id:"botStep",children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("col-6",BotStep_module_botStepContainer),children:[(0,jsx_runtime.jsxs)("div",{className:"py-2",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-info mx-2",onClick:function onClick(){return atEditBotResponse(step.response,step.action,storyName,checkPointName,connectBranchStoryName)},children:"編輯"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-primary mx-2",onClick:function onClick(){return atAddResButtons(step.action,storyName)},children:"增加選項"}),isCreate&&(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-danger mx-2",onClick:function onClick(){return onRemoveBotStep(step.action)},children:"刪除"})]}),(0,jsx_runtime.jsxs)("div",{className:"d-flex align-items-center pt-2",children:[(0,jsx_runtime.jsx)("div",{className:BotStep_module_botTitle,children:"機器人:"}),(0,jsx_runtime.jsx)("textarea",{className:BotStep_module_botResponse,ref:textAreaRef,rows:1,readOnly:!0})]}),(null===(_step$buttons=step.buttons)||void 0===_step$buttons?void 0:_step$buttons.length)>0&&step.buttons.map((function(button){var title=button.title,payload=button.payload,reply=button.reply,disabled=button.disabled,buttonAction=button.buttonAction;return(0,jsx_runtime.jsx)(BotStep_ButtonItems,{title:title,payload:payload,reply:reply,disabled:disabled,buttonAction:buttonAction,onEditResButtons:atEditResButtons,onRemoveResButton:atRemoveResButton},payload)}))]})})};BotStep.__docgenInfo={description:"",methods:[],displayName:"BotStep"};var BotStep_BotStep=react.memo(BotStep);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\BotStep\\BotStep.jsx"]={name:"BotStep",docgenInfo:BotStep.__docgenInfo,path:"src\\components\\BotStep\\BotStep.jsx"})},"./src/components/CheckPoint/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return CheckPoint_CheckPoint}});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),uuid=__webpack_require__("./node_modules/react-uuid/uuid.js"),uuid_default=__webpack_require__.n(uuid),CheckPoint_module_root="CheckPoint_root__S4Mh+",CheckPoint_module_tabContent="CheckPoint_tabContent__Q5j7-",CheckPoint_module_checkPointNavTab="CheckPoint_checkPointNavTab__3x9yH",CheckPoint_module_closeIcon="CheckPoint_closeIcon__Wytsp",index_esm=__webpack_require__("./node_modules/react-icons/ri/index.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),NavTab=function NavTab(props){var story=props.story,isActive=props.isActive,onClickTab=props.onClickTab,idx=story.lastIndexOf("_"),storyName=story.slice(idx+1,story.length);return(0,jsx_runtime.jsxs)("button",{className:classnames_default()("nav-link",{active:isActive},CheckPoint_module_checkPointNavTab),id:"nav-home-tab","data-bs-toggle":"tab","data-bs-target":"#nav-home",type:"button",role:"tab","aria-controls":"nav-home","aria-selected":isActive,onClick:function onClick(e){return onClickTab(e,story)},children:[storyName,(0,jsx_runtime.jsx)(index_esm.qGf,{className:CheckPoint_module_closeIcon})]})};NavTab.__docgenInfo={description:"",methods:[],displayName:"NavTab"};var CheckPoint_NavTab=react.memo(NavTab);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\CheckPoint\\NavTab.jsx"]={name:"NavTab",docgenInfo:NavTab.__docgenInfo,path:"src\\components\\CheckPoint\\NavTab.jsx"});var BotStep=__webpack_require__("./src/components/BotStep/index.js"),ShowSlots_module_root="ShowSlots_root__jCmOQ",ShowSlots_module_slotKey="ShowSlots_slotKey__60Q77",ShowSlots_module_slotValue="ShowSlots_slotValue__6etur",ShowSlots=function ShowSlots(props){var slotInfo=props.slotInfo;return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("col-6",ShowSlots_module_root),children:[(0,jsx_runtime.jsxs)("div",{className:"d-flex",children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()("slotContainer",ShowSlots_module_slotKey),children:[(0,jsx_runtime.jsx)("span",{children:"記錄槽："}),(0,jsx_runtime.jsx)("span",{children:slotInfo.slotKey})]}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("slotContainer",ShowSlots_module_slotValue),children:[(0,jsx_runtime.jsx)("span",{children:"儲存槽："}),(0,jsx_runtime.jsx)("span",{children:slotInfo.slotValue})]})]}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("slotContainer"),children:[(0,jsx_runtime.jsx)("button",{className:"btn btn-primary mx-2",children:"編輯"}),(0,jsx_runtime.jsx)("button",{className:"btn btn-danger mx-2",children:"刪除"})]})]})};ShowSlots.__docgenInfo={description:"",methods:[],displayName:"ShowSlots"};var CheckPoint_ShowSlots=react.memo(ShowSlots);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\CheckPoint\\ShowSlots.jsx"]={name:"ShowSlots",docgenInfo:ShowSlots.__docgenInfo,path:"src\\components\\CheckPoint\\ShowSlots.jsx"});var useCreateStoryStore=__webpack_require__("./src/store/useCreateStoryStore.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),ConnectBranchStory=function ConnectBranchStory(props){var _selectedConnectBranc,branch=props.branch,domTarget=props.domTarget,onDeleteConnectBranchStory=props.onDeleteConnectBranchStory,_useCreateStoryStore=(0,useCreateStoryStore.Z)((function(state){return{selectedBranchStory:state.selectedBranchStory,selectedConnectBranchStory:state.selectedConnectBranchStory,onSetSelectedConnectBranchStory:state.onSetSelectedConnectBranchStory,onEditConnectStoryBotRes:state.onEditConnectStoryBotRes}}),shallow.Z),selectedBranchStory=_useCreateStoryStore.selectedBranchStory,selectedConnectBranchStory=_useCreateStoryStore.selectedConnectBranchStory,onSetSelectedConnectBranchStory=_useCreateStoryStore.onSetSelectedConnectBranchStory,onEditConnectStoryBotRes=_useCreateStoryStore.onEditConnectStoryBotRes,atClickTab=react.useCallback((function(e,storyName){if("nav-home-tab"!==e.target.id){var idx=storyName.lastIndexOf("_"),_checkPointName="".concat(storyName.slice(0,idx),"_主線");if(storyName===selectedConnectBranchStory.story)if(branch.length>1){var deleteStoryIdx=branch.map((function(item){return item.story})).indexOf(storyName),beforeDeleteStory=branch[deleteStoryIdx-1];onSetSelectedConnectBranchStory(beforeDeleteStory)}else onSetSelectedConnectBranchStory({story:"",steps:[]});return onDeleteConnectBranchStory(_checkPointName,storyName)}var currentSelectedBranchStory=branch.filter((function(item){return item.story===storyName}))[0];return onSetSelectedConnectBranchStory(currentSelectedBranchStory)}),[onSetSelectedConnectBranchStory,onDeleteConnectBranchStory,branch,selectedConnectBranchStory]),portalTarget=domTarget||document.querySelector("#nav-tabContent");return react_dom.createPortal((0,jsx_runtime.jsxs)("div",{className:CheckPoint_module_root,id:"checkPointStep",children:[(0,jsx_runtime.jsx)("nav",{children:(0,jsx_runtime.jsx)("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist",children:branch.map((function(item){var story=item.story,steps=item.steps;return(0,jsx_runtime.jsx)(CheckPoint_NavTab,{story:story,steps:steps,isActive:(null==selectedConnectBranchStory?void 0:selectedConnectBranchStory.story)===story,onClickTab:atClickTab},"".concat(uuid_default()(),"-").concat(item.story))}))})}),(0,jsx_runtime.jsx)("div",{className:classnames_default()("tab-content",CheckPoint_module_tabContent),id:"connect-branch-story-nav-tabContent",children:(0,jsx_runtime.jsx)("div",{className:"tab-pane fade show active",id:"nav-home",role:"tabpanel","aria-labelledby":"nav-home-tab",tabIndex:"-1",children:(null==selectedConnectBranchStory||null===(_selectedConnectBranc=selectedConnectBranchStory.steps)||void 0===_selectedConnectBranc?void 0:_selectedConnectBranc.length)>0&&selectedConnectBranchStory.steps.map((function(step){if(step.slot_was_set)return step.slot_was_set.map((function(slot){var slotKey=Object.keys(slot)[0],slotValue=Object.values(slot)[0];return(0,jsx_runtime.jsx)(CheckPoint_ShowSlots,{slotInfo:{slotKey:slotKey,slotValue:slotValue}},"".concat(slotKey,"-").concat(slotValue))}));if(step.action){var action=step.action,response=step.response,buttons=step.buttons;return(0,jsx_runtime.jsx)(BotStep.Z,{step:{action:action,response:response,buttons:buttons},checkPointName:selectedBranchStory.story,connectBranchStoryName:selectedConnectBranchStory.story,onEditBotRes:onEditConnectStoryBotRes},action)}}))})})]}),portalTarget)},CheckPoint_ConnectBranchStory=react.memo(ConnectBranchStory),CheckPoint=function CheckPoint(props){var _selectedBranchStory$,_selectedBranchStory$2,branch=props.branch,onDeleteBranchStory=props.onDeleteBranchStory,_useCreateStoryStore=(0,useCreateStoryStore.Z)((function(state){return{selectedBranchStory:state.selectedBranchStory,onSetBranchStep:state.onSetBranchStep,onSetCheckPointName:state.onSetCheckPointName,onDeleteConnectBranchStory:state.onDeleteConnectBranchStory,onSetSelectedBranchStory:state.onSetSelectedBranchStory,onSetSelectedConnectBranchStory:state.onSetSelectedConnectBranchStory,onEditBranchStoryBotRes:state.onEditBranchStoryBotRes}}),shallow.Z),selectedBranchStory=_useCreateStoryStore.selectedBranchStory,onSetSelectedBranchStory=_useCreateStoryStore.onSetSelectedBranchStory,onSetBranchStep=_useCreateStoryStore.onSetBranchStep,onSetCheckPointName=_useCreateStoryStore.onSetCheckPointName,onDeleteConnectBranchStory=_useCreateStoryStore.onDeleteConnectBranchStory,onSetSelectedConnectBranchStory=_useCreateStoryStore.onSetSelectedConnectBranchStory,onEditBranchStoryBotRes=_useCreateStoryStore.onEditBranchStoryBotRes,atClickTab=react.useCallback((function(e,storyName){if("nav-home-tab"!==e.target.id){var idx=storyName.lastIndexOf("_"),_checkPointName="".concat(storyName.slice(0,idx),"_主線");if(storyName===selectedBranchStory.story)if(branch.length>1){var deleteStoryIdx=branch.map((function(item){return item.story})).indexOf(storyName),beforeDeleteStory=branch[deleteStoryIdx-1];onSetSelectedBranchStory(beforeDeleteStory)}else onSetSelectedBranchStory({story:"",steps:[]});return onDeleteBranchStory(_checkPointName,storyName)}onSetSelectedConnectBranchStory({story:"",steps:[]});var currentSelectedStory=branch.filter((function(item){return item.story===storyName}))[0];return onSetSelectedBranchStory(currentSelectedStory)}),[onSetSelectedBranchStory,onDeleteBranchStory,branch,selectedBranchStory,onSetSelectedConnectBranchStory]),atClickCreateBranch=react.useCallback((function(checkPointName){onSetBranchStep(),onSetCheckPointName(checkPointName)}),[onSetBranchStep,onSetCheckPointName]);return(0,jsx_runtime.jsxs)("div",{className:CheckPoint_module_root,id:"checkPointStep",children:[(0,jsx_runtime.jsx)("nav",{children:(0,jsx_runtime.jsx)("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist",children:branch.map((function(item){var story=item.story,steps=item.steps;return(0,jsx_runtime.jsx)(CheckPoint_NavTab,{story:story,steps:steps,isActive:(null==selectedBranchStory?void 0:selectedBranchStory.story)===story,onClickTab:atClickTab},"".concat(uuid_default()(),"-").concat(item.story))}))})}),(0,jsx_runtime.jsx)("div",{className:classnames_default()("tab-content",CheckPoint_module_tabContent),id:"nav-tabContent",children:(0,jsx_runtime.jsxs)("div",{className:"tab-pane fade show active",id:"nav-home",role:"tabpanel","aria-labelledby":"nav-home-tab",tabIndex:"-1",children:[(null==selectedBranchStory||null===(_selectedBranchStory$=selectedBranchStory.steps)||void 0===_selectedBranchStory$?void 0:_selectedBranchStory$.length)>0&&selectedBranchStory.steps.map((function(step,idx){var slot_was_set=step.slot_was_set,checkpoint=step.checkpoint,branchStories=step.branchStories,action=step.action,response=step.response,buttons=step.buttons;return step.slot_was_set?slot_was_set.map((function(slot){var slotKey=Object.keys(slot)[0],slotValue=Object.values(slot)[0];return(0,jsx_runtime.jsx)(CheckPoint_ShowSlots,{slotInfo:{slotKey:slotKey,slotValue:slotValue}},"".concat(slotKey,"-").concat(slotValue))})):step.action?(0,jsx_runtime.jsx)(BotStep.Z,{step:{action:action,response:response,buttons:buttons},checkPointName:selectedBranchStory.story,onEditBotRes:onEditBranchStoryBotRes},action):0!==idx&&step.checkpoint&&branchStories.length?(0,jsx_runtime.jsx)(CheckPoint_ConnectBranchStory,{branch:branchStories,onDeleteConnectBranchStory:onDeleteConnectBranchStory},"".concat(uuid_default()(),"-").concat(checkpoint)):void 0})),(null==selectedBranchStory||null===(_selectedBranchStory$2=selectedBranchStory.steps)||void 0===_selectedBranchStory$2?void 0:_selectedBranchStory$2.length)>0&&selectedBranchStory.steps.every((function(step){return!step.action||step.checkpoint}))&&(0,jsx_runtime.jsx)("div",{className:"d-flex justify-content-end mt-3",children:(0,jsx_runtime.jsx)("div",{className:"col-6",children:(0,jsx_runtime.jsx)("button",{className:"btn btn-warning","data-bs-toggle":"modal","data-bs-target":"#createBranchStoryModal",onClick:function onClick(){return atClickCreateBranch(selectedBranchStory.story)},children:"串接支線故事"})})})]})})]})};CheckPoint.__docgenInfo={description:"",methods:[],displayName:"CheckPoint"};var CheckPoint_CheckPoint=react.memo(CheckPoint);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\CheckPoint\\CheckPoint.jsx"]={name:"CheckPoint",docgenInfo:CheckPoint.__docgenInfo,path:"src\\components\\CheckPoint\\CheckPoint.jsx"})},"./src/components/CreateStory/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return CreateStory_CreateStory}});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),CheckPoint=__webpack_require__("./src/components/CheckPoint/index.js"),CreateStory_module_root="CreateStory_root__m1nYF",CreateStory_module_title="CreateStory_title__wN9Sg",CreateStory_module_stepsPanel="CreateStory_stepsPanel__3QGSp",classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),swalInput=__webpack_require__("./src/utils/swalInput.js"),StepControl_module_stepTextarea="StepControl_stepTextarea__11XD2",randomBotResAction=__webpack_require__("./src/utils/randomBotResAction.js"),useCreateStoryStore=__webpack_require__("./src/store/useCreateStoryStore.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),StepControl=function StepControl(props){var isUser=props.isUser,hasBranch=props.hasBranch,nlu=props.nlu,steps=props.steps,actions=props.actions,onSetIsInputFocus=props.onSetIsInputFocus,_React$useState=react.useState(""),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),conversation=_React$useState2[0],setConversation=_React$useState2[1],_useCreateStoryStore=(0,useCreateStoryStore.Z)((function(state){return{onCreateUserStep:state.onCreateUserStep,onCreateBotStep:state.onCreateBotStep,onSetMainStep:state.onSetMainStep}}),shallow.Z),onCreateUserStep=_useCreateStoryStore.onCreateUserStep,onCreateBotStep=_useCreateStoryStore.onCreateBotStep,onSetMainStep=_useCreateStoryStore.onSetMainStep,atChange=react.useCallback((function(e){setConversation(e.target.value)}),[setConversation]),atUserStep=react.useCallback((function(userSay){if(userSay){var repeat=[];if(nlu.map((function(nluItem){return nluItem.text===userSay?repeat.push(userSay):nluItem})),steps.map((function(step){return step.user===userSay?repeat.push(userSay):step})),repeat.length)return swalInput.FN.fire({icon:"warning",title:"使用者對話『".concat(userSay,"』重複")}),void setConversation("");onCreateUserStep(userSay),setConversation("")}}),[nlu,steps,onCreateUserStep]),atBotStep=react.useCallback((function(botRes){if(botRes){var actionName=(0,randomBotResAction.r)(actions);onCreateBotStep(actionName,botRes),setConversation("")}}),[onCreateBotStep,actions]);return(0,jsx_runtime.jsxs)("div",{className:"d-flex px-3 justify-content-start",children:[(0,jsx_runtime.jsx)("textarea",{className:classnames_default()("col-9",StepControl_module_stepTextarea),type:"text",name:"conversation",placeholder:"輸入完對話後，請點擊左側步驟按鈕",onChange:atChange,value:conversation,rows:1,onFocus:function onFocus(){return onSetIsInputFocus((function(prev){return void 0===prev||!prev}))},onBlur:function onBlur(){return onSetIsInputFocus(void 0)}}),(0,jsx_runtime.jsxs)("div",{className:"col-2 mx-3 d-flex flex-column align-items-center",children:[(0,jsx_runtime.jsxs)("div",{className:"col-11 d-flex justify-content-around mb-1",children:[(0,jsx_runtime.jsx)("button",{className:"btn btn-success",onClick:function onClick(){return atUserStep(conversation)},disabled:isUser,children:"使用者"}),(0,jsx_runtime.jsx)("button",{className:"btn btn-primary",onClick:function onClick(){return atBotStep(conversation)},disabled:!isUser||hasBranch,children:"機器人"})]}),(0,jsx_runtime.jsx)("button",{className:"btn btn-warning mx-1 col-10","data-bs-toggle":"modal","data-bs-target":"#createBranchStoryModal",disabled:!isUser,onClick:function onClick(){return onSetMainStep()},children:"新增支線故事"})]})]})};StepControl.__docgenInfo={description:"",methods:[],displayName:"StepControl"};var CreateStory_StepControl=react.memo(StepControl);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\CreateStory\\StepControl.jsx"]={name:"StepControl",docgenInfo:StepControl.__docgenInfo,path:"src\\components\\CreateStory\\StepControl.jsx"});var UserStep=__webpack_require__("./src/components/UserStep/index.js"),BotStep=__webpack_require__("./src/components/BotStep/index.js"),useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),index_esm=__webpack_require__("./node_modules/react-icons/hi/index.esm.js"),StepAlert_module_title="StepAlert_title__1ZsS+",StepAlert_module_inputFocus="StepAlert_inputFocus__J7tNr",StepAlert=function StepAlert(props){var stepRole=props.stepRole;return(0,jsx_runtime.jsx)("div",{className:classnames_default()("row","user"!==stepRole&&"justify-content-end"),children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("col-6",StepAlert_module_title),children:["user"===stepRole?"使用者輸入中":"機器人輸入中",(0,jsx_runtime.jsx)(index_esm.JEI,{className:classnames_default()(StepAlert_module_inputFocus)})]})})};StepAlert.__docgenInfo={description:"",methods:[],displayName:"StepAlert"};var CreateStory_StepAlert=react.memo(StepAlert);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\CreateStory\\StepAlert.jsx"]={name:"StepAlert",docgenInfo:StepAlert.__docgenInfo,path:"src\\components\\CreateStory\\StepAlert.jsx"});var CreateStory=function CreateStory(props){var _newStory$steps3,CurStepAlert,isCreate=props.isCreate,nlu=props.nlu,actions=props.actions,onClickSaveBtn=props.onClickSaveBtn,stories=(0,useStoryStore.Z)((function(state){return{stories:state.stories}}),shallow.Z).stories,_useCreateStoryStore=(0,useCreateStoryStore.Z)((function(state){return{newStory:state.newStory,onEditUserSay:state.onEditUserSay,onEditIntent:state.onEditIntent,onCreateExample:state.onCreateExample,onDeleteExample:state.onDeleteExample,onCreateEntities:state.onCreateEntities,onDeleteEntities:state.onDeleteEntities,onEditEntityShowValue:state.onEditEntityShowValue,onEditEntity:state.onEditEntity,onEditEntityValue:state.onEditEntityValue,onEditBotRes:state.onEditBotRes,onRemoveUserStep:state.onRemoveUserStep,onRemoveBotStep:state.onRemoveBotStep,onAddResButtons:state.onAddResButtons,onEditResButtons:state.onEditResButtons,onRemoveResButton:state.onRemoveResButton,onCreateBranchStory:state.onCreateBranchStory,onDeleteBranchStory:state.onDeleteBranchStory}}),shallow.Z),newStory=_useCreateStoryStore.newStory,onEditUserSay=_useCreateStoryStore.onEditUserSay,onEditIntent=_useCreateStoryStore.onEditIntent,onCreateExample=_useCreateStoryStore.onCreateExample,onDeleteExample=_useCreateStoryStore.onDeleteExample,onCreateEntities=_useCreateStoryStore.onCreateEntities,onDeleteEntities=_useCreateStoryStore.onDeleteEntities,onEditEntityShowValue=_useCreateStoryStore.onEditEntityShowValue,onEditEntity=_useCreateStoryStore.onEditEntity,onEditEntityValue=_useCreateStoryStore.onEditEntityValue,onEditBotRes=_useCreateStoryStore.onEditBotRes,onRemoveUserStep=_useCreateStoryStore.onRemoveUserStep,onRemoveBotStep=_useCreateStoryStore.onRemoveBotStep,onAddResButtons=_useCreateStoryStore.onAddResButtons,onEditResButtons=_useCreateStoryStore.onEditResButtons,onRemoveResButton=_useCreateStoryStore.onRemoveResButton,onCreateBranchStory=_useCreateStoryStore.onCreateBranchStory,onDeleteBranchStory=_useCreateStoryStore.onDeleteBranchStory,_React$useState=react.useState(!1),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),isUser=_React$useState2[0],setIsUser=_React$useState2[1],_React$useState3=react.useState(!1),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),hasBranch=_React$useState4[0],setHasBranch=_React$useState4[1],_React$useState5=react.useState(void 0),_React$useState6=(0,slicedToArray.Z)(_React$useState5,2),isInputFocus=_React$useState6[0],setIsInputFocus=_React$useState6[1];return react.useEffect((function(){var _newStory$steps,_newStory$steps2;setIsUser(!(null===(_newStory$steps=newStory.steps)||void 0===_newStory$steps||!_newStory$steps.length)&&(!!newStory.steps[newStory.steps.length-1].intent||!!newStory.steps[newStory.steps.length-1].checkpoint)),setHasBranch(!(null===(_newStory$steps2=newStory.steps)||void 0===_newStory$steps2||!_newStory$steps2.length)&&!!newStory.steps[newStory.steps.length-1].checkpoint)}),[setIsUser,newStory]),isUser?isInputFocus&&(CurStepAlert=(0,jsx_runtime.jsx)(CreateStory_StepAlert,{stepRole:"bot"})):isInputFocus&&(CurStepAlert=(0,jsx_runtime.jsx)(CreateStory_StepAlert,{stepRole:"user"})),(0,jsx_runtime.jsxs)("div",{className:CreateStory_module_root,children:[(0,jsx_runtime.jsxs)("div",{className:"col d-flex align-items-center",children:[(0,jsx_runtime.jsx)("div",{className:CreateStory_module_title,children:newStory.story}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-secondary mx-4",onClick:function onClick(){return onClickSaveBtn(newStory)},children:"儲存"})]}),(0,jsx_runtime.jsxs)("div",{className:CreateStory_module_stepsPanel,id:"stepsPanel",children:[(null==newStory||null===(_newStory$steps3=newStory.steps)||void 0===_newStory$steps3?void 0:_newStory$steps3.length)>0&&newStory.steps.map((function(step){var intent=step.intent,user=step.user,entities=step.entities,examples=step.examples,action=step.action,response=step.response,buttons=step.buttons,checkpoint=step.checkpoint,branchStories=step.branchStories;return step.intent?(0,jsx_runtime.jsx)(UserStep.Z,{isCreate:isCreate,step:{intent:intent,user:user,entities:entities,examples:examples},storyName:newStory.story,newStory:newStory,onEditUserSay:onEditUserSay,onEditIntent:onEditIntent,onCreateExample:onCreateExample,onDeleteExample:onDeleteExample,onCreateEntities:onCreateEntities,onDeleteEntities:onDeleteEntities,onEditEntityShowValue:onEditEntityShowValue,onEditEntity:onEditEntity,onEditEntityValue:onEditEntityValue,onRemoveUserStep:onRemoveUserStep,onCreateBranchStory:onCreateBranchStory},step.intent):step.action?(0,jsx_runtime.jsx)(BotStep.Z,{isCreate:isCreate,step:{action:action,response:response,buttons:buttons},storyName:newStory.story,stories:stories,onEditBotRes:onEditBotRes,onRemoveBotStep:onRemoveBotStep,onAddResButtons:onAddResButtons,onEditResButtons:onEditResButtons,onRemoveResButton:onRemoveResButton},step.action):(0,jsx_runtime.jsx)(CheckPoint.Z,{branch:branchStories,onDeleteBranchStory:onDeleteBranchStory},checkpoint)})),CurStepAlert]}),(0,jsx_runtime.jsx)(CreateStory_StepControl,{isUser:isUser,hasBranch:hasBranch,nlu:nlu,steps:newStory.steps,actions:actions,onSetIsInputFocus:setIsInputFocus})]})};CreateStory.__docgenInfo={description:"",methods:[],displayName:"CreateStory"};var CreateStory_CreateStory=react.memo(CreateStory);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\CreateStory\\CreateStory.jsx"]={name:"CreateStory",docgenInfo:CreateStory.__docgenInfo,path:"src\\components\\CreateStory\\CreateStory.jsx"})},"./src/components/Entities/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Entities_Entities}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),Entities_module={root:"Entities_root__3RPqp",label:"Entities_label__P-BuI"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Entities=function Entities(props){var entity=props.entity,entityValue=props.entityValue,intent=props.intent,userSay=props.userSay,entities=props.entities,entityShowValue=props.entityShowValue,onEditEntityShowValue=props.onEditEntityShowValue,onEditEntity=props.onEditEntity,onEditEntityValue=props.onEditEntityValue,onDeleteEntities=props.onDeleteEntities,_React$useState=react.useState(!1),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),showValue=_React$useState2[0],setShowValue=_React$useState2[1],_React$useState3=react.useState(!1),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),showEntity=_React$useState4[0],setShowEntity=_React$useState4[1],_React$useState5=react.useState(!1),_React$useState6=(0,slicedToArray.Z)(_React$useState5,2),showCurValue=_React$useState6[0],setShowCurValue=_React$useState6[1],_React$useState7=react.useState({entity:entity,entityValue:entityValue,entityShowValue:entityShowValue}),_React$useState8=(0,slicedToArray.Z)(_React$useState7,2),entityItem=_React$useState8[0],setEntityItem=_React$useState8[1],refValueInput=react.useRef(),refEntityInput=react.useRef(),refCurValueInput=react.useRef();react.useEffect((function(){showValue&&refValueInput.current.focus(),showEntity&&refEntityInput.current.focus(),showCurValue&&refCurValueInput.current.focus()}),[showValue,showEntity,showCurValue]);var atShowClick=react.useCallback((function(e){"entityShowValue"===e.target.id?setShowValue((function(prev){return!prev})):"entity"===e.target.id?setShowEntity((function(prev){return!prev})):setShowCurValue((function(prev){return!prev}))}),[setShowValue,setShowEntity]),atEntityShowValueKeyDown=react.useCallback((function(e,stepIntent,currentEntityValue,oriEntityShowValue,newEntityShowValue){if("Enter"===e.key||"blur"===e.type){if(oriEntityShowValue!==newEntityShowValue){var isValid=userSay.includes(newEntityShowValue),isRepeat=entities.some((function(item){return item.value!==currentEntityValue&&(item.start<=userSay.indexOf(newEntityShowValue)&&userSay.indexOf(newEntityShowValue)<item.end||item.start<userSay.indexOf(newEntityShowValue)+newEntityShowValue.length&&userSay.indexOf(newEntityShowValue)+newEntityShowValue.length<=item.end)}));isValid&&!isRepeat&&""!==newEntityShowValue||setEntityItem((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{entityShowValue:oriEntityShowValue})})),""!==newEntityShowValue&&onEditEntityShowValue(stepIntent,currentEntityValue,newEntityShowValue)}setShowValue((function(prev){return!prev}))}}),[setShowValue,onEditEntityShowValue,userSay,entities]),atEntityKeyDown=react.useCallback((function(e,stepIntent,oriEntity,newEntity){if("Enter"===e.key||"blur"===e.type){if(oriEntity!==newEntity){(entities.some((function(item){return item.entity===newEntity}))||/^[0-9]*$/g.test(newEntity)||""===newEntity)&&setEntityItem((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{entity:oriEntity})})),""!==newEntity&&onEditEntity(stepIntent,oriEntity,newEntity)}setShowEntity((function(prev){return!prev}))}}),[setShowEntity,onEditEntity,entities]),atEntityValueKeyDown=react.useCallback((function(e,stepIntent,oriEntityValue,newEntityValue){if("Enter"===e.key||"blur"===e.type){if(oriEntityValue!==newEntityValue)(entities.some((function(item){return item.value===newEntityValue}))||""===newEntityValue)&&setEntityItem((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{entityValue:oriEntityValue})})),""!==newEntityValue&&onEditEntityValue(stepIntent,oriEntityValue,newEntityValue);setShowCurValue((function(prev){return!prev}))}}),[setShowCurValue,onEditEntityValue,entities]),atChange=react.useCallback((function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setEntityItem((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},(0,defineProperty.Z)({},name,value))}))}),[setEntityItem]);return(0,jsx_runtime.jsxs)("div",{className:Entities_module.root,children:[(0,jsx_runtime.jsxs)("div",{className:Entities_module.info,children:[(0,jsx_runtime.jsxs)("div",{className:"py-2",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"entityShowValue",className:Entities_module.label,children:"關鍵字："}),showValue?(0,jsx_runtime.jsx)("input",{type:"text",id:"entityShowValue",name:"entityShowValue",defaultValue:entityItem.entityShowValue,ref:refValueInput,onChange:atChange,onKeyDown:function onKeyDown(e){return atEntityShowValueKeyDown(e,intent,entityValue,entityShowValue,entityItem.entityShowValue)},onBlur:function onBlur(e){return atEntityShowValueKeyDown(e,intent,entityValue,entityShowValue,entityItem.entityShowValue)}}):(0,jsx_runtime.jsx)("button",{className:"btn btn-outline-light",id:"entityShowValue",onClick:atShowClick,children:entityItem.entityShowValue})]}),(0,jsx_runtime.jsxs)("div",{className:"py-2",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"entityValue",className:Entities_module.label,children:"儲存槽代表值："}),showCurValue?(0,jsx_runtime.jsx)("input",{type:"text",id:"entityValue",name:"entityValue",defaultValue:entityItem.entityValue,ref:refCurValueInput,onChange:function onChange(e){return atChange(e)},onKeyDown:function onKeyDown(e){return atEntityValueKeyDown(e,intent,entityValue,entityItem.entityValue)},onBlur:function onBlur(e){return atEntityValueKeyDown(e,intent,entityValue,entityItem.entityValue)}}):(0,jsx_runtime.jsx)("button",{className:"btn btn-outline-warning",id:"entityValue",onClick:atShowClick,children:entityItem.entityValue})]}),(0,jsx_runtime.jsxs)("div",{className:"py-2",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"entity",className:Entities_module.label,children:"記錄槽名稱："}),showEntity?(0,jsx_runtime.jsx)("input",{type:"text",id:"entity",name:"entity",defaultValue:entityItem.entity,ref:refEntityInput,onChange:function onChange(e){return atChange(e)},onKeyDown:function onKeyDown(e){return atEntityKeyDown(e,intent,entity,entityItem.entity)},onBlur:function onBlur(e){return atEntityKeyDown(e,intent,entity,entityItem.entity)}}):(0,jsx_runtime.jsx)("button",{className:"btn btn-outline-primary",id:"entity",onClick:atShowClick,children:entityItem.entity})]})]}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-outline-danger align-self-center",onClick:function onClick(){return onDeleteEntities(entity,entityValue,intent)},children:"刪除關鍵字"})]})};Entities.__docgenInfo={description:"",methods:[],displayName:"Entities"};var Entities_Entities=react.memo(Entities);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Entities\\Entities.jsx"]={name:"Entities",docgenInfo:Entities.__docgenInfo,path:"src\\components\\Entities\\Entities.jsx"})},"./src/components/Home/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Home_Home}});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),Home_module_root="Home_root__n0Fci",Home_module_container="Home_container__mBn7c",Home_module_Button="Home_Button__BwtiU",Home_module_sButtonBlock="Home_sButtonBlock__zVszZ",Home_module_sButton="Home_sButton__R7nha",Home_module_videoBlock="Home_videoBlock__htBkr",Home_module_Carousel="Home_Carousel__68npA",Slider=__webpack_require__("./src/components/Slider/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),slideData=[{index:0,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/forest.jpg",headline:"故事流程教學"},{index:1,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/guitar.jpg",headline:"故事流程教學"},{index:2,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/typewriter.jpg",headline:"故事流程教學"},{index:3,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/guitar.jpg",headline:"故事流程教學"},{index:4,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/typewriter.jpg",headline:"故事流程教學"},{index:5,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/guitar.jpg",headline:"故事流程教學"},{index:6,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/typewriter.jpg",headline:"故事流程教學"},{index:7,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/guitar.jpg",headline:"故事流程教學"},{index:8,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/typewriter.jpg",headline:"故事流程教學"},{index:9,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/guitar.jpg",headline:"故事流程教學"},{index:10,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/typewriter.jpg",headline:"故事流程教學"},{index:11,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/typewriter.jpg",headline:"故事流程教學"},{index:12,src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/225363/typewriter.jpg",headline:"故事流程教學"}],Home=function Home(){return(0,jsx_runtime.jsxs)("div",{className:Home_module_root,children:[(0,jsx_runtime.jsxs)("div",{className:Home_module_container,children:[(0,jsx_runtime.jsx)("h1",{children:"開始訓練你的機器人吧！"}),(0,jsx_runtime.jsx)("div",{className:Home_module_Button,children:(0,jsx_runtime.jsx)(dist.rU,{className:"nav-link",to:"/stories",children:(0,jsx_runtime.jsx)("div",{children:"故事流程"})})})]}),(0,jsx_runtime.jsx)("div",{className:Home_module_sButtonBlock,onClick:function onClick(){return function openVideo(){document.querySelector("[data-videoblock]").setAttribute("data-videoblock","open")}()},children:(0,jsx_runtime.jsx)("div",{className:Home_module_sButton,children:"Chat bot 教學"})}),(0,jsx_runtime.jsx)("div",{"data-videoblock":"none",className:Home_module_videoBlock,children:(0,jsx_runtime.jsx)("div",{className:Home_module_Carousel,children:(0,jsx_runtime.jsx)(Slider.Z,{heading:"Example Slider",slides:slideData})})})]})};Home.__docgenInfo={description:"",methods:[],displayName:"Home"};var Home_Home=react.memo(Home);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Home\\Home.jsx"]={name:"Home",docgenInfo:Home.__docgenInfo,path:"src\\components\\Home\\Home.jsx"})},"./src/components/Login/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Login_Login}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),react_router_dom_dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),classnames=(__webpack_require__("./node_modules/sweetalert2/dist/sweetalert2.all.js"),__webpack_require__("./node_modules/classnames/index.js")),classnames_default=__webpack_require__.n(classnames),Login_module_login="Login_login__dma-6",Login_module_title="Login_title__5ytul",Login_module_signin="Login_signin__yI-lH",Login_module_inputBlock="Login_inputBlock__WaGKZ",Login_module_account="Login_account__xeWkb",Login_module_accountBtn="Login_accountBtn__s4he7",MyInput=__webpack_require__("./src/components/MyInput/index.js"),MyButton=__webpack_require__("./src/components/MyButton/index.js"),useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Login=function Login(){var _React$useState=react.useState({email:"",password:""}),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),accountInfo=_React$useState2[0],setAccountInfo=_React$useState2[1],_useStoryStore=(0,useStoryStore.Z)((function(state){return{user:state.user,onLogin:state.onLogin,loading:state.loading}}),shallow.Z),user=_useStoryStore.user,onLogin=_useStoryStore.onLogin,loading=_useStoryStore.loading,atInput=react.useCallback((function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setAccountInfo((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},(0,defineProperty.Z)({},name,value))}))}),[]),atLogin=react.useCallback((function(email,password){onLogin(email,password)}),[onLogin]);if(user){var _searchParams$get,searchParams=new URLSearchParams(window.location.search),redirectUrl=decodeURIComponent(null!==(_searchParams$get=searchParams.get("redirect_url"))&&void 0!==_searchParams$get?_searchParams$get:"/");return(0,jsx_runtime.jsx)(dist.Fg,{to:redirectUrl})}return(0,jsx_runtime.jsxs)("div",{className:Login_module_login,children:[loading&&(0,jsx_runtime.jsx)("div",{className:"my-spinner"}),(0,jsx_runtime.jsxs)("div",{className:Login_module_signin,children:[(0,jsx_runtime.jsx)("h1",{className:Login_module_title,children:"Chat Bot"}),(0,jsx_runtime.jsxs)("div",{className:Login_module_inputBlock,children:[(0,jsx_runtime.jsx)("label",{htmlFor:"login-Email",children:"帳號"}),(0,jsx_runtime.jsx)(MyInput.Z,{id:"login-Email",required:"",variant:"email",className:"form-control",onChange:atInput})]}),(0,jsx_runtime.jsxs)("div",{className:Login_module_inputBlock,children:[(0,jsx_runtime.jsx)("label",{htmlFor:"login-password",children:"密碼"}),(0,jsx_runtime.jsx)(MyInput.Z,{id:"login-password",required:"",variant:"password",className:"form-control",onChange:atInput})]}),(0,jsx_runtime.jsx)("div",{className:Login_module_inputBlock,children:(0,jsx_runtime.jsx)(MyButton.Z,{className:"btn",variant:"primary",onClick:function onClick(){return atLogin(accountInfo.email,accountInfo.password)},children:"登入"})}),(0,jsx_runtime.jsxs)("div",{className:Login_module_account,children:["還沒有帳號?",(0,jsx_runtime.jsx)(react_router_dom_dist.OL,{to:"/register",variant:"nostyle",className:classnames_default()("btn",Login_module_accountBtn),children:"註冊"})]})]})]})};Login.__docgenInfo={description:"",methods:[],displayName:"Login"};var Login_Login=react.memo(Login);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Login\\Login.jsx"]={name:"Login",docgenInfo:Login.__docgenInfo,path:"src\\components\\Login\\Login.jsx"})},"./src/components/MyButton/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return MyButton_MyButton}});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),MyButton_module_root="MyButton_root__CRct3",jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),MyButton=function MyButton(props){var icon=props.icon,onClick=props.onClick,disabled=props.disabled,children=props.children,rounded=props.rounded,className=props.className,color=props.color,variant=props.variant,attrStyle={color:color};return(0,jsx_runtime.jsxs)("button",{style:attrStyle,disabled:disabled,"data-variant":variant,className:classnames_default()(MyButton_module_root,className),type:"button","data-rounded":rounded,onClick:onClick,children:[icon,children]})};MyButton.__docgenInfo={description:"",methods:[],displayName:"MyButton"};var MyButton_MyButton=react.memo(MyButton);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MyButton\\MyButton.jsx"]={name:"MyButton",docgenInfo:MyButton.__docgenInfo,path:"src\\components\\MyButton\\MyButton.jsx"})},"./src/components/MyInput/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return MyInput_MyInput}});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),MyInput_module={},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),MyInput=function MyInput(props){var variant=props.variant,className=props.className,required=(props.placeholder,props.required),onChange=props.onChange,id=props.id;return"password"===variant?(0,jsx_runtime.jsx)("input",{type:"password",id:id,name:"password",placeholder:"請輸入密碼",className:classnames_default()(MyInput_module.root,className),"data-variant":variant,required:required,onChange:onChange}):"text"===variant?(0,jsx_runtime.jsx)("input",{type:"text",id:id,placeholder:id,className:classnames_default()(MyInput_module.root,className),"data-variant":variant,required:required,onChange:onChange}):"email"===variant?(0,jsx_runtime.jsx)("input",{type:"email",id:id,name:"email",placeholder:"請輸入E-mail",className:classnames_default()(MyInput_module.root,className),"data-variant":variant,required:required,onChange:onChange}):void classnames_default()(MyInput_module.root,className)};MyInput.__docgenInfo={description:"",methods:[],displayName:"MyInput"};var MyInput_MyInput=react.memo(MyInput);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\MyInput\\MyInput.jsx"]={name:"MyInput",docgenInfo:MyInput.__docgenInfo,path:"src\\components\\MyInput\\MyInput.jsx"})},"./src/components/NavBar/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return NavBar_NavBar}});var react=__webpack_require__("./node_modules/react/index.js"),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),index_esm=__webpack_require__("./node_modules/react-icons/cg/index.esm.js"),js_yaml=__webpack_require__("./node_modules/js-yaml/dist/js-yaml.mjs"),useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),NavItem=function NavItem(props){var id=props.id,name=props.name,link=props.link,onSetCurrentPage=(0,useStoryStore.Z)((function(state){return{onSetCurrentPage:state.onSetCurrentPage}}),shallow.Z).onSetCurrentPage;return(0,jsx_runtime.jsx)(dist.OL,{className:classnames_default()("nav-link",{active:1===id}),"aria-current":"page",to:link,onClick:function onClick(){return onSetCurrentPage(name)},children:name})};NavItem.__docgenInfo={description:"",methods:[],displayName:"NavItem"};var NavBar_NavItem=react.memo(NavItem);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\NavBar\\NavItem.jsx"]={name:"NavItem",docgenInfo:NavItem.__docgenInfo,path:"src\\components\\NavBar\\NavItem.jsx"});var NavBar_module_logo="NavBar_logo__IAEiy",NavBar_module_navbar="NavBar_navbar__PwLp-",NavBar_module_loadingIcon="NavBar_loadingIcon__PcR7x",Authenticate=__webpack_require__("./src/containers/Authenticate/index.jsx"),NavBar=function NavBar(props){var navItems=props.navItems,_useStoryStore=(0,useStoryStore.Z)((function(state){return{user:state.user,rasaTrainState:state.rasaTrainState,stories:state.stories,nlu:state.nlu,domain:state.domain,config:state.config,cloneData:state.cloneData,currentPage:state.currentPage,onLogout:state.onLogout,onSetCurrentPage:state.onSetCurrentPage,trainRasa:state.trainRasa}}),shallow.Z),user=_useStoryStore.user,rasaTrainState=_useStoryStore.rasaTrainState,stories=_useStoryStore.stories,nlu=_useStoryStore.nlu,config=_useStoryStore.config,domain=_useStoryStore.domain,cloneData=_useStoryStore.cloneData,currentPage=_useStoryStore.currentPage,onLogout=_useStoryStore.onLogout,onSetCurrentPage=_useStoryStore.onSetCurrentPage,trainRasa=_useStoryStore.trainRasa,trainData=react.useMemo((function(){var today=(new Date).toLocaleString("zh-Hant",{hour12:!1}),date=today.split(" ")[0].replace(/\//g,""),time=today.split(" ")[1].replace(/:/g,"");return{stories:js_yaml.ZP.dump({stories:stories}),domain:js_yaml.ZP.dump(domain),config:js_yaml.ZP.dump(config),nlu:{nlu:nlu},fixed_model_name:"model-".concat(date,"T").concat(time)}}),[stories,nlu,domain,config,cloneData]);return(0,jsx_runtime.jsx)("nav",{className:classnames_default()("navbar navbar-expand-lg navbar-dark",NavBar_module_navbar),children:(0,jsx_runtime.jsxs)("div",{className:"container-fluid",children:[(0,jsx_runtime.jsx)(dist.rU,{className:classnames_default()("navbar-brand",NavBar_module_logo),onClick:function onClick(){return onSetCurrentPage("首頁")},to:"/"}),(0,jsx_runtime.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,jsx_runtime.jsx)("span",{className:"navbar-toggler-icon"})}),(0,jsx_runtime.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarCollapse",children:[(0,jsx_runtime.jsx)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:(0,jsx_runtime.jsx)(Authenticate.Z,{children:navItems.map((function(navItem){return(0,jsx_runtime.jsx)(NavBar_NavItem,{id:navItem.id,name:navItem.name,link:navItem.link},navItem.id)}))})}),user?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["故事流程"===currentPage&&(rasaTrainState>0?(0,jsx_runtime.jsxs)("button",{className:"btn btn-outline-info mx-2",disabled:!0,children:[(0,jsx_runtime.jsx)(index_esm.frZ,{className:classnames_default()("mx-2",NavBar_module_loadingIcon)}),"機器人訓練中"]}):(0,jsx_runtime.jsx)("button",{className:"btn btn-outline-info mx-2",onClick:function onClick(){return trainRasa(trainData)},children:"執行訓練"})),(0,jsx_runtime.jsx)("button",{className:"btn btn-outline-light mx-1",onClick:function onClick(){return onLogout()},children:"登出"})]}):(0,jsx_runtime.jsx)(dist.rU,{className:"btn btn-outline-light",to:"/login",children:"登入"})]})]})})};NavBar.__docgenInfo={description:"",methods:[],displayName:"NavBar"};var NavBar_NavBar=react.memo(NavBar);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\NavBar\\NavBar.jsx"]={name:"NavBar",docgenInfo:NavBar.__docgenInfo,path:"src\\components\\NavBar\\NavBar.jsx"})},"./src/components/Register/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Register_Register}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),react_router_dom_dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),sweetalert2_all=__webpack_require__("./node_modules/sweetalert2/dist/sweetalert2.all.js"),sweetalert2_all_default=__webpack_require__.n(sweetalert2_all),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),MyButton=__webpack_require__("./src/components/MyButton/index.js"),Register_module_register="Register_register__rmpaN",Register_module_title="Register_title__TjYRN",Register_module_registerBlock="Register_registerBlock__fz+kd",Register_module_registerContainer="Register_registerContainer__Hwmwo",Register_module_inputBlock="Register_inputBlock__x-AdG",Register_module_textRed="Register_textRed__Nnh2b",Register_module_account="Register_account__JIfrg",useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),emailPattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,pwdPattern=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,Register=function Register(){var navigate=(0,dist.s0)(),_useForm=(0,index_esm.cI)(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,errors=_useForm.formState.errors,onRegister=(0,useStoryStore.Z)((function(state){return{onRegister:state.onRegister}}),shallow.Z).onRegister,atRegister=react.useCallback((function(userInfo){return sweetalert2_all_default().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function didOpen(toast){toast.addEventListener("mouseenter",sweetalert2_all_default().stopTimer),toast.addEventListener("mouseleave",sweetalert2_all_default().resumeTimer)}}).fire({icon:"info",title:"註冊中，請稍後...."}),onRegister(userInfo).then((function(res){"success"===res.status?sweetalert2_all_default().fire({position:"top-end",icon:"success",title:"註冊成功",text:"請使用註冊的帳號、密碼登入",showConfirmButton:!1,timer:1500}).then((function(){return navigate("/login")})):sweetalert2_all_default().fire({icon:"error",title:"註冊失敗",text:"".concat(res.message),showConfirmButton:!1,timer:1500})})).catch((function(err){return console.log(err)}))}),[onRegister,navigate]);return(0,jsx_runtime.jsx)("div",{className:Register_module_register,children:(0,jsx_runtime.jsx)("div",{className:Register_module_registerBlock,children:(0,jsx_runtime.jsxs)("div",{className:Register_module_registerContainer,children:[(0,jsx_runtime.jsx)("h1",{className:Register_module_title,children:"註冊"}),(0,jsx_runtime.jsxs)("form",{onSubmit:handleSubmit(atRegister),noValidate:!0,children:[(0,jsx_runtime.jsxs)("div",{className:"row",children:[(0,jsx_runtime.jsx)("div",{className:"col-6",children:(0,jsx_runtime.jsxs)("div",{className:Register_module_inputBlock,children:[(0,jsx_runtime.jsx)("label",{htmlFor:"cpnyId",children:"公司代號"}),(0,jsx_runtime.jsx)("input",(0,objectSpread2.Z)({id:"cpnyId",type:"text",className:"form-control",placeholder:"公司代號"},register("cpnyId",{required:!0}))),errors.cpnyId&&(0,jsx_runtime.jsx)("small",{className:Register_module_textRed,children:"*公司代號為必填欄位"})]})}),(0,jsx_runtime.jsx)("div",{className:"col-6",children:(0,jsx_runtime.jsxs)("div",{className:Register_module_inputBlock,children:[(0,jsx_runtime.jsx)("label",{htmlFor:"cpname",children:"公司名稱"}),(0,jsx_runtime.jsx)("input",(0,objectSpread2.Z)({id:"cpname",type:"text",className:"form-control",placeholder:"公司名稱"},register("cpnyName",{required:!0}))),errors.cpnyName&&(0,jsx_runtime.jsx)("small",{className:Register_module_textRed,children:"*公司名稱為必填欄位"})]})}),(0,jsx_runtime.jsx)("div",{className:"col-12",children:(0,jsx_runtime.jsxs)("div",{className:Register_module_inputBlock,children:[(0,jsx_runtime.jsx)("label",{htmlFor:"chatbotName",children:"公司名稱"}),(0,jsx_runtime.jsx)("input",(0,objectSpread2.Z)({type:"text",id:"chatbotName",className:"form-control",name:"chatbotName",placeholder:"機器人名稱"},register("chatbotName",{required:!0}))),errors.chatbotName&&(0,jsx_runtime.jsx)("small",{className:Register_module_textRed,children:"*機器人名稱為必填欄位"})]})}),(0,jsx_runtime.jsx)("div",{className:"col-12",children:(0,jsx_runtime.jsxs)("div",{className:Register_module_inputBlock,children:[(0,jsx_runtime.jsx)("label",{htmlFor:"loginEmail",children:"登入帳號"}),(0,jsx_runtime.jsx)("input",(0,objectSpread2.Z)({id:"loginEmail",type:"email",placeholder:"登入帳號 - Email",className:"form-control"},register("email",{required:!0,validate:function validate(value){return emailPattern.test(value)||"Email格式錯誤"}}))),errors.email&&(0,jsx_runtime.jsx)("small",{className:Register_module_textRed,children:errors.email.message})]})}),(0,jsx_runtime.jsx)("div",{className:"col-6",children:(0,jsx_runtime.jsxs)("div",{className:Register_module_inputBlock,children:[(0,jsx_runtime.jsx)("label",{htmlFor:"loginPassword",children:"密碼"}),(0,jsx_runtime.jsx)("input",(0,objectSpread2.Z)({id:"loginPassword",type:"password",placeholder:"密碼",className:"form-control"},register("password",{required:!0,validate:function validate(value){return pwdPattern.test(value)}}))),errors.password&&(0,jsx_runtime.jsx)("small",{className:Register_module_textRed,children:"密碼最少八個字符，並且混合大小寫英文字母"})]})}),(0,jsx_runtime.jsx)("div",{className:"col-6",children:(0,jsx_runtime.jsxs)("div",{className:Register_module_inputBlock,children:[(0,jsx_runtime.jsx)("label",{htmlFor:"loginAginpass",children:"密碼"}),(0,jsx_runtime.jsx)("input",(0,objectSpread2.Z)({id:"loginAginpass",type:"password",placeholder:"再次輸入密碼",className:"form-control"},register("passwordCheck",{required:!0,validate:function validate(value){return value===watch("password")}}))),errors.passwordCheck&&(0,jsx_runtime.jsx)("small",{className:Register_module_textRed,children:"*密碼和確認密碼不相符"})]})})]}),(0,jsx_runtime.jsx)("div",{className:Register_module_inputBlock,children:(0,jsx_runtime.jsx)(MyButton.Z,{className:"btn",onClick:handleSubmit(atRegister),variant:"primary",children:"註冊"})})]}),(0,jsx_runtime.jsxs)("div",{className:Register_module_account,children:["已有帳號?",(0,jsx_runtime.jsx)(react_router_dom_dist.OL,{to:"/login",className:"btn",variant:"primary",children:"登入"})]})]})})})};Register.__docgenInfo={description:"",methods:[],displayName:"Register"};var Register_Register=react.memo(Register);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Register\\Register.jsx"]={name:"Register",docgenInfo:Register.__docgenInfo,path:"src\\components\\Register\\Register.jsx"})},"./src/components/ShowStory/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return ShowStory_ShowStory}});var react=__webpack_require__("./node_modules/react/index.js"),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),UserStep=__webpack_require__("./src/components/UserStep/index.js"),BotStep=__webpack_require__("./src/components/BotStep/index.js"),ShowStory_module_root="ShowStory_root__GNBjV",ShowStory_module_title="ShowStory_title__aiPyu",ShowStory_module_stepsPanel="ShowStory_stepsPanel__i7bmE",useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),CheckPoint=__webpack_require__("./src/components/CheckPoint/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ShowStory=function ShowStory(props){var story=props.story,onDeleteStory=props.onDeleteStory,_useStoryStore=(0,useStoryStore.Z)((function(state){return{onEditBotRes:state.onEditBotRes,onEditUserSay:state.onEditUserSay,onCreateExample:state.onCreateExample,onEditResButtons:state.onEditResButtons,onRemoveResButton:state.onRemoveResButton,onAddResButtons:state.onAddResButtons,onEditIntent:state.onEditIntent,onCreateEntities:state.onCreateEntities,onDeleteEntities:state.onDeleteEntities,onEditEntityShowValue:state.onEditEntityShowValue,onEditEntity:state.onEditEntity,onEditEntityValue:state.onEditEntityValue,onDeleteExample:state.onDeleteExample}}),shallow.Z),onEditBotRes=_useStoryStore.onEditBotRes,onEditUserSay=_useStoryStore.onEditUserSay,onCreateExample=_useStoryStore.onCreateExample,onEditResButtons=_useStoryStore.onEditResButtons,onRemoveResButton=_useStoryStore.onRemoveResButton,onAddResButtons=_useStoryStore.onAddResButtons,onEditIntent=_useStoryStore.onEditIntent,onCreateEntities=_useStoryStore.onCreateEntities,onDeleteEntities=_useStoryStore.onDeleteEntities,onEditEntityShowValue=_useStoryStore.onEditEntityShowValue,onEditEntity=_useStoryStore.onEditEntity,onEditEntityValue=_useStoryStore.onEditEntityValue,onDeleteExample=_useStoryStore.onDeleteExample;return(0,jsx_runtime.jsxs)("div",{className:ShowStory_module_root,children:[(0,jsx_runtime.jsxs)("div",{className:"col d-flex align-items-center",children:[(0,jsx_runtime.jsx)("div",{className:ShowStory_module_title,children:story.story}),"問候語"!==story.story&&(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-danger mx-4",onClick:function onClick(){return onDeleteStory(story.story)},children:"刪除故事"})]}),(0,jsx_runtime.jsx)("div",{className:ShowStory_module_stepsPanel,children:story.steps.map((function(step){var intent=step.intent,user=step.user,entities=step.entities,examples=step.examples,action=step.action,response=step.response,buttons=step.buttons,checkpoint=step.checkpoint,branchStories=step.branchStories;return step.intent?(0,jsx_runtime.jsx)(UserStep.Z,{step:{intent:intent,user:user,entities:entities,examples:examples},storyName:story.story,onCreateExample:onCreateExample,onEditUserSay:onEditUserSay,onEditIntent:onEditIntent,onCreateEntities:onCreateEntities,onDeleteEntities:onDeleteEntities,onEditEntityShowValue:onEditEntityShowValue,onEditEntity:onEditEntity,onEditEntityValue:onEditEntityValue,onDeleteExample:onDeleteExample},step.intent):step.action?(0,jsx_runtime.jsx)(BotStep.Z,{step:{action:action,response:response,buttons:buttons},storyName:story.story,onEditBotRes:onEditBotRes,onEditResButtons:onEditResButtons,onRemoveResButton:onRemoveResButton,onAddResButtons:onAddResButtons},step.action):(0,jsx_runtime.jsx)(CheckPoint.Z,{branch:branchStories},checkpoint)}))})]})};ShowStory.__docgenInfo={description:"",methods:[],displayName:"ShowStory"};var ShowStory_ShowStory=react.memo(ShowStory);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\ShowStory\\ShowStory.jsx"]={name:"ShowStory",docgenInfo:ShowStory.__docgenInfo,path:"src\\components\\ShowStory\\ShowStory.jsx"})},"./src/components/Slider/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Slider_Slider}});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Slider_module={root:"Slider_root__XvyZT",slider__controls:"Slider_slider__controls__qLoaL",btn:"Slider_btn__2AQFk",slider:"Slider_slider__tSWtR",slider__wrapper:"Slider_slider__wrapper__lbQVX",visuallyhidden:"Slider_visuallyhidden__hutIS",icon:"Slider_icon__R0le4",slide:"Slider_slide__5UlfB",slide__image_wrapper:"Slider_slide__image_wrapper__GLcFx",close:"Slider_close__aV5ah",slide__image:"Slider_slide__image__2QNMn",slide__headline:"Slider_slide__headline__cF4M-",slide__content:"Slider_slide__content__FwvV0","fade-in":"Slider_fade-in__uG3sE",closeBlock:"Slider_closeBlock__8GZnK"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Slide=function Slide(props){var current=props.current,slideObj=props.slideObj,onClick=props.onClick,_React$useState=react.useState(0),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),x=_React$useState2[0],setX=_React$useState2[1],_React$useState3=react.useState(0),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),y=_React$useState4[0],setY=_React$useState4[1],ref=react.useRef(),src=slideObj.src,headline=slideObj.headline,index=slideObj.index,anyclass="";return current===index?anyclass="current":current-1===index?anyclass="previous":current+1===index&&(anyclass="next"),(0,jsx_runtime.jsxs)("li",{"data-dis":"none",ref:ref,"data-number":index,"data-choose":anyclass,className:classnames_default()(Slider_module.slide),onMouseMove:function handleMouseMove(event){var r=ref.current.getBoundingClientRect();setX(event.clientX-(r.left+Math.floor(r.width/2))),setY(event.clientY-(r.top+Math.floor(r.height/2)))},onMouseLeave:function handleMouseLeave(){setX(0),setY(0)},style:{"--x":x,"--y":y},children:[(0,jsx_runtime.jsx)("button",{className:classnames_default()(Slider_module.slide__image_wrapper),onClick:onClick,children:(0,jsx_runtime.jsx)("img",{className:classnames_default()(Slider_module.slide__image),alt:headline,src:src,onLoad:function imageLoaded(event){event.target.style.opacity=1}})}),(0,jsx_runtime.jsx)("div",{className:classnames_default()(Slider_module.video),children:(0,jsx_runtime.jsx)("iframe",{className:"videoId",type:"text/html",width:"100%",height:"100%",src:"https://www.youtube.com/embed/n61ULEU7CO0?enablejsapi=1",title:"YouTube video player",frameBorder:"0"})}),(0,jsx_runtime.jsxs)("article",{className:classnames_default()(Slider_module.slide__content),children:[(0,jsx_runtime.jsx)("h2",{className:classnames_default()(Slider_module.slide__headline),children:headline}),(0,jsx_runtime.jsx)("button",{className:classnames_default()(Slider_module.slide__action,Slider_module.btn),onClick:function playYoutube(e){document.querySelectorAll("[data-dis]").forEach((function(allopenViewElement){allopenViewElement.setAttribute("data-dis","none")})),document.querySelectorAll("[data-dis] .videoId").forEach((function(allIframeElement){allIframeElement.contentWindow.postMessage('{"event":"command", "func":"pauseVideo", "args":""}',"*")})),document.querySelector('[data-choose="current"] ').setAttribute("data-dis","open");var iframea=document.querySelector('[data-choose="current"] .videoId');try{iframea.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}catch(error){console.log(error)}e.stopPropagation()},children:"播放"})]}),(0,jsx_runtime.jsx)("span",{className:classnames_default()(Slider_module.closeBlock),children:(0,jsx_runtime.jsx)("button",{"data-bs-dismiss":"modal",type:"button","aria-label":"Close",className:classnames_default()(Slider_module.close),onClick:function closeSlider(){document.querySelectorAll("[data-dis]").forEach((function(allopenViewElement){allopenViewElement.setAttribute("data-dis","none")})),document.querySelectorAll("[data-dis] .videoId").forEach((function(alliFrameElement){alliFrameElement.contentWindow.postMessage('{"event":"command", "func":"pauseVideo", "args":""}',"*")})),document.querySelector("[data-videoblock]").setAttribute("data-videoblock","none")}})})]})},SliderControl=function SliderControl(props){var type=props.type,title=props.title,onClick=props.onClick,btnType=" btn--".concat(type);return(0,jsx_runtime.jsx)("button",{type:type,className:classnames_default()(Slider_module.btn,Slider_module[btnType]),title:title,onClick:onClick,children:(0,jsx_runtime.jsx)("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M6 12L0 6L6 0L7.4 1.4L2.8 6L7.4 10.6L6 12Z",fill:"#fff"})})})},Slider=function Slider(props){var heading=props.heading,slides=props.slides,wrapperTransform={transform:"translateX(-".concat(100/slides.length*0,"%) transition: all .3s")},headingId="slider-heading__".concat(heading);return(0,jsx_runtime.jsxs)("div",{className:classnames_default()(Slider_module.slider),"aria-labelledby":headingId,children:[(0,jsx_runtime.jsx)("ul",{id:"wrapperTransform",className:classnames_default()(Slider_module.slider__wrapper),style:wrapperTransform,children:slides.map((function(slide){return(0,jsx_runtime.jsx)(Slide,{current:0,slideObj:slide,onClick:function onClick(){return function handleSlideClick(type){document.querySelectorAll("[data-dis]").forEach((function(allopenViewElement){allopenViewElement.setAttribute("data-dis","none")}));var current=0;current!==slides[type].index&&(current=type),document.querySelectorAll("[data-dis] .videoId").forEach((function(alliframeElement){alliframeElement.contentWindow.postMessage('{"event":"command", "func":"pauseVideo", "args":""}',"*")})),document.querySelector("#wrapperTransform").setAttribute("style","transform:translateX(-".concat(type*(100/slides.length),"%);transition: all .3s;")),document.querySelector('#wrapperTransform [data-number="'.concat(Number(type),'"]')).setAttribute("data-choose","current"),document.querySelector('#wrapperTransform [data-number="'.concat(Number(type)-1!=-1?Number(type)-1:slides.length-1,'"]')).setAttribute("data-choose","previous"),document.querySelector('#wrapperTransform [data-number="'.concat(Number(type)+1>slides.length-1?0:Number(type)+1,'"]')).setAttribute("data-choose","next")}(slide.index)}},slide.index)}))}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()(Slider_module.slider__controls),children:[(0,jsx_runtime.jsx)(SliderControl,{type:"previous",title:"Go to previous slide",onClick:function handlePreviousClick(){var lastpoint=0,previous=Number(document.querySelector('[data-choose="current"]').getAttribute("data-number"))-1;lastpoint=previous<0?slides.length-1:previous,document.querySelector("#wrapperTransform").setAttribute("style","transform:translateX(-".concat(lastpoint*(100/slides.length),"%);transition: all .3s;")),document.querySelector('#wrapperTransform [data-number="'.concat(Number(lastpoint),'"]')).setAttribute("data-choose","current"),document.querySelector('#wrapperTransform [data-number="'.concat(Number(lastpoint)-1!=-1?Number(lastpoint)-1:slides.length-1,'"]')).setAttribute("data-choose","previous"),document.querySelector('#wrapperTransform [data-number="'.concat(Number(lastpoint)+1>slides.length-1?0:Number(lastpoint)+1,'"]')).setAttribute("data-choose","next")}}),(0,jsx_runtime.jsx)(SliderControl,{type:"next",title:"Go to next slide",onClick:function handleNextClick(){var Nextpoint=0,next=Number(document.querySelector('[data-choose="current"]').getAttribute("data-number"))+1;Nextpoint=next===slides.length?0:next,document.querySelector("#wrapperTransform").setAttribute("style","transform:translateX(-".concat(Nextpoint*(100/slides.length),"%);transition: all .3s;")),document.querySelector('#wrapperTransform [data-number="'.concat(Number(Nextpoint),'"]')).setAttribute("data-choose","current"),document.querySelector('#wrapperTransform [data-number="'.concat(Number(Nextpoint)-1!=-1?Number(Nextpoint)-1:slides.length-1,'"]')).setAttribute("data-choose","previous"),document.querySelector('#wrapperTransform [data-number="'.concat(Number(Nextpoint)+1>slides.length-1?0:Number(Nextpoint)+1,'"]')).setAttribute("data-choose","next")}})]})]})};Slider.__docgenInfo={description:"",methods:[],displayName:"Slider"};var Slider_Slider=react.memo(Slider);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Slider\\Slider.jsx"]={name:"Slider",docgenInfo:Slider.__docgenInfo,path:"src\\components\\Slider\\Slider.jsx"})},"./src/components/Stories/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Stories_Stories}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/swr/dist/index.mjs"),api=__webpack_require__("./src/services/api.js"),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),ShowStory=__webpack_require__("./src/components/ShowStory/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),swalInput=__webpack_require__("./src/utils/swalInput.js"),MyButton=__webpack_require__("./src/components/MyButton/index.js"),CreateStory=__webpack_require__("./src/components/CreateStory/index.js"),cloneDeep=__webpack_require__("./node_modules/lodash-es/cloneDeep.js"),randomBotResAction=__webpack_require__("./src/utils/randomBotResAction.js"),Stories_module={searchBar:"Stories_searchBar__Ke74O",searchTitle:"Stories_searchTitle__EgwlZ",senderId:"Stories_senderId__UL0fg",btn:"Stories_btn__gSkdO",storiesSelector:"Stories_storiesSelector__92N2T",center:"Stories_center__PuyVQ"},useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),useCreateStoryStore=__webpack_require__("./src/store/useCreateStoryStore.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),index_esm=__webpack_require__("./node_modules/react-icons/cg/index.esm.js"),uuid=__webpack_require__("./node_modules/react-uuid/uuid.js"),uuid_default=__webpack_require__.n(uuid),bs_index_esm=__webpack_require__("./node_modules/react-icons/bs/index.esm.js"),Slots_module_add="Slots_add__fm+jL",Slots_module_addSlotInput="Slots_addSlotInput__aZpys",Slots_module_removeSlotInput="Slots_removeSlotInput__EMQ6q",bi_index_esm=__webpack_require__("./node_modules/react-icons/bi/index.esm.js"),Slot_module_slotContainer="Slot_slotContainer__xeJ2K",Slot_module_dropdownMenu="Slot_dropdownMenu__gElBm",ri_index_esm=__webpack_require__("./node_modules/react-icons/ri/index.esm.js"),SlotValueItem_module={removeSlotValueIcon:"SlotValueItem_removeSlotValueIcon__mnRb4"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),SlotValueItem=function SlotValueItem(props){var slotValue=props.slotValue,onRemoveSlotValue=(0,useStoryStore.Z)((function(state){return{onRemoveSlotValue:state.onRemoveSlotValue}}),shallow.Z).onRemoveSlotValue;return(0,jsx_runtime.jsxs)("span",{className:classnames_default()("badge text-bg-info m-2",SlotValueItem_module.item),children:[slotValue.value,(0,jsx_runtime.jsx)(ri_index_esm.qGf,{className:SlotValueItem_module.removeSlotValueIcon,onClick:function onClick(){return onRemoveSlotValue(slotValue)}})]})};SlotValueItem.__docgenInfo={description:"",methods:[],displayName:"SlotValueItem"};var Stories_SlotValueItem=react.memo(SlotValueItem);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Stories\\SlotValueItem.jsx"]={name:"SlotValueItem",docgenInfo:SlotValueItem.__docgenInfo,path:"src\\components\\Stories\\SlotValueItem.jsx"});var Slot=function Slot(props){var slot=props.slot,onClickAddSlotValuesBtn=props.onClickAddSlotValuesBtn,onRemoveSlot=(0,useStoryStore.Z)((function(state){return{onRemoveSlot:state.onRemoveSlot}}),shallow.Z).onRemoveSlot,atRemoveSlot=react.useCallback((function(slotName){(0,swalInput.Ox)(slotName,"delete").then((function(result){result.isConfirmed&&onRemoveSlot(slotName)}))}),[onRemoveSlot]);return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("mb-2 border border-3 rounded border-secondary d-flex flex-column align-items-center",Slot_module_slotContainer),children:[(0,jsx_runtime.jsxs)("div",{children:["名稱：",slot.key]}),"text"===slot.slotInfo.type?(0,jsx_runtime.jsx)("div",{children:"類別：文字"}):(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[(0,jsx_runtime.jsx)("div",{children:"類別：儲存槽"}),(0,jsx_runtime.jsx)("div",{className:"d-flex flex-wrap justify-content-start",children:slot.slotInfo.values.map((function(value){return(0,jsx_runtime.jsx)(Stories_SlotValueItem,{slotValue:{key:slot.key,value:value}},"slotValueItem-".concat(value))}))})]}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("dropdown  mt-3",Slot_module_dropdownMenu),children:[(0,jsx_runtime.jsx)("button",{className:"btn",type:"button","data-bs-toggle":"dropdown",children:(0,jsx_runtime.jsx)(bi_index_esm.T41,{})}),(0,jsx_runtime.jsxs)("ul",{className:"dropdown-menu",children:["categorical"===slot.slotInfo.type&&(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)("button",{className:"dropdown-item edit","data-bs-toggle":"modal","data-bs-target":"#addSlotValueModal",onClick:function onClick(){return onClickAddSlotValuesBtn(slot.key)},children:"新增儲存槽值"})}),(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)("button",{className:"dropdown-item delete",onClick:function onClick(){return atRemoveSlot(slot.key)},children:"刪除"})})]})]})]},slot.key)};Slot.__docgenInfo={description:"",methods:[],displayName:"Slot"};var Stories_Slot=react.memo(Slot);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Stories\\Slot.jsx"]={name:"Slot",docgenInfo:Slot.__docgenInfo,path:"src\\components\\Stories\\Slot.jsx"});var Slots=function Slots(props){var slots=props.slots,domain=props.domain,_React$useState=react.useState({slotName:"",slotType:"",slotValues:[]}),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),formValue=_React$useState2[0],setFormValue=_React$useState2[1],_React$useState3=react.useState({slotName:"",slotValueItems:[{name:"",id:uuid_default()()}]}),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),newSlotValues=_React$useState4[0],setNewSlotValues=_React$useState4[1],_useStoryStore=(0,useStoryStore.Z)((function(state){return{onCreateSlot:state.onCreateSlot,onAddSlotValue:state.onAddSlotValue}}),shallow.Z),onCreateSlot=_useStoryStore.onCreateSlot,onAddSlotValue=_useStoryStore.onAddSlotValue,atChangeFormValue=react.useCallback((function(e,targetId){var _e$target=e.target,name=_e$target.name,value=_e$target.value;return setFormValue("slotType"===name&&"categorical"===value?function(prev){var _objectSpread2,id=uuid_default()();return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},(_objectSpread2={},(0,defineProperty.Z)(_objectSpread2,name,value),(0,defineProperty.Z)(_objectSpread2,"slotValues",prev.slotValues.concat([{name:"",id:id}])),_objectSpread2))}:"slotType"===name&&"text"===value?function(prev){var _objectSpread3;return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},(_objectSpread3={},(0,defineProperty.Z)(_objectSpread3,name,value),(0,defineProperty.Z)(_objectSpread3,"slotValues",[]),_objectSpread3))}:"name"===name?function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:prev.slotValues.map((function(slotValue){return slotValue.id===targetId&&(slotValue.name=value),slotValue}))})}:function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},(0,defineProperty.Z)({},name,value))})}),[setFormValue]),atAddSlotInput=react.useCallback((function(){setFormValue((function(prev){var id=uuid_default()();return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:prev.slotValues.concat([{name:"",id:id}])})}))}),[setFormValue]),atCancelAddSlot=react.useCallback((function(){setFormValue({slotName:"",slotType:"",slotValues:[]})}),[setFormValue]),atRemoveSlotInput=react.useCallback((function(id){setFormValue((function(prev){var slotValues=prev.slotValues;return prev.slotValues.length>1?slotValues=prev.slotValues.filter((function(item){return item.id!==id})):slotValues[0].name="",(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:slotValues})}))}),[setFormValue]),atSubmitFormValue=react.useCallback((function(slotValue,domainData){if(""!==slotValue.slotName||""!==slotValue.slotType)if(""!==slotValue.slotName&&""!==slotValue.slotType)if(Object.keys(domainData.slots).some((function(slotName){return slotName===slotValue.slotName})))swalInput.FN.fire({icon:"warning",title:"記錄槽名稱重複"});else{if(""!==slotValue.slotName&&"categorical"===slotValue.slotType&&slotValue.slotValues.length){var emptySlots=[],repeatArray=[];if(slotValue.slotValues.map((function(item){return""===item.name&&emptySlots.push(item),item})),emptySlots.length)if(slotValue.slotValues.every((function(item){return""===item.name}))){var id=uuid_default()();slotValue.slotValues=[{name:"",id:id}],setFormValue((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:[{name:"",id:id}]})}))}else slotValue.slotValues=slotValue.slotValues.filter((function(item){return slotValue.slotValues.length>1?""!==item.name:item})),setFormValue((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:prev.slotValues.filter((function(item){return prev.slotValues.length>1?""!==item.name:item}))})}));if(1===slotValue.slotValues.length&&""===slotValue.slotValues[0].name)return void swalInput.FN.fire({icon:"warning",title:"儲存槽值最少需要填寫一個"});if(slotValue.slotValues.map((function(item){return slotValue.slotValues.map((function(checkItem){item.id!==checkItem.id&&checkItem.name===item.name&&""!==item.name&&""!==checkItem.name&&(repeatArray.length&&repeatArray.some((function(repeatItem){return repeatItem.name===checkItem.name}))||repeatArray.push(checkItem));return checkItem})),item})),repeatArray.length)return setFormValue((function(prev){var slotValues=prev.slotValues.map((function(item){return repeatArray.map((function(checkItem){return item.id===checkItem.id&&(item.name=""),item}))[0]}));return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:slotValues})})),void swalInput.FN.fire({icon:"warning",title:"同一個記錄槽內不能有重複的儲存槽名稱"})}onCreateSlot(slotValue),document.querySelector("#addSlotModal .modal-header button").click()}else swalInput.FN.fire({icon:"warning",title:"所有欄位都是必填的"});else document.querySelector("#addSlotModal .modal-header button").click()}),[onCreateSlot]),atClickAddSlotValuesBtn=react.useCallback((function(slotName){setNewSlotValues((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotName:slotName})}))}),[setNewSlotValues]),atChangeNewSlotValues=react.useCallback((function(e,targetId){var value=e.target.value;setNewSlotValues((function(prev){var slotValueItems=prev.slotValueItems.map((function(item){return item.id===targetId&&(item.name=value),item}));return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValueItems:slotValueItems})}))}),[setNewSlotValues]),atRemoveNewSlotInput=react.useCallback((function(targetId){setNewSlotValues((function(prev){var slotValueItems=prev.slotValueItems;return prev.slotValueItems.length>1?slotValueItems=prev.slotValueItems.filter((function(item){return item.id!==targetId})):slotValueItems[0].name="",(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValueItems:slotValueItems})}))}),[setNewSlotValues]),atAddSlotValuesInput=react.useCallback((function(){setNewSlotValues((function(prev){var id=uuid_default()();return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValueItems:prev.slotValueItems.concat([{name:"",id:id}])})}))}),[setNewSlotValues]),atCancelAddSlotValues=react.useCallback((function(){setNewSlotValues({slotName:"",slotValueItems:[{name:"",id:uuid_default()()}]})}),[setNewSlotValues]),atSubmitSlotValues=react.useCallback((function(slotValues,domainData){var repeatArr=[],emptyArr=[];if(domainData.slots[slotValues.slotName].values.map((function(item){return slotValues.slotValueItems.map((function(checkItem){return item===checkItem.name&&repeatArr.push(checkItem),checkItem}))})),repeatArr.length)return setNewSlotValues((function(prev){var slotValueItems=prev.slotValueItems.map((function(item){return repeatArr.map((function(checkItem){return item.id===checkItem.id&&(item.name=""),item}))[0]}));return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValueItems:slotValueItems})})),void swalInput.FN.fire({icon:"warning",title:"同一個記錄槽內不能有重複的儲存槽名稱"});if(slotValues.slotValueItems.map((function(item){return""===item.name&&emptyArr.push(item),item})),emptyArr.length)if(slotValues.slotValueItems.every((function(item){return""===item.name}))){var id=uuid_default()();slotValues.slotValueItems=[{name:"",id:id}],setNewSlotValues((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValueItems:[{name:"",id:id}]})}))}else slotValues.slotValueItems=slotValues.slotValueItems.filter((function(item){return slotValues.slotValueItems.length>1?""!==item.name:item})),setNewSlotValues((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValueItems:prev.slotValueItems.filter((function(item){return prev.slotValueItems.length>1?""!==item.name:item}))})}));1!==slotValues.slotValueItems.length||""!==slotValues.slotValueItems[0].name?(slotValues.slotValueItems.map((function(item){return slotValues.slotValueItems.map((function(checkItem){item.id!==checkItem.id&&item.name===checkItem.name&&""!==item.name&&""!==checkItem.name&&(repeatArr.length&&repeatArr.some((function(repeatItem){return repeatItem.name===checkItem.name}))||repeatArr.push(checkItem));return checkItem})),item})),repeatArr.length&&(setNewSlotValues((function(prev){var slotValueItems=prev.slotValueItems.map((function(item){return repeatArr.map((function(checkItem){return item.id===checkItem.id&&(item.name=""),item}))[0]}));return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValueItems:slotValueItems})})),swalInput.FN.fire({icon:"warning",title:"同一個記錄槽內不能有重複的儲存槽名稱"})),onAddSlotValue(slotValues),document.querySelector("#addSlotValueModal .btn-close").click()):swalInput.FN.fire({icon:"warning",title:"儲存槽值最少需要填寫一個"})}),[setNewSlotValues,onAddSlotValue]);return(0,jsx_runtime.jsxs)("div",{className:"offcanvas-body",children:[slots.map((function(slot){var key=slot.key,slotInfo=slot.slotInfo;return(0,jsx_runtime.jsx)(Stories_Slot,{slot:{key:key,slotInfo:slotInfo},onClickAddSlotValuesBtn:atClickAddSlotValuesBtn},"slot-".concat(key))})),(0,jsx_runtime.jsx)(index_esm.DFN,{className:classnames_default()(Slots_module_add),"data-bs-toggle":"modal","data-bs-target":"#addSlotModal"}),(0,jsx_runtime.jsx)("div",{className:"modal fade",id:"addSlotModal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"addSlotModalLabel","aria-hidden":"true",children:(0,jsx_runtime.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:(0,jsx_runtime.jsxs)("div",{className:"modal-content",children:[(0,jsx_runtime.jsxs)("div",{className:"modal-header",children:[(0,jsx_runtime.jsx)("h5",{className:"modal-title",id:"addSlotModalLabel",children:"新增記錄槽"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function onClick(){return atCancelAddSlot()}})]}),(0,jsx_runtime.jsxs)("div",{className:"modal-body",children:[(0,jsx_runtime.jsx)("div",{className:"mb-3",children:(0,jsx_runtime.jsx)("input",{type:"text",className:"form-control",id:"slotName",placeholder:"請輸入記錄槽名稱",name:"slotName",value:formValue.slotName,onChange:function onChange(e){return atChangeFormValue(e)}})}),(0,jsx_runtime.jsx)("div",{className:"mb-3",children:(0,jsx_runtime.jsxs)("select",{className:"form-control",id:"slotType",value:formValue.slotType,name:"slotType",onChange:function onChange(e){return atChangeFormValue(e)},children:[(0,jsx_runtime.jsx)("option",{value:"",hidden:!0,disabled:!0,children:"請選擇記錄槽種類"}),(0,jsx_runtime.jsx)("option",{value:"text",children:"文字"}),(0,jsx_runtime.jsx)("option",{value:"categorical",children:"儲存槽"})]})}),formValue.slotValues.length>0&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"mb-2",children:"儲存槽值"}),formValue.slotValues.map((function(slotValue){return(0,jsx_runtime.jsxs)("div",{className:"mb-3 d-flex align-items-center",children:[(0,jsx_runtime.jsx)("input",{type:"text",className:"form-control",id:"slotName",placeholder:"請輸入儲存槽名稱",name:"name",value:slotValue.name,onChange:function onChange(e){return atChangeFormValue(e,slotValue.id)}}),(0,jsx_runtime.jsx)(bs_index_esm.dnY,{className:Slots_module_removeSlotInput,onClick:function onClick(){return atRemoveSlotInput(slotValue.id)}})]},slotValue.id)})),(0,jsx_runtime.jsx)(index_esm.DFN,{className:classnames_default()(Slots_module_addSlotInput),onClick:function onClick(){return atAddSlotInput()}})]})]}),(0,jsx_runtime.jsxs)("div",{className:"modal-footer",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function onClick(){return atCancelAddSlot()},children:"取消"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function onClick(){return atSubmitFormValue(formValue,domain)},children:"儲存"})]})]})})}),(0,jsx_runtime.jsx)("div",{className:"modal fade",id:"addSlotValueModal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"addSlotValueModalLabel","aria-hidden":"true",children:(0,jsx_runtime.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:(0,jsx_runtime.jsxs)("div",{className:"modal-content",children:[(0,jsx_runtime.jsxs)("div",{className:"modal-header",children:[(0,jsx_runtime.jsxs)("h5",{className:"modal-title",id:"addSlotValueModalLabel",children:["新增「",newSlotValues.slotName,"」的儲存槽值"]}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function onClick(){return atCancelAddSlotValues()}})]}),(0,jsx_runtime.jsxs)("div",{className:"modal-body",children:[newSlotValues.slotValueItems.map((function(slotValue){return(0,jsx_runtime.jsxs)("div",{className:"mb-3 d-flex align-items-center",children:[(0,jsx_runtime.jsx)("input",{type:"text",className:"form-control",id:"slotName",placeholder:"請輸入儲存槽名稱",name:"name",value:slotValue.name,onChange:function onChange(e){return atChangeNewSlotValues(e,slotValue.id)}}),(0,jsx_runtime.jsx)(bs_index_esm.dnY,{className:Slots_module_removeSlotInput,onClick:function onClick(){return atRemoveNewSlotInput(slotValue.id)}})]},slotValue.id)})),(0,jsx_runtime.jsx)(index_esm.DFN,{className:classnames_default()(Slots_module_addSlotInput),onClick:function onClick(){return atAddSlotValuesInput()}})]}),(0,jsx_runtime.jsxs)("div",{className:"modal-footer",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function onClick(){return atCancelAddSlotValues()},children:"取消"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function onClick(){return atSubmitSlotValues(newSlotValues,domain)},children:"儲存"})]})]})})})]})};Slots.__docgenInfo={description:"",methods:[],displayName:"Slots"};var Stories_Slots=react.memo(Slots);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Stories\\Slots.jsx"]={name:"Slots",docgenInfo:Slots.__docgenInfo,path:"src\\components\\Stories\\Slots.jsx"});var Stories=function Stories(){var _React$useState=react.useState(!1),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),create=_React$useState2[0],setCreate=_React$useState2[1],_React$useState3=react.useState(""),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),defaultValue=_React$useState4[0],setDefaultValue=_React$useState4[1],_React$useState5=react.useState([]),_React$useState6=(0,slicedToArray.Z)(_React$useState5,2),slots=_React$useState6[0],setSlots=_React$useState6[1],_useStoryStore=(0,useStoryStore.Z)((function(state){return{story:state.story,stories:state.stories,nlu:state.nlu,domain:state.domain,cloneData:state.cloneData,deletedStory:state.deletedStory,actions:state.actions,storiesOptions:state.storiesOptions,onSetStory:state.onSetStory,onSetDeleteStory:state.onSetDeleteStory,onSetAllTrainData:state.onSetAllTrainData,onSetAllAction:state.onSetAllAction,onSetRasaTrainState:state.onSetRasaTrainState}}),shallow.Z),story=_useStoryStore.story,stories=_useStoryStore.stories,nlu=_useStoryStore.nlu,domain=_useStoryStore.domain,cloneData=_useStoryStore.cloneData,deletedStory=_useStoryStore.deletedStory,actions=_useStoryStore.actions,storiesOptions=_useStoryStore.storiesOptions,onSetStory=_useStoryStore.onSetStory,onSetDeleteStory=_useStoryStore.onSetDeleteStory,onSetAllTrainData=_useStoryStore.onSetAllTrainData,onSetAllAction=_useStoryStore.onSetAllAction,onSetRasaTrainState=_useStoryStore.onSetRasaTrainState,_useCreateStoryStore=(0,useCreateStoryStore.Z)((function(state){return{newStory:state.newStory,onInitialNewStory:state.onInitialNewStory,onCreateNewStory:state.onCreateNewStory,onSetSelectedBranchStory:state.onSetSelectedBranchStory,onSetSelectedConnectBranchStory:state.onSetSelectedConnectBranchStory}}),shallow.Z),newStory=_useCreateStoryStore.newStory,onSetSelectedBranchStory=_useCreateStoryStore.onSetSelectedBranchStory,onCreateNewStory=_useCreateStoryStore.onCreateNewStory,onInitialNewStory=_useCreateStoryStore.onInitialNewStory,onSetSelectedConnectBranchStory=_useCreateStoryStore.onSetSelectedConnectBranchStory,data=(0,dist.ZP)("/api/getAllTrainData",api.pi).data;react.useEffect((function(){onSetAllTrainData(data)}),[data,onSetAllTrainData]),react.useEffect((function(){(0,api.yj)().then((function(actionData){return onSetAllAction(actionData)})),fetch("http://192.168.10.105:5005/status").then((function(res){return res.json()})).then((function(stateData){return onSetRasaTrainState(stateData.num_active_training_jobs)}))}),[cloneData,onSetAllAction,onSetRasaTrainState]),react.useEffect((function(){return function(){onSetStory("")}}),[]),react.useEffect((function(){if(Object.keys(domain).length&&Object.keys(domain.slots).length){var filteredSlots=Object.entries(domain.slots).map((function(slot){return{key:slot[0],slotInfo:slot[1]}}));setSlots(filteredSlots)}}),[domain]);var atDeleteStory=react.useCallback((function(storyName){(0,swalInput.Ox)(storyName,"delete").then((function(result){if(result.isConfirmed){var deleteStory=cloneData.stories.filter((function(item){return item.story===storyName}))[0],deleteIdx=cloneData.stories.indexOf(deleteStory);cloneData.stories.splice(deleteIdx,1);var intentArr=[],actionArr=[],entitiesArr=[],branchStories=[];story.steps.map((function(step){return step.action&&(actionArr.push(step.action),step.buttons&&step.buttons.map((function(button){button.disabled||(actionArr.push(button.buttonAction),intentArr.push(button.payload));var buttonStoryIdx=cloneData.stories.map((function(item){return item.story})).indexOf("button_".concat(button.title));return-1!==buttonStoryIdx&&cloneData.stories.splice(buttonStoryIdx,1),button}))),step.intent&&(intentArr.push(step.intent),step.entities=step.entities.map((function(entityItem){return entitiesArr.push({entity:Object.keys(entityItem)[0]}),{start:step.user.indexOf(Object.values(entityItem)[0]),end:step.user.indexOf(Object.values(entityItem)[0])+Object.values(entityItem)[0].length,value:Object.values(entityItem)[0],entity:Object.keys(entityItem)[0]}}))),step.checkpoint&&(branchStories=step.branchStories),step})),branchStories.map((function(item){var allStoryName=cloneData.stories.map((function(storyItem){return storyItem.story}));return cloneData.stories.splice(allStoryName.indexOf(item.story),1),item.steps.map((function(step,idx){return step.action&&(delete cloneData.domain.responses[step.action],cloneData.domain.actions.splice(cloneData.domain.actions.indexOf(step.action),1)),0!==idx&&step.checkpoint&&step.branchStories.length&&step.branchStories.map((function(branchStory){return console.log("delete story connect story ===>",branchStory),cloneData.stories.splice(allStoryName.indexOf(branchStory.story),1),branchStory.steps.map((function(branchStep){return branchStep.action&&(delete cloneData.domain.responses[branchStep.action],cloneData.domain.actions.splice(cloneData.domain.actions.indexOf(branchStep.action),1)),branchStep}))})),step})),item})),intentArr.map((function(intent){for(var i=0;i<cloneData.nlu.rasa_nlu_data.common_examples.length;i+=1)cloneData.nlu.rasa_nlu_data.common_examples[i].intent===intent&&(cloneData.nlu.rasa_nlu_data.common_examples.splice(i,1),i-=1);for(var _i=0;_i<cloneData.domain.intents.length;_i+=1)cloneData.domain.intents[_i]===intent&&(cloneData.domain.intents.splice(_i,1),_i-=1);return intent})),actionArr.map((function(deleteAction){return cloneData.domain.actions.map((function(domainAction,idx){return domainAction===deleteAction&&cloneData.domain.actions.splice(idx,1),delete cloneData.domain.responses[deleteAction]}))})),entitiesArr.map((function(deleteEntity){return deleteEntity.isExist=cloneData.stories.some((function(item){return item.steps.some((function(step){return!(!step.intent||!step.entities.length)&&Object.keys(step.entities).some((function(entityItem){return entityItem===deleteEntity.entity}))}))})),deleteEntity})),entitiesArr.map((function(deleteEntity){return deleteEntity.isExist=cloneData.nlu.rasa_nlu_data.common_examples.some((function(nluItem){return!!nluItem.entities.length&&nluItem.entities.some((function(entityItem){return entityItem.entity===deleteEntity.entity}))})),deleteEntity})),entitiesArr.map((function(entityItem){return entityItem.isExist||cloneData.domain.entities.splice(cloneData.domain.entities.indexOf(entityItem.entity),1),entityItem})),(0,api.a)(cloneData).then((function(res){return"success"!==res.status?swalInput.FN.fire({icon:"error",title:"刪除故事流程失敗",text:res.message}):(swalInput.FN.fire({icon:"success",title:"刪除故事流程成功"}),onSetAllTrainData(res.data),setDefaultValue(""),onSetDeleteStory(story),onSetStory(""))}))}}))}),[onSetAllTrainData,onSetStory,onSetDeleteStory,cloneData,story]),atSelectStory=react.useCallback((function(storyName){return 0!==Object.keys(newStory).length?(0,swalInput.Ox)(newStory.story,null).then((function(result){result.isConfirmed&&(onSetSelectedBranchStory({story:"",steps:[]}),onSetSelectedConnectBranchStory({story:"",steps:[]}),onSetStory(storyName),setCreate(!1),setDefaultValue(storyName),onInitialNewStory())})):(onSetSelectedBranchStory({story:"",steps:[]}),onSetSelectedConnectBranchStory({story:"",steps:[]}),onSetStory(storyName),setCreate(!1),setDefaultValue(storyName),onInitialNewStory())}),[onSetStory,newStory,onInitialNewStory,onSetSelectedBranchStory,onSetSelectedConnectBranchStory]),atClickCreateStoryBtn=react.useCallback((function(){return 0!==Object.keys(newStory).length?(0,swalInput.Ox)(newStory.story,null).then((function(result){result.isConfirmed&&(0,swalInput.Rh)("設定故事名稱","text","請輸入故事名稱","",!0).then((function(createStoryName){if(createStoryName){var repeat=[];stories.map((function(item){return item.story===createStoryName?repeat.push(item):item})),repeat.length?swalInput.FN.fire({icon:"warning",title:"故事名稱重複"}):(onSetSelectedBranchStory({story:"",steps:[]}),onSetSelectedConnectBranchStory({story:"",steps:[]}),onCreateNewStory(createStoryName),onSetStory(""),setCreate(!0),setDefaultValue(""))}}))})):(0,swalInput.Rh)("設定故事名稱","text","請輸入故事名稱","",!0).then((function(createStoryName){if(createStoryName){var repeat=[];stories.map((function(item){return item.story===createStoryName?repeat.push(item):item})),repeat.length?swalInput.FN.fire({icon:"warning",title:"故事名稱重複"}):(onCreateNewStory(createStoryName),onSetStory(""),setCreate(!0),setDefaultValue(""))}}))}),[newStory,onSetStory,stories,onCreateNewStory,onSetSelectedBranchStory,onSetSelectedConnectBranchStory]),atClickSaveBtn=react.useCallback((function(createStory){var newStories=(0,cloneDeep.Z)(cloneData.stories),newNlu=(0,cloneDeep.Z)(cloneData.nlu),newDomain=(0,cloneDeep.Z)(cloneData.domain),userStep=[],botStep=[];if(createStory.steps.map((function(step,idx){return step.intent?userStep.push({step:step,idx:idx}):botStep.push({step:step,idx:idx})})),0===userStep.length)return swalInput.FN.fire({icon:"warning",title:"使用者對話是必填的"});if(0===botStep.length)return swalInput.FN.fire({icon:"warning",title:"機器人回覆是必填的"});var curIdx=0;if(!userStep.every((function(step){return step.idx===curIdx&&(curIdx+=2,!0)})))return swalInput.FN.fire({icon:"error",title:"故事流程步驟順序有問題，請重新嘗試"});var cloneNewStory=(0,cloneDeep.Z)(createStory);cloneNewStory.steps=cloneNewStory.steps.map((function(step){return step.intent&&(delete step.examples,step.intent=step.intent.trim(),step.user=step.user.trim(),step.entities=step.entities.map((function(entityItem){return(0,defineProperty.Z)({},entityItem.entity,entityItem.value)}))),step.action&&(delete step.response,delete step.buttons),step.checkpoint&&delete step.branchStories,step})),newStories.push(cloneNewStory);var branchStories=[];createStory.steps.map((function(step){return step.checkpoint&&(branchStories=step.branchStories),step})),branchStories.length&&branchStories.map((function(branchStory){return branchStory.steps.map((function(step,idx){return step.action&&(newDomain.responses[step.action]=[{text:JSON.parse(JSON.stringify(step.response).replace(/\\n/g,"  \\n"))}],newDomain.actions.push(step.action),delete step.response),0!==idx&&step.checkpoint&&step.branchStories.map((function(connectBranchStory){return connectBranchStory.steps.map((function(connectStep){return connectStep.action&&(newDomain.responses[connectStep.action]=[{text:JSON.parse(JSON.stringify(connectStep.response).replace(/\\n/g,"  \\n"))}],newDomain.actions.push(connectStep.action),delete connectStep.response),connectStep})),newStories.push(connectBranchStory)})),delete step.branchStories,step})),newStories.push(branchStory)})),cloneNewStory.steps.map((function(step){return step.intent&&(newNlu.rasa_nlu_data.common_examples.push({text:step.user,intent:step.intent,entities:createStory.steps.filter((function(createStoryStep){return createStoryStep.intent===step.intent}))[0].entities}),newDomain.intents.push(step.intent)),step})),cloneNewStory.steps.map((function(step){step.intent&&createStory.steps.filter((function(createStoryStep){return createStoryStep.intent===step.intent}))[0].entities.map((function(entityItem){return!newDomain.entities.includes(entityItem.entity)&&newDomain.entities.push(entityItem.entity)}));return step})),createStory.steps.filter((function(step){return step.examples})).map((function(step){return step.examples})).map((function(exampleItem){return exampleItem.map((function(example){return newNlu.rasa_nlu_data.common_examples.push({text:example.text,intent:example.intent,entities:example.entities})}))}));var currentAction=createStory.steps.filter((function(step){return step.action})).map((function(step){var buttons=[];return step.buttons&&step.buttons.map((function(button){var isPayload=button.payload.indexOf("/");return buttons.push({title:button.title,payload:isPayload>-1?button.payload:"/".concat(button.payload),reply:button.reply})})),{action:step.action,text:step.response,buttons:buttons}}));(0,cloneDeep.Z)(currentAction).map((function(actionItem){var responseText=JSON.parse(JSON.stringify(actionItem.text).replace(/\\n/g,"  \\n"));return actionItem.buttons.length?(actionItem.buttons.map((function(button){return delete button.reply})),newDomain.responses[actionItem.action]=[{text:responseText,buttons:actionItem.buttons}]):newDomain.responses[actionItem.action]=[{text:responseText}],newDomain.actions.push(actionItem.action)})),currentAction.map((function(actionItem){return actionItem.buttons.length&&actionItem.buttons.map((function(button){var intent=button.payload.replace(/\//g,"");if(newNlu.rasa_nlu_data.common_examples.every((function(nluItem){return nluItem.intent!==intent}))){var reply=JSON.parse(JSON.stringify(button.reply).replace(/\\n/g,"  \\n"));newNlu.rasa_nlu_data.common_examples.push({text:button.title,intent:intent,entities:[]});var actionName=(0,randomBotResAction.r)(actions);newStories.push({story:"button_".concat(intent),steps:[{user:button.title,intent:intent,entities:[]},{action:actionName}]}),newDomain.actions.push(actionName),newDomain.responses[actionName]=[{text:reply}],newDomain.intents.push(intent)}return button})),actionItem}));var newData={stories:newStories,nlu:newNlu,domain:newDomain};return(0,api.a)(newData).then((function(res){return"success"!==res.status?swalInput.FN.fire({icon:"error",title:"新增故事失敗",text:res.message}):(swalInput.FN.fire({icon:"success",title:"新增故事成功"}),onSetSelectedBranchStory({story:"",steps:[]}),onSetSelectedConnectBranchStory({story:"",steps:[]}),onSetAllTrainData(res.data),setCreate(!1),onInitialNewStory(),setDefaultValue(createStory.story),onSetStory(createStory.story))}))}),[onSetStory,onSetAllTrainData,cloneData,actions,onInitialNewStory,onSetSelectedBranchStory,onSetSelectedConnectBranchStory]),atRecoverDeletedStory=react.useCallback((function(deleteStory){stories.some((function(item){return item.story===deleteStory.story}))?swalInput.FN.fire({icon:"warning",title:"故事名稱重複"}):(atClickSaveBtn(deleteStory),onSetDeleteStory({}))}),[onSetDeleteStory,atClickSaveBtn,stories]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:Stories_module.searchBar,children:(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("div",{className:Stories_module.senderId,children:[(0,jsx_runtime.jsx)("h4",{className:Stories_module.searchTitle,children:"故事流程"}),(0,jsx_runtime.jsxs)("select",{id:"stories",className:Stories_module.storiesSelector,onChange:function onChange(e){return atSelectStory(e.target.value)},value:defaultValue,children:[(0,jsx_runtime.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"請選擇"}),storiesOptions&&storiesOptions.map((function(item){return(0,jsx_runtime.jsx)("option",{value:item.story,children:item.story},item.story)}))]}),(0,jsx_runtime.jsx)("div",{className:classnames_default()(Stories_module.btn,Stories_module.navbar),children:(0,jsx_runtime.jsx)(MyButton.Z,{variant:"third",onClick:atClickCreateStoryBtn,children:"新增故事流程"})}),Object.keys(deletedStory).length>0&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("btn",Stories_module.navbar),children:(0,jsx_runtime.jsx)(MyButton.Z,{variant:"primary",onClick:function onClick(){return atRecoverDeletedStory(deletedStory)},children:"恢復刪除"})}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()(Stories_module.btn,Stories_module.navbar),children:[(0,jsx_runtime.jsx)("button",{className:"btn btn-secondary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#showSlotsOffcanvas","aria-controls":"offcanvasWithBothOptions",children:"記錄槽"}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("offcanvas offcanvas-start ",Stories_module.offcanvas),"data-bs-scroll":"true",id:"showSlotsOffcanvas",tabIndex:"-1","aria-labelledby":"showSlotsOffcanvasLabel",children:[(0,jsx_runtime.jsxs)("div",{className:"offcanvas-header",children:[(0,jsx_runtime.jsx)("h5",{className:"offcanvas-title",id:"showSlotsOffcanvasLabel",children:"記錄槽"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),(0,jsx_runtime.jsx)(Stories_Slots,{slots:slots,domain:domain})]})]})]})})}),Object.keys(story).length>0&&(0,jsx_runtime.jsx)(ShowStory.Z,{story:story,onDeleteStory:atDeleteStory,onRecoverDeletedStory:atClickSaveBtn}),create&&(0,jsx_runtime.jsx)(CreateStory.Z,{isCreate:create,nlu:nlu.rasa_nlu_data.common_examples,actions:actions,onClickSaveBtn:atClickSaveBtn})]})};Stories.__docgenInfo={description:"",methods:[],displayName:"Stories"};var Stories_Stories=react.memo(Stories);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\Stories\\Stories.jsx"]={name:"Stories",docgenInfo:Stories.__docgenInfo,path:"src\\components\\Stories\\Stories.jsx"})},"./src/components/UserStep/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return UserStep_UserStep}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),sweetalert2_all=__webpack_require__("./node_modules/sweetalert2/dist/sweetalert2.all.js"),sweetalert2_all_default=__webpack_require__.n(sweetalert2_all),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),uuid=__webpack_require__("./node_modules/react-uuid/uuid.js"),uuid_default=__webpack_require__.n(uuid),index_esm=__webpack_require__("./node_modules/react-icons/cg/index.esm.js"),bs_index_esm=__webpack_require__("./node_modules/react-icons/bs/index.esm.js"),UserStep_module_userStepContainer="UserStep_userStepContainer__LqVhs",UserStep_module_userTitle="UserStep_userTitle__XoCkp",UserStep_module_userText="UserStep_userText__jAsKW",UserStep_module_entitiesContainer="UserStep_entitiesContainer__IvnFS",UserStep_module_addSlotValueSelect="UserStep_addSlotValueSelect__DrXYl",UserStep_module_removeSlotValueIcon="UserStep_removeSlotValueIcon__ywSqi",UserStep_module_keywordBtn="UserStep_keywordBtn__G8vG7",swalInput=__webpack_require__("./src/utils/swalInput.js"),Entities=__webpack_require__("./src/components/Entities/index.js"),Examples_module_root="Examples_root__jCduc",jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Examples=function Examples(props){var text=props.text,intent=props.intent,entities=props.entities,entitiesData=props.entitiesData,onDeleteExample=props.onDeleteExample;console.log("entitiesData:",entitiesData);var atDeleteExample=react.useCallback((function(userSay,stepIntent){(0,swalInput.Ox)(userSay,"deleteExample").then((function(result){result.isConfirmed&&onDeleteExample(userSay,stepIntent)}))}),[onDeleteExample]);return(0,jsx_runtime.jsxs)("div",{className:Examples_module_root,children:[(0,jsx_runtime.jsx)("div",{className:"col-4",children:text}),(0,jsx_runtime.jsx)("div",{className:"col-4",children:entities.length>0&&entities.map((function(entityItem){var entity=entityItem.entity,value=entityItem.value,start=entityItem.start,end=entityItem.end;return(0,jsx_runtime.jsxs)("div",{className:"py-2",children:[(0,jsx_runtime.jsxs)("div",{children:["關鍵字:",text.slice(start,end)]}),(0,jsx_runtime.jsxs)("div",{children:["儲存槽:",value]}),(0,jsx_runtime.jsxs)("div",{children:["記錄槽:",entity]})]},entity+value)}))}),(0,jsx_runtime.jsx)("div",{className:"col-3 text-end ",children:(0,jsx_runtime.jsx)("button",{className:"btn btn-outline-danger mx-2",onClick:function onClick(){return atDeleteExample(text,intent)},children:"刪除"})})]})};Examples.__docgenInfo={description:"",methods:[],displayName:"Examples"};var UserStep_Examples=react.memo(Examples);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\UserStep\\Examples.jsx"]={name:"Examples",docgenInfo:Examples.__docgenInfo,path:"src\\components\\UserStep\\Examples.jsx"});var useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),randomBotResAction=__webpack_require__("./src/utils/randomBotResAction.js"),useCreateStoryStore=__webpack_require__("./src/store/useCreateStoryStore.js"),UserStep=function UserStep(props){var isCreate=props.isCreate,step=props.step,storyName=props.storyName,newStory=props.newStory,onCreateExample=props.onCreateExample,onEditUserSay=props.onEditUserSay,onEditIntent=props.onEditIntent,onCreateEntities=props.onCreateEntities,onRemoveUserStep=props.onRemoveUserStep,onEditEntityShowValue=props.onEditEntityShowValue,onEditEntity=props.onEditEntity,onEditEntityValue=props.onEditEntityValue,onDeleteEntities=props.onDeleteEntities,onDeleteExample=props.onDeleteExample,onCreateBranchStory=props.onCreateBranchStory,_useStoryStore=(0,useStoryStore.Z)((function(state){return{nlu:state.nlu,domain:state.domain,actions:state.actions,stories:state.stories}}),shallow.Z),nlu=_useStoryStore.nlu,domain=_useStoryStore.domain,actions=_useStoryStore.actions,stories=_useStoryStore.stories,_useCreateStoryStore=(0,useCreateStoryStore.Z)((function(state){return{currentStep:state.currentStep,onConnectBranchStory:state.onConnectBranchStory,checkPointName:state.checkPointName}}),shallow.Z),currentStep=_useCreateStoryStore.currentStep,checkPointName=_useCreateStoryStore.checkPointName,onConnectBranchStory=_useCreateStoryStore.onConnectBranchStory,_React$useState=react.useState({branchName:"",slotValues:[{slotName:"",slotValue:"",id:uuid_default()(),hasSlotValues:!1}],botRes:{action:(0,randomBotResAction.r)(actions),response:""}}),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),newBranchStory=_React$useState2[0],setNewBranchStory=_React$useState2[1],_React$useState3=react.useState("botRes"),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),resSelect=_React$useState4[0],setResSelect=_React$useState4[1],showIntent="get_started"===step.intent?"打開聊天室窗":step.intent,isGetStarted="get_started"===step.intent,entitiesData=react.useMemo((function(){return function filteredEntities(entities,userSay,intent,nlu){var entitiesKeys=entities.map((function(item){return Object.keys(item)})),currentEntities=[];if(entitiesKeys.length&&entitiesKeys.every((function(item){return item.every((function(keyItem){return"start"!==keyItem}))}))){var _nlu$rasa_nlu_data$co=nlu.rasa_nlu_data.common_examples.filter((function(nluItem){return nluItem.text===userSay&&nluItem.intent===intent})).map((function(item){return item.entities}));currentEntities=(0,slicedToArray.Z)(_nlu$rasa_nlu_data$co,1)[0]}return currentEntities.length?currentEntities.sort((function(a,b){return a.start-b.start})):entities.sort((function(a,b){return a.start-b.start}))}(step.entities,step.user,step.intent,nlu)}),[step.entities,step.user,step.intent,nlu]),atEditUserSay=react.useCallback((function(userSay){(0,swalInput.Rh)("編輯使用者對話","textarea","請輸入使用者對話",userSay,!0).then((function(data){data&&data.new&&userSay!==data.new&&onEditUserSay(data.ori,data.new,storyName,nlu)}))}),[onEditUserSay,storyName,nlu]),atEditIntent=react.useCallback((function(intent){(0,swalInput.Rh)("編輯意圖","textarea","請輸入意圖",intent,!0).then((function(data){data&&data.new&&intent!==data.new&&onEditIntent(data.ori,data.new,storyName,nlu)}))}),[onEditIntent,storyName,nlu]),atCreateExample=react.useCallback((function(intent,parentEntitiesData,currentStoryName){var exampleValue=document.querySelector("#input-".concat(intent,"-example")).value,entityKeys=parentEntitiesData.map((function(entityItem){return entityItem.entity})),entitiesValue=entityKeys.map((function(key){var value=document.querySelector("#input-".concat(key,"-entities-value")).value,showValue=document.querySelector("#input-".concat(key,"-entities-show-value")).value;return{start:exampleValue.indexOf(showValue),end:exampleValue.indexOf(showValue)+showValue.length,entity:key,value:value,showValue:showValue}}));if(""!==exampleValue||!entitiesValue.every((function(entity){return""===entity.value})))if(""===exampleValue||entitiesValue.some((function(entity){return""===entity.value||""===entity.showValue})))swalInput.FN.fire({icon:"warning",title:"所有欄位都是必填的"});else{var isNotValid=[];if(entitiesValue.map((function(entityItem){return exampleValue.includes(entityItem.showValue)||isNotValid.push(entityItem.entity),entityItem})),isNotValid.length)return isNotValid.map((function(notValidEntity){return document.querySelector("#input-".concat(notValidEntity,"-entities-show-value")).value="",notValidEntity})),void swalInput.FN.fire({icon:"warning",title:"關鍵字代表值『".concat(isNotValid.toString(),"』的關鍵字有誤，請輸入正確的關鍵字")});var repeatEntity=[];if(entitiesValue.some((function(entityItem){return entitiesValue.some((function(checkEntityItem){return entityItem.showValue!==checkEntityItem.showValue&&((checkEntityItem.start<=entityItem.start&&entityItem.start<checkEntityItem.end||checkEntityItem.end<entityItem.end&&entityItem.end<=checkEntityItem.end)&&(repeatEntity.push(checkEntityItem.entity),!0))}))})))return repeatEntity.map((function(repeatKey){return document.querySelector("#input-".concat(repeatKey,"-entities-show-value")).value="",repeatKey})),void swalInput.FN.fire({icon:"warning",title:"代表值『".concat(repeatEntity.toString(),"』的關鍵字重疊，請重新輸入")});if(entitiesValue.some((function(entityItem){return entitiesValue.some((function(checkEntityItem){return entityItem.showValue!==checkEntityItem.showValue&&(entityItem.value===checkEntityItem.value&&(repeatEntity.push(checkEntityItem.entity),!0))}))})))return repeatEntity.map((function(repeatKey){return document.querySelector("#input-".concat(repeatKey,"-entities-value")).value="",repeatKey})),void swalInput.FN.fire({icon:"warning",title:"代表值『".concat(repeatEntity.toString(),"』的記憶槽代表值重複，請重新輸入")});entitiesValue.map((function(entityItem){return delete entityItem.showValue})),onCreateExample(intent,exampleValue,entitiesValue.sort((function(a,b){return a.start-b.start})),currentStoryName,nlu),document.querySelector("#input-".concat(intent,"-example")).value="",entityKeys.map((function(key){return document.querySelector("#input-".concat(key,"-entities-value")).value="",document.querySelector("#input-".concat(key,"-entities-show-value")).value="",key}))}}),[onCreateExample,nlu]),atDeleteExample=react.useCallback((function(userSay,intent){onDeleteExample(userSay,intent,storyName)}),[onDeleteExample,storyName]),atCreateEntities=react.useCallback(function(){var _ref=(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(userSay,intent,currentEntities,currentStoryName){return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,sweetalert2_all_default().fire({title:"編輯關鍵字",html:'\n          <input id="showValue" class="swal2-input" placeholder="請輸入關鍵字" />\n          <input id="currentValue" class="swal2-input" placeholder="請輸入儲存槽代表值" />\n          <input id="entity" class="swal2-input" placeholder="請輸入記錄槽名稱" />\n        ',showCancelButton:!0,showCloseButton:!0,preConfirm:function preConfirm(){return new Promise((function(resolve){sweetalert2_all_default().enableButtons();var showValue=document.querySelector(".swal2-input#showValue").value,currentValue=document.querySelector(".swal2-input#currentValue").value,entity=document.querySelector(".swal2-input#entity").value,start=userSay.indexOf(showValue),end=userSay.indexOf(showValue)+showValue.length;if(""!==showValue||""!==entity||""!==currentValue)if(""!==showValue&&""!==entity&&""!==currentValue){if(!userSay.includes(showValue))return sweetalert2_all_default().showValidationMessage("請填入正確的關鍵字"),void(document.querySelector(".swal2-input#showValue").value="");if(/^[0-9]*$/g.test(entity))return sweetalert2_all_default().showValidationMessage("關鍵字代表值不可為純數字"),void(document.querySelector(".swal2-input#entity").value="");if(currentEntities.length){if(currentEntities.some((function(currentEntitiesItem){return currentEntitiesItem.start<=start&&start<=currentEntitiesItem.end-1||currentEntitiesItem.start<=end-1&&end-1<=currentEntitiesItem.end})))return sweetalert2_all_default().showValidationMessage("關鍵字不可重疊"),void(document.querySelector(".swal2-input#showValue").value="");if(currentEntities.some((function(currentEntitiesItem){return currentEntitiesItem.entity===entity})))return sweetalert2_all_default().showValidationMessage("同一個對話內關鍵字代表值不可重複"),void(document.querySelector(".swal2-input#entity").value="");if(currentEntities.some((function(currentEntitiesItem){return currentEntitiesItem.value===currentValue})))return sweetalert2_all_default().showValidationMessage("同一個對話內記錄槽代表值不可重複"),void(document.querySelector(".swal2-input#currentValue").value="")}resolve({entities:{start:start,end:end,entity:entity,value:currentValue}})}else sweetalert2_all_default().showValidationMessage("所有欄位都是必填的")})).catch((function(err){swalInput.FN.fire({icon:"warning",title:err.message})}))}}).then((function(result){result.isConfirmed&&onCreateEntities(result.value.entities,intent,currentStoryName)}));case 2:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}(),[onCreateEntities]),atDeleteEntities=react.useCallback((function(entity,entityValue,intent){(0,swalInput.Ox)(entityValue,"deleteEntities").then((function(result){result.isConfirmed&&onDeleteEntities(entity,intent,storyName)}))}),[onDeleteEntities,storyName]),atEditEntityShowValue=react.useCallback((function(stepIntent,currentEntityValue,newEntityShowValue){onEditEntityShowValue(stepIntent,currentEntityValue,newEntityShowValue,storyName)}),[onEditEntityShowValue,storyName]),atEditEntity=react.useCallback((function(stepIntent,oriEntity,newEntity){onEditEntity(stepIntent,oriEntity,newEntity,storyName)}),[onEditEntity,storyName]),atEditEntityValue=react.useCallback((function(stepIntent,oriEntityValue,newEntityValue){onEditEntityValue(stepIntent,oriEntityValue,newEntityValue,storyName)}),[onEditEntityValue,storyName]),atChangeNewBranchStory=react.useCallback((function(e,id,domainData){var _e$target=e.target,name=_e$target.name,value=_e$target.value;if("branchName"===name)return setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},(0,defineProperty.Z)({},name,value))}));if("slotName"===name){var hasSlotValues="categorical"===domainData.slots[value].type;return setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:prev.slotValues.map((function(item){return item.id===id&&(item.slotName=value,item.hasSlotValues=hasSlotValues),item}))})}))}return"slotValue"===name?setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:prev.slotValues.map((function(item){return item.id===id&&(item.slotValue=value),item}))})})):"resSelect"===name?(setResSelect(value),"branchStory"===value?setNewBranchStory((function(prev){var newData=prev;return delete newData.botRes,(0,objectSpread2.Z)((0,objectSpread2.Z)({},newData),{},{resSelect:"branchStory"})})):(setResSelect("botRes"),setNewBranchStory((function(prev){var newData=prev;return delete newData.resSelect,newData.botRes?(0,objectSpread2.Z)({},newData):(0,objectSpread2.Z)((0,objectSpread2.Z)({},newData),{},{botRes:{action:(0,randomBotResAction.r)(actions),response:""}})})))):setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{botRes:(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev.botRes),{},(0,defineProperty.Z)({},name,value))})}))}),[setNewBranchStory,actions]),atCancelCreateBranchStory=react.useCallback((function(allAction){setNewBranchStory({branchName:"",slotValues:[{slotName:"",slotValue:"",id:uuid_default()()}],botRes:{action:(0,randomBotResAction.r)(allAction),response:""}}),setResSelect("botRes")}),[setNewBranchStory]),atAddSlotValue=react.useCallback((function(){setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:prev.slotValues.concat([{slotName:"",slotValue:"",id:uuid_default()()}])})}))}),[setNewBranchStory]),atRemoveSlotValue=react.useCallback((function(id){setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{slotValues:prev.slotValues.filter((function(item){return prev.slotValues.length>1?item.id!==id:item}))})}))}),[setNewBranchStory]),atSubmitNewBranchStory=react.useCallback((function(newBranchStoryInfo,storiesData,newStoryData,currentCheckPointName){if(""===newBranchStoryInfo.branchName&&newBranchStoryInfo.slotValues.every((function(item){return""===item.slotName&&""===item.slotValue}))&&""===newBranchStoryInfo.botRes.response)document.querySelector("#createBranchStoryModal .btn-close").click();else if(""===newBranchStoryInfo.branchName||newBranchStoryInfo.slotValues.some((function(item){return""!==item.slotName&&""===item.slotValue&&item.hasSlotValues||""===item.slotName&&!item.hasSlotValues}))||"botRes"===resSelect&&""===newBranchStoryInfo.botRes.response)swalInput.FN.fire({icon:"warning",title:"所有欄位都是必填的"});else{if(storiesData.some((function(item){return item.story===newBranchStoryInfo.branchName})))return newBranchStoryInfo.branchName="",setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{branchName:""})})),swalInput.FN.fire({icon:"warning",title:"支線故事名稱重複"}),void document.querySelector("#createBranchStoryModal #branchName").focus();if(newStoryData.story===newBranchStoryInfo.branchName)return newBranchStoryInfo.branchName="",setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{branchName:""})})),swalInput.FN.fire({icon:"warning",title:"支線故事名稱重複"}),void document.querySelector("#createBranchStoryModal #branchName").focus();if(newStoryData.steps.some((function(newStoryStep){return!(!newStoryStep.checkpoint||!newStoryStep.branchStories.length)&&newStoryStep.branchStories.some((function(branchStory){return branchStory.story===currentCheckPointName&&branchStory.steps.some((function(branchStep,idx){var _branchStep$branchSto;return 2===idx&&null!=branchStep&&null!==(_branchStep$branchSto=branchStep.branchStories)&&void 0!==_branchStep$branchSto&&_branchStep$branchSto.length?branchStep.branchStories.some((function(connectStory){return connectStory.story.slice(connectStory.story.lastIndexOf("_")+1,connectStory.story.length)===newBranchStoryInfo.branchName})):branchStory.story.slice(branchStory.story.lastIndexOf("_")+1,branchStory.story.length)===newBranchStoryInfo.branchName}))}))})))return newBranchStoryInfo.branchName="",setNewBranchStory((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{branchName:""})})),swalInput.FN.fire({icon:"warning",title:"支線故事名稱重複"}),void document.querySelector("#createBranchStoryModal #branchName").focus();"main"===currentStep&&onCreateBranchStory(newBranchStoryInfo),"branchStory"===currentStep&&onConnectBranchStory(newStoryData,newBranchStoryInfo),setResSelect("botRes"),document.querySelector("#createBranchStoryModal .btn-close").click()}}),[onCreateBranchStory,onConnectBranchStory,resSelect,currentStep]);return(0,jsx_runtime.jsx)("div",{className:"row pt-2",id:"userStep",children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("col-6",UserStep_module_userStepContainer),children:[!isGetStarted&&(0,jsx_runtime.jsxs)("div",{className:classnames_default()("py-2"),children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-info mx-2",onClick:function onClick(){return atEditUserSay(step.user)},children:"編輯"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-outline-warning mx-2",onClick:function onClick(){return atEditIntent(step.intent)},children:"意圖"}),(0,jsx_runtime.jsx)("button",{type:"button",className:classnames_default()("btn","btn-primary"),"data-bs-toggle":"modal","data-bs-target":"#show-".concat(step.intent,"-examples"),children:"例句"}),(0,jsx_runtime.jsx)("button",{type:"button",className:classnames_default()("btn btn-outline-info mx-2",UserStep_module_keywordBtn),onClick:function onClick(){return atCreateEntities(step.user,step.intent,entitiesData,storyName)},children:"關鍵字"}),isCreate&&(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-danger mx-2",onClick:function onClick(){return onRemoveUserStep(step.intent,step.user)},children:"刪除"})]}),(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column",children:[(0,jsx_runtime.jsxs)("div",{className:"d-flex align-items-center pt-2",children:[(0,jsx_runtime.jsx)("div",{className:UserStep_module_userTitle,children:"使用者:"}),(0,jsx_runtime.jsx)("div",{className:UserStep_module_userText,children:step.user?step.user:showIntent})]}),(0,jsx_runtime.jsxs)("div",{className:"d-flex align-items-center pt-2",children:[(0,jsx_runtime.jsx)("div",{className:UserStep_module_userTitle,children:"意圖:"}),(0,jsx_runtime.jsx)("div",{className:UserStep_module_userText,children:step.intent})]}),entitiesData.length>0&&(0,jsx_runtime.jsxs)("div",{className:UserStep_module_entitiesContainer,children:[(0,jsx_runtime.jsx)("div",{className:UserStep_module_userTitle,children:"關鍵字資訊:"}),entitiesData.map((function(entityItem){var entity=entityItem.entity,start=entityItem.start,end=entityItem.end,entityValue=entityItem.value,entityShowValue=step.user.slice(start,end);return(0,jsx_runtime.jsx)(Entities.Z,{entity:entity,entityValue:entityValue,entityShowValue:entityShowValue,intent:step.intent,onEditEntityShowValue:atEditEntityShowValue,onEditEntity:atEditEntity,onEditEntityValue:atEditEntityValue,userSay:step.user,entities:entitiesData,onDeleteEntities:atDeleteEntities},entity+entityValue)}))]}),(0,jsx_runtime.jsx)("div",{className:"modal fade",id:"show-".concat(step.intent,"-examples"),tabIndex:"-1","aria-labelledby":"show-".concat(step.intent,"-ExamplesLabel"),"aria-hidden":"true","data-bs-backdrop":"false",children:(0,jsx_runtime.jsx)("div",{className:"modal-dialog  modal-lg modal-dialog-scrollable",children:(0,jsx_runtime.jsxs)("div",{className:"modal-content",children:[(0,jsx_runtime.jsxs)("div",{className:"modal-header",children:[(0,jsx_runtime.jsx)("h1",{className:"modal-title fs-5",id:"show-".concat(step.intent,"-ExamplesLabel"),children:"例句"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,jsx_runtime.jsx)("div",{className:"modal-body",children:step.examples.length>0?step.examples.map((function(example){var text=example.text,intent=example.intent,entities=example.entities;return(0,jsx_runtime.jsx)(UserStep_Examples,{text:text,intent:intent,entities:entities,onDeleteExample:atDeleteExample,entitiesData:entitiesData},text+intent)})):(0,jsx_runtime.jsx)("div",{className:"alert alert-warning",role:"alert",children:"沒有例句資料，請先添加例句"})}),(0,jsx_runtime.jsxs)("div",{className:"modal-footer",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"取消"}),(0,jsx_runtime.jsx)("button",{className:"btn btn-primary","data-bs-target":"#add-".concat(step.intent,"-example"),"data-bs-toggle":"modal",children:"新增例句"})]})]})})}),(0,jsx_runtime.jsx)("div",{className:"modal fade",id:"add-".concat(step.intent,"-example"),tabIndex:"-1","aria-labelledby":"add-".concat(step.intent,"-ExampleLabel"),"aria-hidden":"true","data-bs-backdrop":"false",children:(0,jsx_runtime.jsx)("div",{className:"modal-dialog  modal-lg modal-dialog-scrollable",children:(0,jsx_runtime.jsxs)("div",{className:"modal-content",children:[(0,jsx_runtime.jsxs)("div",{className:"modal-header",children:[(0,jsx_runtime.jsx)("h1",{className:"modal-title fs-5",id:"add-".concat(step.intent,"-ExampleLabel"),children:"新增例句"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,jsx_runtime.jsxs)("div",{className:"modal-body",children:[(0,jsx_runtime.jsx)("div",{className:"mb-3",children:(0,jsx_runtime.jsx)("input",{type:"text",className:"form-control",id:"input-".concat(step.intent,"-example"),placeholder:"請輸入例句"})}),entitiesData.length>0&&(0,jsx_runtime.jsx)("div",{className:"d-flex flex-column",children:entitiesData.map((function(entityItem){return(0,jsx_runtime.jsxs)("div",{className:"mb-3 p-2 border border-success rounded",children:[(0,jsx_runtime.jsx)("input",{type:"text",className:"form-control mb-2",id:"input-".concat(entityItem.entity,"-entities-show-value"),placeholder:"請輸入關鍵字代表值為『".concat(entityItem.entity,"』的關鍵字")}),(0,jsx_runtime.jsx)("input",{type:"text",className:"form-control",id:"input-".concat(entityItem.entity,"-entities-value"),placeholder:"請輸入關鍵字代表值為『".concat(entityItem.entity,"』的儲存槽值")})]},"".concat(entityItem.start,"-").concat(entityItem.start,"-").concat(entityItem.entity," + ").concat(entityItem.value))}))})]}),(0,jsx_runtime.jsxs)("div",{className:"modal-footer",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-target":"#show-".concat(step.intent,"-examples"),"data-bs-toggle":"modal",children:"返回"}),(0,jsx_runtime.jsx)("button",{className:"btn btn-primary","data-bs-target":"#show-".concat(step.intent,"-examples"),"data-bs-toggle":"modal",onClick:function onClick(){return atCreateExample(step.intent,entitiesData,storyName)},children:"儲存"})]})]})})}),(0,jsx_runtime.jsx)("div",{className:"modal fade",id:"createBranchStoryModal",tabIndex:"-1","aria-labelledby":"createBranchStoryModalLabel","aria-hidden":"true","data-bs-backdrop":"false",children:(0,jsx_runtime.jsx)("div",{className:"modal-dialog  modal-lg modal-dialog-scrollable",children:(0,jsx_runtime.jsxs)("div",{className:"modal-content",children:[(0,jsx_runtime.jsxs)("div",{className:"modal-header",children:[(0,jsx_runtime.jsx)("h1",{className:"modal-title fs-5",id:"createBranchStoryModalLabel",children:"新增支線故事"}),(0,jsx_runtime.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function onClick(){return atCancelCreateBranchStory(actions)}})]}),(0,jsx_runtime.jsxs)("div",{className:"modal-body",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-3",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"branchStoryName",className:"form-label",children:"支線故事名稱"}),(0,jsx_runtime.jsx)("input",{className:"form-control",id:"branchName",name:"branchName",placeholder:"請輸入支線故事名稱",value:newBranchStory.branchName,onChange:function onChange(e){return atChangeNewBranchStory(e)}})]}),newBranchStory.slotValues.map((function(slot){var _domain$slots$slot$sl;return(0,jsx_runtime.jsxs)("div",{className:"row border-bottom mb-3",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-3 col-5",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"slotSelected",className:"form-label",children:"記錄槽"}),(0,jsx_runtime.jsxs)("select",{className:"form-select","aria-label":"slot select",id:"slotName",name:"slotName",value:slot.slotName,onChange:function onChange(e){return atChangeNewBranchStory(e,slot.id,domain)},children:[(0,jsx_runtime.jsx)("option",{value:"",hidden:!0,disabled:!0,children:"請選擇記錄槽"}),Object.entries(domain.slots).map((function(item){return(0,jsx_runtime.jsx)("option",{value:item[0],children:item[0]},"".concat(slot.id,"-").concat(item[0]))}))]})]}),(0,jsx_runtime.jsxs)("div",{className:"mb-3 col-5",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"slotSelected",className:"form-label",children:"儲存槽"}),(0,jsx_runtime.jsxs)("select",{className:"form-select","aria-label":"slot select",id:"slotValue",name:"slotValue",value:slot.slotValue,onChange:function onChange(e){return atChangeNewBranchStory(e,slot.id)},disabled:!slot.hasSlotValues,children:[(0,jsx_runtime.jsx)("option",{value:"",hidden:!0,children:"請選擇儲存槽值"}),"categorical"===(null===(_domain$slots$slot$sl=domain.slots[slot.slotName])||void 0===_domain$slots$slot$sl?void 0:_domain$slots$slot$sl.type)&&domain.slots[slot.slotName].values.map((function(item){return(0,jsx_runtime.jsx)("option",{value:item,children:item},"".concat(slot.id,"-").concat(item))}))]})]}),(0,jsx_runtime.jsx)("div",{className:"mb-3 col-2 d-flex justify-content-center align-items-center",children:(0,jsx_runtime.jsx)(bs_index_esm.dnY,{className:UserStep_module_removeSlotValueIcon,onClick:function onClick(){return atRemoveSlotValue(slot.id)}})})]},slot.id)})),(0,jsx_runtime.jsx)("div",{className:"d-flex justify-content-center",children:(0,jsx_runtime.jsx)(index_esm.DFN,{className:UserStep_module_addSlotValueSelect,onClick:function onClick(){return atAddSlotValue()}})}),"main"===currentStep&&(0,jsx_runtime.jsxs)("div",{className:"mb-3 col-12",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"botResRadio",className:"form-label",children:"選擇回覆方式"}),(0,jsx_runtime.jsxs)("div",{className:"mb-3 col-12",children:[(0,jsx_runtime.jsxs)("div",{className:"form-check form-check-inline",children:[(0,jsx_runtime.jsx)("input",{className:"form-check-input",type:"radio",name:"resSelect",id:"botResRadio",value:"botRes",checked:"botRes"===resSelect,onChange:function onChange(e){return atChangeNewBranchStory(e)}}),(0,jsx_runtime.jsx)("label",{className:"form-check-label",htmlFor:"botResRadio",children:"機器人回覆"})]}),(0,jsx_runtime.jsxs)("div",{className:"form-check form-check-inline",children:[(0,jsx_runtime.jsx)("input",{className:"form-check-input",type:"radio",name:"resSelect",id:"branchStoryRadio",value:"branchStory",checked:"branchStory"===resSelect,onChange:function onChange(e){return atChangeNewBranchStory(e)}}),(0,jsx_runtime.jsx)("label",{className:"form-check-label",htmlFor:"branchStoryRadio",children:"串接支線故事"})]})]})]}),"botRes"===resSelect&&(0,jsx_runtime.jsxs)("div",{className:"mb-3",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"branchStoryName",className:"form-label",children:"機器人回覆"}),(0,jsx_runtime.jsx)("textarea",{className:"form-control",id:"response",name:"response",rows:4,placeholder:"請輸入機器人回覆",value:newBranchStory.botRes.response,onChange:function onChange(e){return atChangeNewBranchStory(e)}})]})]}),(0,jsx_runtime.jsxs)("div",{className:"modal-footer",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function onClick(){return atCancelCreateBranchStory(actions)},children:"取消"}),(0,jsx_runtime.jsx)("button",{className:"btn btn-primary",onClick:function onClick(){return atSubmitNewBranchStory(newBranchStory,stories,newStory,checkPointName)},children:"儲存"})]})]})})})]})]})})};UserStep.__docgenInfo={description:"",methods:[],displayName:"UserStep"};var UserStep_UserStep=react.memo(UserStep);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\UserStep\\UserStep.jsx"]={name:"UserStep",docgenInfo:UserStep.__docgenInfo,path:"src\\components\\UserStep\\UserStep.jsx"})},"./src/components/WebChatWidget/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return WebChatWidget_WebChatWidget}});var react=__webpack_require__("./node_modules/react/index.js"),rasa_webchat_module=__webpack_require__("./node_modules/rasa-webchat/module/index.js"),module_default=__webpack_require__.n(rasa_webchat_module),shallow=__webpack_require__("./node_modules/zustand/esm/shallow.js"),useStoryStore=__webpack_require__("./src/store/useStoryStore.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),WebChatWidget=function WebChatWidget(){var user=(0,useStoryStore.Z)((function(state){return{user:state.user}}),shallow.Z).user;return(0,jsx_runtime.jsx)("div",{onKeyDown:function handleKeyDown(event){if("Enter"===event.key)try{document.querySelector(".rw-send").click()}catch(e){console.log(e)}},children:(0,jsx_runtime.jsx)(module_default(),{interval:2e3,initPayload:"/get_started",socketUrl:"http://192.168.10.105:5005",socketPath:"/socket.io/",customData:{language:"zh",userId:user.cpnyId},profileAvatar:user.image,inputTextFieldHint:"請輸入內容....",title:user.chatbotName,params:{storage:"session"},showFullScreenButton:!0,showCloseButton:!0,showMessageDate:!0,mainColor:"#2d304c"})})};WebChatWidget.__docgenInfo={description:"",methods:[],displayName:"WebChatWidget"};var WebChatWidget_WebChatWidget=react.memo(WebChatWidget);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\WebChatWidget\\WebChatWidget.jsx"]={name:"WebChatWidget",docgenInfo:WebChatWidget.__docgenInfo,path:"src\\components\\WebChatWidget\\WebChatWidget.jsx"})},"./src/containers/Authenticate/index.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_store_useStoryStore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/store/useStoryStore.js"),Authenticate=function Authenticate(props){var children=props.children,user=(0,_store_useStoryStore__WEBPACK_IMPORTED_MODULE_1__.Z)((function(state){return state.user}));if(!user)return null;var child=children;return"function"==typeof children&&(child=children(user)),child};__webpack_exports__.Z=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(Authenticate)},"./src/services/api.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Fc:function(){return getJWTToken},Kd:function(){return loadedNewModel},U1:function(){return fetchRegister},WX:function(){return verifyToken},XB:function(){return fetchLogin},Y0:function(){return cleanToken},a:function(){return postAllTrainData},fu:function(){return postTrainDataToRasa},hZ:function(){return fetchRasaTrainState},pi:function(){return fetchAllData},yj:function(){return fetchAllAction}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/axios/index.js"),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),js_cookie__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/js-cookie/dist/js.cookie.mjs"),utils_swalInput__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/swalInput.js"),API_URL="http://192.168.10.103:3333/api",axiosInstance=axios__WEBPACK_IMPORTED_MODULE_0___default().create(),getJWTToken=function getJWTToken(){return js_cookie__WEBPACK_IMPORTED_MODULE_1__.Z.get("JWT_TOKEN")},cleanToken=function cleanToken(){js_cookie__WEBPACK_IMPORTED_MODULE_1__.Z.remove("JWT_TOKEN"),window.sessionStorage.clear(),delete axiosInstance.defaults.headers.authorization},verifyToken=function verifyToken(token){return axios__WEBPACK_IMPORTED_MODULE_0___default()("".concat(API_URL,"/auth"),{method:"GET",headers:{authorization:"Bearer ".concat(token)}}).then((function(_ref){var data=_ref.data.data;return axiosInstance.defaults.headers.authorization="Bearer ".concat(token),data})).catch((function(){return cleanToken(),Promise.reject()}))},fetchLogin=function fetchLogin(email,password){return axios__WEBPACK_IMPORTED_MODULE_0___default().post("".concat(API_URL,"/signin"),{email:email,password:password}).then((function(_ref2){var data=_ref2.data;return function setToken(token){js_cookie__WEBPACK_IMPORTED_MODULE_1__.Z.set("JWT_TOKEN",token),axiosInstance.defaults.headers.authorization="Bearer ".concat(token)}(data.token),data})).catch((function(_ref3){return _ref3.response.data}))},fetchRegister=function fetchRegister(userInfo){var formData=new FormData;return Object.entries(userInfo).forEach((function(_ref4){var _ref5=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_ref4,2),key=_ref5[0],value=_ref5[1];return"image"===key?formData.append(key,value[0]):formData.append(key,value)})),axios__WEBPACK_IMPORTED_MODULE_0___default().post("".concat(API_URL,"/signup"),formData,{headers:{"Content-type":"multipart/form-data"}}).then((function(_ref6){return _ref6.data})).catch((function(_ref7){var data=_ref7.response.data;utils_swalInput__WEBPACK_IMPORTED_MODULE_2__.FN.fire({icon:"error",title:"註冊失敗",text:data.message})}))},fetchAllData=function fetchAllData(){return axiosInstance.get("".concat(API_URL,"/train/allTrainData")).then((function(_ref8){return _ref8.data.data})).catch((function(err){utils_swalInput__WEBPACK_IMPORTED_MODULE_2__.FN.fire({icon:"error",title:err.response.data.message}).then((function(){cleanToken(),window.location.reload()}))}))},fetchAllAction=function fetchAllAction(){return axiosInstance.get("".concat(API_URL,"/stories/actions")).then((function(_ref9){return _ref9.data.data})).catch((function(_ref10){var data=_ref10.response.data;utils_swalInput__WEBPACK_IMPORTED_MODULE_2__.FN.fire({icon:"error",title:data.message}).then((function(){cleanToken(),window.location.reload()}))}))},postAllTrainData=function postAllTrainData(trainData){return axiosInstance.post("".concat(API_URL,"/train/allTrainData"),trainData).then((function(_ref11){return _ref11.data})).catch((function(_ref12){var data=_ref12.response.data;utils_swalInput__WEBPACK_IMPORTED_MODULE_2__.FN.fire({icon:"error",title:data.message}).then((function(){cleanToken(),window.location.reload()}))}))},fetchRasaTrainState=function fetchRasaTrainState(){return axios__WEBPACK_IMPORTED_MODULE_0___default().get("http://192.168.10.105:5005/status").then((function(_ref13){return _ref13.data.num_active_training_jobs})).catch((function(err){return console.log(err)}))},postTrainDataToRasa=function postTrainDataToRasa(currentData){return axios__WEBPACK_IMPORTED_MODULE_0___default()("http://192.168.10.105:5005/model/train?save_to_default_model_directory=true&force_training=true",{method:"POST",data:JSON.stringify(currentData),headers:{"content-Type":"application/json"}}).then((function(res){return res.headers.filename})).catch((function(err){return console.log(err)}))},loadedNewModel=function loadedNewModel(fileName){var payload={model_file:"/home/bill/Work/BF36_RASA_2.8.31_spacy/models/".concat(fileName)};return axios__WEBPACK_IMPORTED_MODULE_0___default()("http://192.168.10.105:5005/model",{method:"PUT",data:JSON.stringify(payload),headers:{"content-Type":"application/json"}}).then((function(res){return res})).catch((function(err){return console.log(err)}))}},"./src/store/useCreateStoryStore.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),zustand__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/zustand/esm/index.js"),actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/actions/index.js"),_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/swalInput.js"),initialState={newStory:{},currentStep:"",checkPointName:"",selectedBranchStory:{story:"",steps:[]},selectedConnectBranchStory:{story:"",steps:[]}},useCreateStoryStore=(0,zustand__WEBPACK_IMPORTED_MODULE_3__.ZP)((function(set){var dispatch=function dispatch(action){set((function(state){return function reducer(state,action){switch(action.type){case"CREATE_NEW_STORY":var storyName=action.payload;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:{story:storyName,steps:[]}});case"CREATE_STORY_CREATE_USER_STEP":var userSay=action.payload;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.concat([{user:userSay,intent:userSay,entities:[],examples:[]}])})});case"CREATE_STORY_EDIT_USER_SAY":var _action$payload=action.payload,oriUserSay=_action$payload.oriUserSay,_userSay=_action$payload.userSay,nlu=_action$payload.nlu,newStory=state.newStory,repeat=[];return nlu.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text===_userSay?repeat.push(_userSay):nluItem})),newStory.steps.map((function(step){return step.user===_userSay?repeat.push(_userSay):step})),repeat.length?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"使用者對話『".concat(_userSay,"』重複")}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.user===oriUserSay&&step.intent===oriUserSay?(step.user=_userSay,step.intent=_userSay):step.user=_userSay,step}))})});case"CREATE_STORY_EDIT_INTENT":var _action$payload2=action.payload,oriIntent=_action$payload2.oriIntent,intent=_action$payload2.intent,_nlu=_action$payload2.nlu,_newStory=state.newStory,_repeat=[];return _nlu.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.intent===intent?_repeat.push(intent):nluItem})),_newStory.steps.map((function(step){return step.intent===intent?_repeat.push(intent):step})),_repeat.length?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"意圖『".concat(intent,"』重複")}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.intent===oriIntent&&(step.intent=intent,step.examples.length&&step.examples.map((function(example){return example.intent=intent,example}))),step}))})});case"CREATE_STORY_CREATE_EXAMPLE":var _action$payload3=action.payload,_intent=_action$payload3.intent,example=_action$payload3.example,exampleEntities=_action$payload3.exampleEntities,_nlu2=_action$payload3.nlu,_newStory2=state.newStory,currentExample=example.trimStart().trimEnd(),_repeat2=[];return _nlu2.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text===currentExample?_repeat2.push(currentExample):nluItem})),_newStory2.steps.map((function(step){return step.intent&&(step.user===currentExample&&_repeat2.push(currentExample),step.examples.length&&step.examples.map((function(stepExample){return stepExample.text===currentExample&&_repeat2.push(currentExample),stepExample}))),step})),_repeat2.length?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({title:"以下例句重複",text:"".concat(_repeat2.toString()),icon:"warning"}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.intent===_intent&&(step.examples=step.examples.concat([{text:example,intent:_intent,entities:exampleEntities}])),step}))})});case"CREATE_STORY_DELETE_EXAMPLE":var _action$payload4=action.payload,_userSay2=_action$payload4.userSay,_intent2=_action$payload4.intent;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){if(step.intent&&step.intent===_intent2){var allExample=step.examples.map((function(example){return example.text}));step.examples.splice(allExample.indexOf(_userSay2),1)}return step}))})});case"CREATE_STORY_CREATE_ENTITIES":var _action$payload5=action.payload,entities=_action$payload5.entities,_intent3=_action$payload5.intent;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.intent===_intent3&&(step.entities.push(entities),step.entities.sort((function(a,b){return a.start-b.start}))),step}))})});case"CREATE_STORY_DELETE_ENTITIES":var _action$payload6=action.payload,entity=_action$payload6.entity,_intent4=_action$payload6.intent;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){if(step.intent===_intent4&&step.entities.length){var entitiesKeys=step.entities.map((function(item){return item.entity}));step.entities.splice(entitiesKeys.indexOf(entity),1)}return step}))})});case"CREATE_STORY_EDIT_ENTITY_SHOW_VALUE":var _action$payload7=action.payload,stepIntent=_action$payload7.stepIntent,entityValue=_action$payload7.entityValue,newEntityShowValue=_action$payload7.newEntityShowValue,_newStory3=state.newStory;return _newStory3.steps.some((function(step){return!(!step.intent||step.intent!==stepIntent)&&step.user.includes(newEntityShowValue)}))?_newStory3.steps.some((function(step){return!(!step.intent||!step.entities.length||step.intent!==stepIntent)&&step.entities.some((function(entityItem){return entityItem.value!==entityValue&&(entityItem.start<=step.user.indexOf(newEntityShowValue)&&step.user.indexOf(newEntityShowValue)<=entityItem.end-1||entityItem.start<=step.user.indexOf(newEntityShowValue)+newEntityShowValue.length-1&&step.user.indexOf(newEntityShowValue)+newEntityShowValue.length-1<=entityItem.end)}))}))?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"關鍵字不可重疊"}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.intent&&step.entities.length&&step.entities.map((function(entityItem){return entityItem.value===entityValue&&(entityItem.start=step.user.indexOf(newEntityShowValue),entityItem.end=step.user.indexOf(newEntityShowValue)+newEntityShowValue.length),entityItem})),step}))})}):_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"請填入正確的關鍵字"});case"CREATE_STORY_EDIT_ENTITY":var _action$payload8=action.payload,_stepIntent=_action$payload8.stepIntent,oriEntity=_action$payload8.oriEntity,newEntity=_action$payload8.newEntity;return state.newStory.steps.some((function(step){return!(!step.intent||step.intent!==_stepIntent)&&step.entities.some((function(item){return item.entity!==oriEntity&&item.entity===newEntity}))}))?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"同一個對話內關鍵字代表值不可重複"}):/^[0-9]*$/g.test(newEntity)?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"關鍵字代表值不可為純數字"}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.intent===_stepIntent&&(step.entities=step.entities.map((function(entityItem){return entityItem.entity===oriEntity&&(entityItem.entity=newEntity),entityItem}))),step}))})});case"CREATE_STORY_EDIT_ENTITY_VALUE":var _action$payload9=action.payload,_stepIntent2=_action$payload9.stepIntent,oriEntityValue=_action$payload9.oriEntityValue,newEntityValue=_action$payload9.newEntityValue;return state.newStory.steps.some((function(step){return!(!step.intent||step.intent!==_stepIntent2)&&step.entities.some((function(entityItem){return entityItem.value===newEntityValue}))}))?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"同一個對話內記憶槽代表值不可重複"}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.intent&&step.intent===_stepIntent2&&step.entities.map((function(entityItem){return entityItem.value===oriEntityValue&&(entityItem.value=newEntityValue),entityItem})),step}))})});case"CREATE_STORY_CREATE_BOT_STEP":var _action$payload10=action.payload,actionName=_action$payload10.actionName,botRes=_action$payload10.botRes;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.concat([{action:actionName,response:botRes}])})});case"CREATE_STORY_EDIT_BOT_RES":var _action$payload11=action.payload,oriBotRes=_action$payload11.oriBotRes,_botRes=_action$payload11.botRes,_actionName=_action$payload11.actionName;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.action&&step.action===_actionName&&step.response===oriBotRes&&(step.response=_botRes),step}))})});case"CREATE_STORY_REMOVE_USER_STEP":var _action$payload12=action.payload,_intent5=_action$payload12.intent,_userSay3=_action$payload12.userSay;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.filter((function(step){return step.intent!==_intent5&&step.user!==_userSay3}))})});case"CREATE_STORY_REMOVE_BOT_STEP":var _actionName2=action.payload;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.filter((function(step){return step.action!==_actionName2}))})});case"CREATE_STORY_ADD_RES_BUTTONS":var _action$payload13=action.payload,_actionName3=_action$payload13.actionName,title=_action$payload13.title,payload=_action$payload13.payload,reply=_action$payload13.reply,stories=_action$payload13.stories,_newStory6=state.newStory,isInStory=stories.some((function(item){return item.story==="button_".concat(title)}));return _newStory6.steps.some((function(step){var _step$buttons;return step.action===_actionName3&&(null===(_step$buttons=step.buttons)||void 0===_step$buttons?void 0:_step$buttons.some((function(button){return button.title===title})))}))||isInStory?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"此選項已存在"}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.action===_actionName3&&(step.buttons?step.buttons=step.buttons.concat([{title:title,payload:payload,reply:reply}]):step.buttons=[{title:title,payload:payload,reply:reply}]),step}))})});case"CREATE_STORY_EDIT_RES_BUTTONS":var _action$payload14=action.payload,_actionName4=_action$payload14.actionName,_title=_action$payload14.title,oriPayload=_action$payload14.oriPayload,_payload=_action$payload14.payload,_reply=_action$payload14.reply,_stories=_action$payload14.stories,_newStory7=state.newStory,_isInStory=_stories.some((function(item){return item.story==="button_".concat(_title)}));return _newStory7.steps.some((function(step){var _step$buttons2;return step.action===_actionName4&&(null===(_step$buttons2=step.buttons)||void 0===_step$buttons2?void 0:_step$buttons2.some((function(button){return button.title===_title})))}))||_isInStory?_utils_swalInput__WEBPACK_IMPORTED_MODULE_0__.FN.fire({icon:"warning",title:"此選項已存在"}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.action===_actionName4&&step.buttons.map((function(button){return button.payload===oriPayload&&(button.title=_title,button.payload=_payload,button.reply=_reply),button})),step}))})});case"CREATE_STORY_REMOVE_RES_BUTTON":var _action$payload15=action.payload,_actionName5=_action$payload15.actionName,_payload2=_action$payload15.payload;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.action===_actionName5&&(step.buttons=step.buttons.filter((function(button){return button.payload!==_payload2}))),step}))})});case"CREATE_STORY_CREATE_BRANCH_STORY":var newBranchStory=action.payload,_newStory8=state.newStory;return _newStory8.steps.some((function(step){return step.checkpoint}))?newBranchStory.botRes?(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.concat([{story:"".concat(_newStory8.story,"_").concat(newBranchStory.branchName),steps:[{checkpoint:"".concat(_newStory8.story,"_主線")},{slot_was_set:newBranchStory.slotValues.map((function(item){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},item.slotName,item.slotValue)}))},{action:newBranchStory.botRes.action,response:newBranchStory.botRes.response}]}])),step}))})}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.concat([{story:"".concat(_newStory8.story,"_").concat(newBranchStory.branchName),steps:[{checkpoint:"".concat(_newStory8.story,"_主線")},{slot_was_set:newBranchStory.slotValues.map((function(item){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},item.slotName,item.slotValue)}))}]}])),step}))})}):newBranchStory.botRes?(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.concat([{checkpoint:"".concat(_newStory8.story,"_主線"),branchStories:[{story:"".concat(_newStory8.story,"_").concat(newBranchStory.branchName),steps:[{checkpoint:"".concat(_newStory8.story,"_主線")},{slot_was_set:newBranchStory.slotValues.map((function(item){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},item.slotName,item.slotValue)}))},{action:newBranchStory.botRes.action,response:newBranchStory.botRes.response}]}]}])})}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.concat([{checkpoint:"".concat(_newStory8.story,"_主線"),branchStories:[{story:"".concat(_newStory8.story,"_").concat(newBranchStory.branchName),steps:[{checkpoint:"".concat(_newStory8.story,"_主線")},{slot_was_set:newBranchStory.slotValues.map((function(item){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},item.slotName,item.slotValue)}))}]}]}])})});case"CREATE_STORY_DELETE_BRANCH_STORY":var _action$payload16=action.payload,checkPointName=_action$payload16.checkPointName,branchName=_action$payload16.branchName;console.log("checkPointName:",checkPointName),console.log("branchName:",branchName);var steps=state.newStory.steps.map((function(step){return step.checkpoint&&step.checkpoint===checkPointName&&(step.branchStories=step.branchStories.filter((function(branchStory){return branchStory.story!==branchName}))),step}));return console.log("before steps:",steps),steps=steps.filter((function(step){return step.checkpoint?step.branchStories.length>0:step})),console.log("after steps:",steps),(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:steps})});case"CHECK_POINT_CONNECT_BRANCH_STORY":var _action$payload17=action.payload,_newStory10=_action$payload17.newStory,_newBranchStory=_action$payload17.newBranchStory,_checkPointName=state.checkPointName;return _newStory10.steps.some((function(step){return!!step.checkpoint&&step.branchStories.some((function(branchStory){return branchStory.story===_checkPointName&&branchStory.steps.some((function(branchStep,idx){return 0!==idx&&branchStep.checkpoint}))}))}))?_newBranchStory.botRes?(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.map((function(branchStory){return branchStory.story===_checkPointName&&(console.log("branchStory ===============>",branchStory),branchStory.steps.map((function(branchStep,idx){return 0!==idx&&branchStep.checkpoint&&branchStep.checkpoint.slice(0,branchStep.checkpoint.lastIndexOf("_"))===_checkPointName&&(branchStep.branchStories=branchStep.branchStories.concat([{story:"".concat(_checkPointName,"_").concat(_newBranchStory.branchName),steps:[{checkpoint:"".concat(_checkPointName,"_主線")},{slot_was_set:_newBranchStory.slotValues.map((function(item){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},item.slotName,item.slotValue)}))},{action:_newBranchStory.botRes.action,response:_newBranchStory.botRes.response}]}])),branchStep}))),branchStory}))),step}))})}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.map((function(branchStory){return branchStory.story===_checkPointName&&branchStory.steps.map((function(branchStep){return branchStep.checkpoint&&branchStep.checkpoint.slice(0,branchStep.checkpoint.lastIndexOf("_"))===_checkPointName&&(branchStep.branchStories=branchStep.branchStories.concat([{story:"".concat(_checkPointName,"_").concat(_newBranchStory.branchName),steps:[{checkpoint:"".concat(_checkPointName,"_主線")},{slot_was_set:_newBranchStory.slotValues.map((function(item){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},item.slotName,item.slotValue)}))}]}])),branchStep})),branchStory}))),step}))})}):_newBranchStory.botRes?(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.map((function(branchStory){return branchStory.story===_checkPointName&&(branchStory.steps=branchStory.steps.concat([{checkpoint:"".concat(_checkPointName,"_主線"),branchStories:[{story:"".concat(_checkPointName,"_").concat(_newBranchStory.branchName),steps:[{checkpoint:"".concat(_checkPointName,"_主線")},{slot_was_set:_newBranchStory.slotValues.map((function(item){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},item.slotName,item.slotValue)}))},{action:_newBranchStory.botRes.action,response:_newBranchStory.botRes.response}]}]}])),branchStory}))),step}))})}):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.map((function(branchStory){return branchStory.story===_checkPointName&&(branchStory.steps=branchStory.steps.concat([{checkpoint:"".concat(_checkPointName,"_主線"),branchStories:[{story:"".concat(_checkPointName,"_").concat(_newBranchStory.branchName),steps:[{checkpoint:"".concat(_checkPointName,"_主線")},{slot_was_set:_newBranchStory.slotValues.map((function(item){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},item.slotName,item.slotValue)}))}]}]}])),branchStory}))),step}))})});case"CHECK_POINT_DELETE_CONNECT_BRANCH_STORY":var _action$payload18=action.payload,_checkPointName2=_action$payload18.checkPointName,_branchName=_action$payload18.branchName,_steps=state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.map((function(branchStory){return branchStory.story===_checkPointName2.slice(0,_checkPointName2.lastIndexOf("_"))&&branchStory.steps.map((function(branchStep){return branchStep.checkpoint&&branchStep.checkpoint===_checkPointName2&&(branchStep.branchStories=branchStep.branchStories.filter((function(item){return item.story!==_branchName}))),branchStep})),branchStory}))),step}));return _steps=_steps.map((function(step){return step.checkpoint&&step.branchStories.map((function(branchStory){return branchStory.story===_checkPointName2.slice(0,_checkPointName2.lastIndexOf("_"))&&(branchStory.steps=branchStory.steps.filter((function(branchStep,idx){return 0!==idx&&branchStep.checkpoint?branchStep.branchStories.length>0:branchStep}))),branchStory})),step})),(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:_steps})});case"CREATE_STORY_BRANCH_STORY_EDIT_BOT_RES":var _action$payload19=action.payload,_oriBotRes=_action$payload19.oriBotRes,_botRes2=_action$payload19.botRes,_actionName6=_action$payload19.actionName,_checkPointName3=_action$payload19.checkPointName;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.map((function(branchStory){return branchStory.story===_checkPointName3&&(branchStory.steps=branchStory.steps.map((function(branchStep){return branchStep.action===_actionName6&&branchStep.response===_oriBotRes&&(branchStep.response=_botRes2),branchStep}))),branchStory}))),step}))})});case"CREATE_STORY_CONNECT_STORY_EDIT_BOT_RES":var _action$payload20=action.payload,_oriBotRes2=_action$payload20.oriBotRes,_botRes3=_action$payload20.botRes,_actionName7=_action$payload20.actionName,_checkPointName4=_action$payload20.checkPointName,connectStoryName=_action$payload20.connectStoryName;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{newStory:(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state.newStory),{},{steps:state.newStory.steps.map((function(step){return step.checkpoint&&(step.branchStories=step.branchStories.map((function(branchStory){return branchStory.story===_checkPointName4&&(branchStory.steps=branchStory.steps.map((function(branchStep,idx){return 0!==idx&&branchStep.checkpoint&&(branchStep.branchStories=branchStep.branchStories.map((function(connectStory){return connectStory.story===connectStoryName&&(connectStory.steps=connectStory.steps.map((function(connectStep){return connectStep.action===_actionName7&&connectStep.response===_oriBotRes2&&(connectStep.response=_botRes3),connectStep}))),connectStory}))),branchStep}))),branchStory}))),step}))})});default:return state}}(state,action)}))};return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},initialState),{},{onInitialNewStory:function onInitialNewStory(){set({newStory:{}})},onSetBranchStep:function onSetBranchStep(){set({currentStep:"branchStory"})},onSetMainStep:function onSetMainStep(){set({currentStep:"main"})},onSetCheckPointName:function onSetCheckPointName(checkPointName){set({checkPointName:checkPointName})},onSetSelectedBranchStory:function onSetSelectedBranchStory(selectedBranchStory){set({selectedBranchStory:selectedBranchStory})},onSetSelectedConnectBranchStory:function onSetSelectedConnectBranchStory(selectedConnectBranchStory){set({selectedConnectBranchStory:selectedConnectBranchStory})},onCreateNewStory:function onCreateNewStory(storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.BI)(storyName))},onCreateUserStep:function onCreateUserStep(userSay){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.oQ)(userSay))},onEditUserSay:function onEditUserSay(oriUserSay,userSay,storyName,nlu){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.Ww)(oriUserSay,userSay,storyName,nlu))},onEditIntent:function onEditIntent(oriIntent,intent,storyName,nlu){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.G4)(oriIntent,intent,storyName,nlu))},onCreateExample:function onCreateExample(intent,example,exampleEntities,storyName,nlu){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.bY)(intent,example,exampleEntities,storyName,nlu))},onDeleteExample:function onDeleteExample(userSay,intent){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.Cg)(userSay,intent))},onCreateEntities:function onCreateEntities(entities,intent){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.el)(entities,intent))},onDeleteEntities:function onDeleteEntities(entity,intent){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.LZ)(entity,intent))},onEditEntityShowValue:function onEditEntityShowValue(stepIntent,entityValue,newEntityShowValue){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.Yw)(stepIntent,entityValue,newEntityShowValue))},onEditEntity:function onEditEntity(stepIntent,oriEntity,newEntity){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.QE)(stepIntent,oriEntity,newEntity))},onEditEntityValue:function onEditEntityValue(stepIntent,oriEntityValue,newEntityValue){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.Q)(stepIntent,oriEntityValue,newEntityValue))},onCreateBotStep:function onCreateBotStep(actionName,botRes){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.Ot)(actionName,botRes))},onEditBotRes:function onEditBotRes(oriBotRes,botRes,actionName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.d$)(oriBotRes,botRes,actionName))},onRemoveUserStep:function onRemoveUserStep(intent,userSay){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.lg)(intent,userSay))},onRemoveBotStep:function onRemoveBotStep(actionName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.in)(actionName))},onAddResButtons:function onAddResButtons(actionName,title,payload,reply,storyName,stories){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.sG)(actionName,title,payload,reply,storyName,stories))},onEditResButtons:function onEditResButtons(actionName,title,oriPayload,payload,reply,storyName,buttonActionName,stories){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.Wq)(actionName,title,oriPayload,payload,reply,storyName,buttonActionName,stories))},onRemoveResButton:function onRemoveResButton(actionName,payload){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.QY)(actionName,payload))},onCreateBranchStory:function onCreateBranchStory(newBranchStory){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.au)(newBranchStory))},onDeleteBranchStory:function onDeleteBranchStory(checkPointName,branchName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.vD)(checkPointName,branchName))},onConnectBranchStory:function onConnectBranchStory(newStory,newBranchStory){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.oG)(newStory,newBranchStory))},onDeleteConnectBranchStory:function onDeleteConnectBranchStory(checkPointName,branchName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.t6)(checkPointName,branchName))},onEditBranchStoryBotRes:function onEditBranchStoryBotRes(oriBotRes,botRes,actionName,storyName,checkPointName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.q4)(oriBotRes,botRes,actionName,storyName,checkPointName))},onEditConnectStoryBotRes:function onEditConnectStoryBotRes(oriBotRes,botRes,actionName,storyName,checkPointName,connectStoryName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_4__.AM)(oriBotRes,botRes,actionName,storyName,checkPointName,connectStoryName))}})}));__webpack_exports__.Z=useCreateStoryStore},"./src/store/useStoryStore.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),zustand__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/zustand/esm/index.js"),services_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/services/api.js"),actions__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/actions/index.js"),utils_swalInput__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/swalInput.js"),lodash_es__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lodash-es/cloneDeep.js"),utils_randomBotResAction__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/randomBotResAction.js"),initialState={isAppInitializedComplete:!1,user:null,loading:!1,stories:[],story:{},nlu:{},config:{},domain:{},cloneData:{stories:{},nlu:{},domain:{}},deletedStory:{},actions:[],storiesOptions:[],rasaTrainState:1,currentPage:null},useStoryStore=(0,zustand__WEBPACK_IMPORTED_MODULE_7__.ZP)((function(set){var dispatch=function dispatch(action){set((function(state){return function reducer(state,action){switch(action.type){case"SET_ALL_TRAIN_DATA":if(action.payload){var _action$payload=action.payload,stories=_action$payload.stories,domain=_action$payload.domain,nlu=_action$payload.nlu,filteredStories=stories.filter((function(item){return!item.story.includes("button_")&&!item.steps[0].checkpoint}));return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state),action.payload),{},{storiesOptions:filteredStories,cloneData:(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)({stories:stories,nlu:nlu,domain:domain})})}return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state);case"SET_STORY":var storyName=action.payload;if(!storyName)return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state),{},{story:{}});var _cloneDeep=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_domain=_cloneDeep.domain,_nlu=_cloneDeep.nlu,_stories=_cloneDeep.stories,story=_stories.filter((function(item){return item.story===storyName}))[0];return story.steps.map((function(step){if(step.action){step.response=JSON.parse(JSON.stringify(_domain.responses[step.action][0].text).replace(/ \\n/g,"\\r"));var botRes=_domain.responses[step.action][0];if(botRes.buttons){var buttons=[],buttonStory=[],intent="";botRes.buttons.map((function(button){return intent=button.payload.replace(/\//g,""),_stories.map((function(item){return item.story==="button_".concat(intent)?buttonStory.push(item):item.steps.map((function(buttonStep){return buttonStep.intent&&buttonStep.intent===intent&&(item.intentStory=!0,buttonStory.push(item)),buttonStep})),item}))})),buttonStory.map((function(item){var button={};return item.steps.map((function(itemStep){return item.intentStory&&(button.disabled=!0),itemStep.action&&(button.buttonAction=itemStep.action),itemStep.intent&&(button.title=itemStep.intent,button.payload=itemStep.intent),itemStep})),delete item.intentStory,buttons.push(button)})),buttons.map((function(curButton){return curButton.reply=JSON.parse(JSON.stringify(_domain.responses[curButton.buttonAction][0].text).replace(/ \\n/g,"\\r")),curButton})),step.buttons=buttons}}if(step.intent){var examples=_nlu.rasa_nlu_data.common_examples.filter((function(nluItem){return nluItem.intent===step.intent&&nluItem.text!==step.user}));step.examples=examples}if(step.checkpoint){var branchStories=[];_stories.map((function(item){return item.steps.map((function(branchStep){return item.story!==storyName&&branchStep.checkpoint===step.checkpoint&&(console.log("set story branch step =====>",branchStep),branchStories.push(item)),branchStep}))})),branchStories.map((function(branchStory){return branchStory.steps.map((function(branchStep,idx){if(branchStep.action&&(branchStep.response=JSON.parse(JSON.stringify(_domain.responses[branchStep.action][0].text).replace(/ \\n/g,"\\r"))),0!==idx&&branchStep.checkpoint){console.log("set story branchStep =====>",branchStep);var connectBranchStories=[];_stories.map((function(item){return item.steps.map((function(connectStep,connectStepIdx){return 2!==connectStepIdx&&connectStep.checkpoint===branchStep.checkpoint&&(console.log("set story connect branch story ====>",item),connectBranchStories.push(item)),connectStep}))})),connectBranchStories.map((function(currentConnectStory){return currentConnectStory.steps.map((function(connectStep){return connectStep.action&&(connectStep.response=JSON.parse(JSON.stringify(_domain.responses[connectStep.action][0].text).replace(/ \\n/g,"\\r"))),connectStep}))})),branchStep.branchStories=connectBranchStories}return branchStep}))})),step.branchStories=branchStories}return step})),(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state),{},{story:story});case"EDIT_USER_SAY":var repeat=[],onSetAllTrainData=state.onSetAllTrainData,onSetStory=state.onSetStory,_action$payload2=action.payload,oriWord=_action$payload2.oriWord,newWord=_action$payload2.newWord,_storyName=_action$payload2.storyName,_cloneDeep2=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories2=_cloneDeep2.stories,_domain2=_cloneDeep2.domain,_nlu2=_cloneDeep2.nlu,newUserSay=newWord.trim();if(_nlu2.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text===newUserSay?repeat.push(newUserSay):nluItem})),repeat.length)return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"使用者對話『".concat(newUserSay,"』重複")});_stories2.map((function(item){return item.story===_storyName&&item.steps.map((function(step){return step.user===oriWord&&(step.user=newUserSay),step})),item})),_nlu2.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text===oriWord&&(nluItem.text=newUserSay),nluItem}));var cloneData={stories:_stories2,domain:_domain2,nlu:_nlu2};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(cloneData).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"編輯使用者對話失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"編輯使用者對話成功"}),onSetAllTrainData(res.data),onSetStory(_storyName))}));case"EDIT_BOT_RESPONSE":var _action$payload3=action.payload,_oriWord=_action$payload3.oriWord,_newWord=_action$payload3.newWord,actionName=_action$payload3.actionName,_storyName2=_action$payload3.storyName,_onSetStory=state.onSetStory,_onSetAllTrainData=state.onSetAllTrainData,_domain3=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData).domain;state.cloneData.domain.responses[actionName]&&state.cloneData.domain.responses[actionName][0].text===JSON.parse(JSON.stringify(_oriWord).replace(/ \\n/g,"  \\n"))&&(_domain3.responses[actionName][0].text=JSON.parse(JSON.stringify(_newWord).replace(/\\n/g,"  \\n")));var _cloneData=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state.cloneData),{},{domain:_domain3});return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"編輯機器人回覆失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"編輯機器人回覆成功"}),_onSetAllTrainData(res.data),_onSetStory(_storyName2))}));case"CREATE_EXAMPLE":var _action$payload4=action.payload,stepIntent=_action$payload4.stepIntent,example=_action$payload4.example,exampleEntities=_action$payload4.exampleEntities,_storyName3=_action$payload4.storyName,_cloneDeep4=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories3=_cloneDeep4.stories,_nlu3=_cloneDeep4.nlu,_domain4=_cloneDeep4.domain,_onSetStory2=state.onSetStory,_onSetAllTrainData2=state.onSetAllTrainData,currentExamples=example.trimStart().trimEnd(),_repeat=[];if(_nlu3.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text===currentExamples?_repeat.push(currentExamples):nluItem})),_repeat.length)return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({title:"以下例句重複",text:"".concat(_repeat.toString()),icon:"warning"});_nlu3.rasa_nlu_data.common_examples.push({text:currentExamples,intent:stepIntent,entities:exampleEntities});var _cloneData2={stories:_stories3,nlu:_nlu3,domain:_domain4};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData2).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"編輯使用者例句失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"編輯使用者例句成功"}),_onSetAllTrainData2(res.data),_onSetStory2(_storyName3))}));case"SET_DELETE_STORY":return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state),{},{deletedStory:action.payload});case"SET_ALL_ACTION":return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state),{},{actions:action.payload});case"EDIT_RES_BUTTONS":var _action$payload5=action.payload,_actionName=_action$payload5.actionName,title=_action$payload5.title,oriPayload=_action$payload5.oriPayload,payload=_action$payload5.payload,reply=_action$payload5.reply,_storyName4=_action$payload5.storyName,buttonActionName=_action$payload5.buttonActionName,_onSetAllTrainData3=state.onSetAllTrainData,_onSetStory3=state.onSetStory,curOriPayload=oriPayload.replace(/\//g,""),_cloneData3=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state.cloneData);if(_cloneData3.domain.intents.includes(title)&&title!==curOriPayload)return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"意圖『".concat(title,"』重複")});var isButton=_cloneData3.stories.some((function(item){return item.steps.some((function(step){return!(step.intent!==curOriPayload||!item.story.includes("button_"))}))})),currentReply=JSON.parse(JSON.stringify(reply).replace(/\\r\\n/g,"  \\n"));if(title!==curOriPayload){var _stories4=_cloneData3.stories.map((function(item){return isButton?item.story==="button_".concat(curOriPayload)&&(item.story="button_".concat(title),item.steps.map((function(step){return step.intent&&(step.user=title,step.intent=title),step}))):item.steps.map((function(step){return step.intent===curOriPayload&&(step.intent=title),step})),item})),_nlu4={rasa_nlu_data:{common_examples:_cloneData3.nlu.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.intent===curOriPayload&&(isButton?(nluItem.text=title,nluItem.intent=title):nluItem.intent=title),nluItem}))}},_domain6=_cloneData3.domain;_domain6.responses[_actionName][0].buttons.map((function(button){return button.payload===oriPayload&&(button.title=title,button.payload="".concat(payload)),button}));var intentIdx=_domain6.intents.indexOf(curOriPayload);_domain6.intents.splice(intentIdx,1,title),_cloneData3.stories=_stories4,_cloneData3.nlu=_nlu4,_cloneData3.domain=_domain6}var _domain5=_cloneData3.domain;return _domain5.responses[buttonActionName][0].text!==currentReply&&(_domain5.responses[buttonActionName][0].text=currentReply),_cloneData3.domain=_domain5,title!==curOriPayload||state.domain.responses[buttonActionName][0].text!==currentReply?(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData3).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"編輯按鈕選項失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"編輯按鈕選項成功"}),_onSetAllTrainData3(res.data),_onSetStory3(_storyName4))})):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state);case"REMOVE_RES_BUTTON":var _action$payload6=action.payload,_actionName2=_action$payload6.actionName,_payload=_action$payload6.payload,_storyName5=_action$payload6.storyName,_buttonActionName=_action$payload6.buttonActionName,disabled=_action$payload6.disabled,_onSetAllTrainData4=state.onSetAllTrainData,_onSetStory4=state.onSetStory,_cloneData4=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state.cloneData);if(disabled){var _buttonTexts=_cloneData4.domain.responses[_actionName2][0].buttons.map((function(button){return button.title}));_cloneData4.domain.responses[_actionName2][0].buttons.splice(_buttonTexts.indexOf(_payload),1)}else{var storyNames=_cloneData4.stories.map((function(item){return item.story}));_cloneData4.stories.splice(storyNames.indexOf("button_".concat(_payload)),1);var nluItems=_cloneData4.nlu.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text}));_cloneData4.nlu.rasa_nlu_data.common_examples.splice(nluItems.indexOf(_payload),1),delete _cloneData4.domain.responses[_buttonActionName];var buttonTexts=_cloneData4.domain.responses[_actionName2][0].buttons.map((function(button){return button.title}));_cloneData4.domain.responses[_actionName2][0].buttons.splice(buttonTexts.indexOf(_payload),1),_cloneData4.domain.actions.splice(_cloneData4.domain.actions.indexOf(_buttonActionName),1),_cloneData4.domain.intents.splice(_cloneData4.domain.intents.indexOf(_payload),1)}return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData4).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"刪除按鈕選項失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"刪除按鈕選項成功"}),_onSetAllTrainData4(res.data),_onSetStory4(_storyName5))}));case"ADD_RES_BUTTONS":var _action$payload7=action.payload,_actionName3=_action$payload7.actionName,_title=_action$payload7.title,_payload2=_action$payload7.payload,_reply=_action$payload7.reply,_storyName6=_action$payload7.storyName,_onSetAllTrainData5=state.onSetAllTrainData,_onSetStory5=state.onSetStory,_cloneData5=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state.cloneData),_stories5=_cloneData5.stories,_nlu5=_cloneData5.nlu,_domain7=_cloneData5.domain,intentStory=[];_stories5.map((function(item){return item.steps.map((function(step){return step.intent===_title&&item.story!=="button_".concat(_title)?intentStory.push(item):step}))}));var isExist=_stories5.some((function(item){return item.story==="button_".concat(_title)}));if(intentStory.length)_domain7.responses[_actionName3][0].buttons?_domain7.responses[_actionName3][0].buttons.push({title:_title,payload:_payload2}):_domain7.responses[_actionName3][0].buttons=[{title:_title,payload:_payload2}],_cloneData5.domain=_domain7;else{if(isExist)utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"此按鈕已存在"});else{var _buttonActionName2=(0,utils_randomBotResAction__WEBPACK_IMPORTED_MODULE_4__.r)(state.actions);_stories5.push({story:"button_".concat(_title),steps:[{user:_title,intent:_title,entities:[]},{action:_buttonActionName2}]}),_nlu5.rasa_nlu_data.common_examples.push({text:_title,intent:_title,entities:[]}),_domain7.responses[_actionName3][0].buttons?_domain7.responses[_actionName3][0].buttons.push({title:_title,payload:_payload2}):_domain7.responses[_actionName3][0].buttons=[{title:_title,payload:_payload2}],_domain7.actions.push(_buttonActionName2),_domain7.responses[_buttonActionName2]=[{text:_reply}],_domain7.intents.push(_title)}_cloneData5.stories=_stories5,_cloneData5.nlu=_nlu5,_cloneData5.domain=_domain7}return intentStory.length||!isExist?(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData5).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"新增按鈕選項失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"新增按鈕選項成功"}),_onSetAllTrainData5(res.data),_onSetStory5(_storyName6))})):(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state);case"SET_RASA_TRAIN_STATE":return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},state),{},{rasaTrainState:action.payload});case"EDIT_INTENT":var _action$payload8=action.payload,oriIntent=_action$payload8.oriIntent,intent=_action$payload8.intent,_storyName7=_action$payload8.storyName,_cloneDeep5=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories6=_cloneDeep5.stories,_nlu6=_cloneDeep5.nlu,_domain8=_cloneDeep5.domain,_onSetStory6=state.onSetStory,_onSetAllTrainData6=state.onSetAllTrainData;if(_domain8.intents.includes(intent))return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"意圖『".concat(intent,"』重複")});_stories6.map((function(item){return item.story===_storyName7&&item.steps.map((function(step){return step.intent===oriIntent&&(step.intent=intent),step})),item})),_nlu6.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.intent===oriIntent&&(nluItem.intent=intent),nluItem})),_domain8.intents.splice(_domain8.intents.indexOf(oriIntent),1,intent);var responses=Object.entries(_domain8.responses),_actionName4="";responses.some((function(response){return response[1].some((function(item){var _item$buttons;return null===(_item$buttons=item.buttons)||void 0===_item$buttons?void 0:_item$buttons.some((function(button){if(button.title===oriIntent){var _response=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(response,1);return _actionName4=_response[0],!0}return!1}))}))}))&&_domain8.responses[_actionName4][0].buttons.map((function(button){return button.title===oriIntent&&(button.title=intent,button.payload="/".concat(intent)),button}));var _cloneData6={stories:_stories6,domain:_domain8,nlu:_nlu6};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData6).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"編輯意圖失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"編輯意圖成功"}),_onSetAllTrainData6(res.data),_onSetStory6(_storyName7))}));case"CREATE_ENTITIES":var _action$payload9=action.payload,entities=_action$payload9.entities,_intent=_action$payload9.intent,_storyName8=_action$payload9.storyName,_cloneDeep6=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories7=_cloneDeep6.stories,_nlu7=_cloneDeep6.nlu,_domain9=_cloneDeep6.domain,_onSetStory7=state.onSetStory,_onSetAllTrainData7=state.onSetAllTrainData,userSay="";_stories7.map((function(item){return item.story===_storyName8&&item.steps.map((function(step){return step.intent===_intent&&(userSay=step.user,step.entities.push((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_6__.Z)({},entities.entity,entities.value))),step})),item})),_nlu7.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text===userSay&&nluItem.intent===_intent&&nluItem.entities.push(entities),nluItem})),_domain9.entities.includes(entities.entity)||_domain9.entities.push(entities.entity);var _cloneData7={stories:_stories7,nlu:_nlu7,domain:_domain9};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData7).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"新增關鍵字失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"新增關鍵字成功"}),_onSetAllTrainData7(res.data),_onSetStory7(_storyName8))}));case"DELETE_ENTITIES":var _action$payload10=action.payload,entity=_action$payload10.entity,_intent2=_action$payload10.intent,_storyName9=_action$payload10.storyName,_cloneDeep7=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories8=_cloneDeep7.stories,_nlu8=_cloneDeep7.nlu,_domain10=_cloneDeep7.domain,_onSetStory8=state.onSetStory,_onSetAllTrainData8=state.onSetAllTrainData,_userSay="",_isExist=!1;_stories8.map((function(item){return item.story===_storyName9?item.steps.map((function(step){if(step.intent===_intent2&&step.entities.length){_userSay=step.user;var entitiesKeys=step.entities.map((function(entityItem){return Object.keys(entityItem)[0]}));step.entities.splice(entitiesKeys.indexOf(entity),1)}return step})):item.steps.map((function(step){if(step.intent&&step.entities.length){var entitiesKeys=step.entities.map((function(entityItem){return Object.keys(entityItem)[0]}));_isExist=entitiesKeys.includes(entity)}return step})),item})),_nlu8.rasa_nlu_data.common_examples.map((function(nluItem){if(nluItem.text===_userSay&&nluItem.intent===_intent2){var entitiesKeys=nluItem.entities.map((function(entityItem){return entityItem.entity}));nluItem.entities.splice(entitiesKeys.indexOf(entity),1)}else if(nluItem.entities.length){var _entitiesKeys=nluItem.entities.map((function(entityItem){return entityItem.entity}));_isExist=_entitiesKeys.includes(entity)}return nluItem})),_isExist||_domain10.entities.splice(_domain10.entities.indexOf(entity),1);var _cloneData8={stories:_stories8,nlu:_nlu8,domain:_domain10};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData8).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"刪除關鍵字失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"刪除關鍵字成功"}),_onSetAllTrainData8(res.data),_onSetStory8(_storyName9))}));case"EDIT_ENTITY_SHOW_VALUE":var _userSay2,_action$payload11=action.payload,_stepIntent=_action$payload11.stepIntent,currentEntityValue=_action$payload11.currentEntityValue,newEntityShowValue=_action$payload11.newEntityShowValue,_storyName10=_action$payload11.storyName,_cloneDeep8=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories9=_cloneDeep8.stories,_nlu9=_cloneDeep8.nlu,_domain11=_cloneDeep8.domain,_onSetStory9=state.onSetStory,_onSetAllTrainData9=state.onSetAllTrainData;if(!_stories9.some((function(item){return item.story===_storyName10&&item.steps.some((function(step){return!(!step.intent||step.intent!==_stepIntent)&&(_userSay2=step.user,step.user.includes(newEntityShowValue))}))})))return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"請填入正確的關鍵字"});if(_nlu9.rasa_nlu_data.common_examples.some((function(nluItem){return nluItem.intent===_stepIntent&&nluItem.text===_userSay2&&nluItem.entities.some((function(entityItem){if(entityItem.value!==currentEntityValue){var entityItemStart=entityItem.start,entityItemEnd=entityItem.end,newEntityShowValueStart=_userSay2.indexOf(newEntityShowValue),newEntityShowValueEnd=newEntityShowValueStart+newEntityShowValue.length;return entityItemStart<=newEntityShowValueStart&&newEntityShowValueStart<entityItemEnd||entityItemStart<newEntityShowValueEnd&&newEntityShowValueEnd<=entityItemEnd}return!1}))})))return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"關鍵字不可重疊"});_nlu9.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.intent===_stepIntent&&nluItem.text===_userSay2&&nluItem.entities.map((function(entityItem){return entityItem.value===currentEntityValue&&(entityItem.start=_userSay2.indexOf(newEntityShowValue),entityItem.end=_userSay2.indexOf(newEntityShowValue)+newEntityShowValue.length),entityItem})),nluItem}));var _cloneData9={stories:_stories9,nlu:_nlu9,domain:_domain11};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData9).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"編輯關鍵字失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"編輯關鍵字成功"}),_onSetAllTrainData9(res.data),_onSetStory9(_storyName10))}));case"EDIT_ENTITY":var _action$payload12=action.payload,_stepIntent2=_action$payload12.stepIntent,oriEntity=_action$payload12.oriEntity,newEntity=_action$payload12.newEntity,_storyName11=_action$payload12.storyName,_cloneDeep9=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories10=_cloneDeep9.stories,_nlu10=_cloneDeep9.nlu,_domain12=_cloneDeep9.domain,_onSetStory10=state.onSetStory,_onSetAllTrainData10=state.onSetAllTrainData;if(/^[0-9]*$/g.test(newEntity))return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"關鍵字代表值不可為純數字"});if(_stories10.some((function(item){return item.story===_storyName11&&item.steps.some((function(step){return!(!step.intent||step.intent!==_stepIntent2)&&step.entities.some((function(entityItem){return Object.keys(entityItem)[0]!==oriEntity&&Object.keys(entityItem)[0]===newEntity}))}))})))return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"同一個對話內關鍵字代表值不可重複"});var _userSay3="";_stories10.map((function(item){return item.story===_storyName11&&item.steps.map((function(step){return step.intent&&step.intent===_stepIntent2&&(_userSay3=step.user,step.entities=step.entities.map((function(entityItem){return Object.keys(entityItem)[0]===oriEntity?(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_6__.Z)({},newEntity,entityItem[Object.keys(entityItem)[0]]):entityItem}))),step})),item})),_nlu10.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.intent===_stepIntent2&&nluItem.text===_userSay3&&nluItem.entities.map((function(entityItem){return entityItem.entity===oriEntity&&(entityItem.entity=newEntity),entityItem})),nluItem})),_stories10.some((function(item){return item.steps.some((function(step){return!(!step.intent||!step.entities.length)&&step.entities.some((function(entityItem){return Object.keys(entityItem)[0]===oriEntity}))}))}))?_domain12.entities.includes(newEntity)||_domain12.entities.push(newEntity):_domain12.entities.includes(newEntity)?_domain12.entities.splice(_domain12.entities.indexOf(oriEntity),1):_domain12.entities.splice(_domain12.entities.indexOf(oriEntity),1,newEntity);var _cloneData10={stories:_stories10,nlu:_nlu10,domain:_domain12};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData10).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"編輯關鍵字代表值失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"編輯關鍵字代表值成功"}),_onSetAllTrainData10(res.data),_onSetStory10(_storyName11))}));case"EDIT_ENTITY_VALUE":var _userSay4,entityKey,_action$payload13=action.payload,_stepIntent3=_action$payload13.stepIntent,oriEntityValue=_action$payload13.oriEntityValue,newEntityValue=_action$payload13.newEntityValue,_storyName12=_action$payload13.storyName,_cloneDeep10=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories11=_cloneDeep10.stories,_nlu11=_cloneDeep10.nlu,_domain13=_cloneDeep10.domain,_onSetStory11=state.onSetStory,_onSetAllTrainData11=state.onSetAllTrainData;if(_stories11.map((function(item){return item.story===_storyName12&&item.steps.map((function(step){return step.intent&&step.intent===_stepIntent3&&(_userSay4=step.user),step})),item})),_nlu11.rasa_nlu_data.common_examples.some((function(nluItem){return nluItem.text===_userSay4&&nluItem.intent===_stepIntent3&&nluItem.entities.some((function(entityItem){return entityItem.value===newEntityValue}))})))return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"同一個對話內記憶槽代表值不可重複"});_nlu11.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text===_userSay4&&nluItem.intent===_stepIntent3&&nluItem.entities.map((function(entityItem){return entityItem.value===oriEntityValue&&(entityKey=entityItem.entity,entityItem.value=newEntityValue),entityItem})),nluItem})),_stories11.map((function(item){return item.story===_storyName12&&item.steps.map((function(step){return step.intent&&step.intent===_stepIntent3&&step.entities.map((function(entityItem){return Object.keys(entityItem)[0]===entityKey&&(entityItem[entityKey]=newEntityValue),entityItem})),step})),item}));var _cloneData11={stories:_stories11,nlu:_nlu11,domain:_domain13};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData11).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"編輯記憶槽代表值失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"編輯記憶槽代表值成功"}),_onSetAllTrainData11(res.data),_onSetStory11(_storyName12))}));case"DELETE_EXAMPLE":var _action$payload14=action.payload,_userSay5=_action$payload14.userSay,_stepIntent4=_action$payload14.stepIntent,_storyName13=_action$payload14.storyName,_cloneDeep11=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories12=_cloneDeep11.stories,_nlu12=_cloneDeep11.nlu,_domain14=_cloneDeep11.domain,_onSetStory12=state.onSetStory,_onSetAllTrainData12=state.onSetAllTrainData;if(!_nlu12.rasa_nlu_data.common_examples.filter((function(nluItem){return nluItem.intent===_stepIntent4&&nluItem.text===_userSay5}))[0])return utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"查無此例句，請重新嘗試"});var allExample=_nlu12.rasa_nlu_data.common_examples.map((function(nluItem){return nluItem.text}));_nlu12.rasa_nlu_data.common_examples.splice(allExample.indexOf(_userSay5),1);var _cloneData12={stories:_stories12,nlu:_nlu12,domain:_domain14};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData12).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"刪除例句失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"刪除例句成功"}),_onSetAllTrainData12(res.data),_onSetStory12(_storyName13))}));case"CREATE_SLOT":var formValue=action.payload,_cloneDeep12=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories13=_cloneDeep12.stories,_nlu13=_cloneDeep12.nlu,_domain15=_cloneDeep12.domain,_onSetAllTrainData13=state.onSetAllTrainData,slotName=formValue.slotName,slotType=formValue.slotType,slotValues=formValue.slotValues;_domain15.slots[slotName]={type:slotType},"categorical"===slotType&&(_domain15.slots[slotName].values=[],slotValues.map((function(item){return _domain15.slots[slotName].values.push(item.name)})));var _cloneData13={stories:_stories13,domain:_domain15,nlu:_nlu13};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData13).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"新增記錄槽失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"新增記錄槽成功"}),_onSetAllTrainData13(res.data))}));case"REMOVE_SLOT":var slotKey=action.payload,_cloneDeep13=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories14=_cloneDeep13.stories,_nlu14=_cloneDeep13.nlu,_domain16=_cloneDeep13.domain,_onSetAllTrainData14=state.onSetAllTrainData;delete _domain16.slots[slotKey];var _cloneData14={stories:_stories14,domain:_domain16,nlu:_nlu14};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData14).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"刪除記錄槽失敗",text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"刪除記錄槽成功"}),_onSetAllTrainData14(res.data))}));case"ADD_SLOT_VALUE":var _slotValues=action.payload.slotValues,_cloneDeep14=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories15=_cloneDeep14.stories,_nlu15=_cloneDeep14.nlu,_domain17=_cloneDeep14.domain,_onSetAllTrainData15=state.onSetAllTrainData;_slotValues.slotValueItems.map((function(item){return _domain17.slots[_slotValues.slotName].values.push(item.name)}));var _cloneData15={stories:_stories15,domain:_domain17,nlu:_nlu15};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData15).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"新增".concat(_slotValues.slotName,"的儲存槽值失敗"),text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"新增".concat(_slotValues.slotName,"的儲存槽值成功")}),_onSetAllTrainData15(res.data))}));case"REMOVE_SLOT_VALUE":var slotValue=action.payload,_cloneDeep15=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(state.cloneData),_stories16=_cloneDeep15.stories,_nlu16=_cloneDeep15.nlu,_domain18=_cloneDeep15.domain,_onSetAllTrainData16=state.onSetAllTrainData,idx=_domain18.slots[slotValue.key].values.indexOf(slotValue.value);_domain18.slots[slotValue.key].values.splice(idx,1);var _cloneData16={stories:_stories16,domain:_domain18,nlu:_nlu16};return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneData16).then((function(res){return"success"!==res.status?utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"刪除".concat(slotValue.key,"的儲存槽值失敗"),text:res.message}):(utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"刪除".concat(slotValue.key,"的儲存槽值成功")}),_onSetAllTrainData16(res.data))}));default:return state}}(state,action)}))};return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},initialState),{},{dispatch:dispatch,init:function init(){var token=(0,services_api__WEBPACK_IMPORTED_MODULE_0__.Fc)();token?(0,services_api__WEBPACK_IMPORTED_MODULE_0__.WX)(token).then((function(user){set({user:user,isAppInitializedComplete:!0})})).catch((function(){set({user:null,isAppInitializedComplete:!0}),utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"無效Token"}).then((function(){(0,services_api__WEBPACK_IMPORTED_MODULE_0__.Y0)(),window.location.reload()}))})):set({isAppInitializedComplete:!0})},trainRasa:function trainRasa(currentData){return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_9__.Z)().mark((function _callee(){var rasaState;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_9__.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,services_api__WEBPACK_IMPORTED_MODULE_0__.hZ)();case 2:(rasaState=_context.sent)>0?(set({rasaTrainState:rasaState}),utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"warning",title:"機器人訓練中，請稍後"})):(0,services_api__WEBPACK_IMPORTED_MODULE_0__.WX)((0,services_api__WEBPACK_IMPORTED_MODULE_0__.Fc)()).then((function(){return set({rasaTrainState:1}),(0,services_api__WEBPACK_IMPORTED_MODULE_0__.fu)(currentData)})).then((function(fileName){return(0,services_api__WEBPACK_IMPORTED_MODULE_0__.Kd)(fileName)})).then((function(res){204===res.status&&set({rasaTrainState:0})})).catch((function(err){console.log("err:",err),set({user:null,isAppInitializedComplete:!0}),utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"無效Token"}).then((function(){(0,services_api__WEBPACK_IMPORTED_MODULE_0__.Y0)(),window.location.reload()}))}));case 4:case"end":return _context.stop()}}),_callee)})))()},onLogin:function onLogin(email,password){set({loading:!0}),(0,services_api__WEBPACK_IMPORTED_MODULE_0__.XB)(email,password).then((function(res){return"success"===res.status?(set({user:res.user,loading:!1,currentPage:"首頁"}),utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"success",title:"登入成功"})):utils_swalInput__WEBPACK_IMPORTED_MODULE_1__.FN.fire({icon:"error",title:"登入失敗",text:res.message})}))},onLogout:function onLogout(){(0,services_api__WEBPACK_IMPORTED_MODULE_0__.Y0)(),set({user:null}),window.location.reload()},onRegister:function onRegister(userInfo){return set({loading:!0}),(0,services_api__WEBPACK_IMPORTED_MODULE_0__.U1)(userInfo).then((function(res){return set({loading:!1}),res})).catch((function(err){return console.log(err)}))},onSetCurrentPage:function onSetCurrentPage(pageName){set({currentPage:pageName})},onSetAllTrainData:function onSetAllTrainData(data){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.ki)(data))},onSetStory:function onSetStory(storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.E5)(storyName))},onEditUserSay:function onEditUserSay(oriWord,newWord,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.oM)(oriWord,newWord,storyName))},onEditBotRes:function onEditBotRes(oreWord,newWord,actionName,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.y)(oreWord,newWord,actionName,storyName))},onCreateExample:function onCreateExample(userSay,stepIntent,example,exampleEntities,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.x$)(userSay,stepIntent,example,exampleEntities,storyName))},onSetDeleteStory:function onSetDeleteStory(deleteStory){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.oT)(deleteStory))},onSetAllAction:function onSetAllAction(action){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.yL)(action))},onEditResButtons:function onEditResButtons(actionName,title,oriPayload,payload,reply,storyName,buttonActionName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.wD)(actionName,title,oriPayload,payload,reply,storyName,buttonActionName))},onRemoveResButton:function onRemoveResButton(actionName,payload,storyName,buttonActionName,disabled){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.eY)(actionName,payload,storyName,buttonActionName,disabled))},onAddResButtons:function onAddResButtons(actionName,title,payload,reply,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__._6)(actionName,title,payload,reply,storyName))},onSetRasaTrainState:function onSetRasaTrainState(state){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.tf)(state))},onEditIntent:function onEditIntent(oriIntent,intent,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.bG)(oriIntent,intent,storyName))},onCreateEntities:function onCreateEntities(entities,intent,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.sI)(entities,intent,storyName))},onDeleteEntities:function onDeleteEntities(entity,intent,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.wF)(entity,intent,storyName))},onEditEntityShowValue:function onEditEntityShowValue(stepIntent,currentEntityValue,newEntityShowValue,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.ex)(stepIntent,currentEntityValue,newEntityShowValue,storyName))},onEditEntity:function onEditEntity(stepIntent,oriEntity,newEntity,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.O6)(stepIntent,oriEntity,newEntity,storyName))},onEditEntityValue:function onEditEntityValue(stepIntent,oriEntityValue,newEntityValue,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.R9)(stepIntent,oriEntityValue,newEntityValue,storyName))},onDeleteExample:function onDeleteExample(userSay,stepIntent,storyName){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.uj)(userSay,stepIntent,storyName))},onCreateSlot:function onCreateSlot(formValue){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.R3)(formValue))},onRemoveSlot:function onRemoveSlot(slotKey){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__._5)(slotKey))},onAddSlotValue:function onAddSlotValue(slotValues){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.Hz)(slotValues))},onRemoveSlotValue:function onRemoveSlotValue(slotValue){dispatch((0,actions__WEBPACK_IMPORTED_MODULE_10__.t3)(slotValue))}})}));__webpack_exports__.Z=useStoryStore},"./src/utils/randomBotResAction.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{r:function(){return randomBotResAction}});var randomBotResAction=function randomBotResAction(actions){for(var lower="abcdefghijklmnopqrstuvwxyz",upper=lower.toUpperCase(),randomText=lower+upper+"1234567890",text="utter_",i=0;i<9;i+=1)text+=randomText[Math.floor(Math.random()*randomText.length)];return actions.some((function(action){return action===text}))&&randomBotResAction(),text}},"./src/utils/swalInput.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{FN:function(){return Toast},Ox:function(){return confirmWidget},Rh:function(){return swalInput},eq:function(){return swalMultipleInput}});var C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),sweetalert2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/sweetalert2/dist/sweetalert2.all.js"),sweetalert2__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_0__),swalInput=function(){var _ref=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__.Z)().mark((function _callee(title,input,inputPlaceholder,inputValue,showCancelButton){var _yield$Swal$fire,formValue,_yield$Swal$fire2,newInput;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if("編輯使用者對話"!==title&&"編輯機器人回覆"!==title&&"編輯意圖"!==title){_context.next=6;break}return _context.next=3,sweetalert2__WEBPACK_IMPORTED_MODULE_0___default().fire({title:title,html:'\n      <textarea id="ori" class="swal2-input" style="display:none">'.concat(inputValue,'</textarea>\n      <textarea id="new" class="swal2-textarea col-9">').concat(inputValue,"</textarea>\n      "),inputPlaceholder:inputPlaceholder,inputValue:inputValue,showCancelButton:showCancelButton,preConfirm:function preConfirm(){return{ori:document.querySelector("#ori").value,new:document.querySelector("#new").value}}});case 3:return _yield$Swal$fire=_context.sent,formValue=_yield$Swal$fire.value,_context.abrupt("return",formValue);case 6:return _context.next=8,sweetalert2__WEBPACK_IMPORTED_MODULE_0___default().fire({title:title,input:input,inputPlaceholder:inputPlaceholder,inputValue:inputValue,showCancelButton:showCancelButton});case 8:return _yield$Swal$fire2=_context.sent,newInput=_yield$Swal$fire2.value,_context.abrupt("return",newInput);case 11:case"end":return _context.stop()}}),_callee)})));return function swalInput(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}}(),Toast=sweetalert2__WEBPACK_IMPORTED_MODULE_0___default().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),confirmWidget=function confirmWidget(value,type){var currentTitle="",currentText="";switch(type){case"delete":currentTitle="刪除",currentText="確認要刪除『".concat(value,"』?");break;case"deleteEntities":currentTitle="刪除",currentText="確認要刪除關鍵字『".concat(value,"』?");break;case"deleteExample":currentTitle="刪除",currentText="確認要刪除例句『".concat(value,"』?");break;default:currentTitle="離開",currentText="故事『".concat(value,"』尚未儲存，確定要離開?")}return sweetalert2__WEBPACK_IMPORTED_MODULE_0___default().mixin({customClass:{confirmButton:"btn btn-danger mx-1",cancelButton:"btn btn-secondary mx-1"},buttonsStyling:!1}).fire({title:currentTitle,text:currentText,icon:"warning",showCancelButton:!0,confirmButtonText:"確認",cancelButtonText:"取消",reverseButtons:!1}).then((function(result){return result}))},swalMultipleInput=function(){var _ref2=(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__.Z)().mark((function _callee2(title,oriTitle,oriReply,showCancelButton){var _yield$Swal$fire3,formValue;return(0,C_Users_stevenma_Desktop_2022_Rasa_Interface_React_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_2__.Z)().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,sweetalert2__WEBPACK_IMPORTED_MODULE_0___default().fire({title:title,html:'\n      <input id="title" class="swal2-input col-9" value="'.concat(oriTitle,'" placeholder="請輸入選項名稱">\n      <input id="payload" class="swal2-input col-9" style="display:none;" value="',"/".concat(oriTitle),'" placeholder="">\n      <textarea id="reply" class="swal2-textarea col-9" placeholder="請輸入選項回覆">').concat(oriReply,"</textarea>\n      "),showCancelButton:showCancelButton,preConfirm:function preConfirm(){return{title:document.querySelector("#title").value,reply:document.querySelector("#reply").value,oriPayload:document.querySelector("#payload").value}}});case 2:return _yield$Swal$fire3=_context2.sent,formValue=_yield$Swal$fire3.value,_context2.abrupt("return",formValue);case 5:case"end":return _context2.stop()}}),_callee2)})));return function swalMultipleInput(_x6,_x7,_x8,_x9){return _ref2.apply(this,arguments)}}()},"./src sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$":function(module,__unused_webpack_exports,__webpack_require__){var map={"./components/BotStep/BotStep.stories.jsx":"./src/components/BotStep/BotStep.stories.jsx","./components/CheckPoint/CheckPoint.stories.jsx":"./src/components/CheckPoint/CheckPoint.stories.jsx","./components/CreateStory/CreateStory.stories.jsx":"./src/components/CreateStory/CreateStory.stories.jsx","./components/Entities/Entities.stories.jsx":"./src/components/Entities/Entities.stories.jsx","./components/Home/Home.stories.jsx":"./src/components/Home/Home.stories.jsx","./components/Layout/Layout.stories.jsx":"./src/components/Layout/Layout.stories.jsx","./components/Login/Login.stories.jsx":"./src/components/Login/Login.stories.jsx","./components/Menu/Menu.stories.jsx":"./src/components/Menu/Menu.stories.jsx","./components/MyButton/MyButton.stories.jsx":"./src/components/MyButton/MyButton.stories.jsx","./components/MyInput/Myinput.stories.jsx":"./src/components/MyInput/Myinput.stories.jsx","./components/NavBar/NavBar.stories.jsx":"./src/components/NavBar/NavBar.stories.jsx","./components/Register/Register.stories.jsx":"./src/components/Register/Register.stories.jsx","./components/ShowStory/ShowStory.stories.jsx":"./src/components/ShowStory/ShowStory.stories.jsx","./components/Slider/Slider.stories.jsx":"./src/components/Slider/Slider.stories.jsx","./components/Stories/Stories.stories.jsx":"./src/components/Stories/Stories.stories.jsx","./components/UserStep/UserStep.stories.jsx":"./src/components/UserStep/UserStep.stories.jsx","./components/WebChatWidget/WebChatWidget.stories.jsx":"./src/components/WebChatWidget/WebChatWidget.stories.jsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$"},"./src sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$":function(module){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./src sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$",module.exports=webpackEmptyContext},"./storybook-init-framework-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"?4f7e":function(){},"./generated-stories-entry.cjs":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$")],module,!1)}},function(__webpack_require__){var __webpack_exec__=function(moduleId){return __webpack_require__(__webpack_require__.s=moduleId)};__webpack_require__.O(0,[595],(function(){return __webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs")}));__webpack_require__.O()}]);